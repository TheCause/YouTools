<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.6.1"/>
    <title>articletovideo API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>




            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#ArticletovideoPlugin">ArticletovideoPlugin</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.__init__">ArticletovideoPlugin</a>
                        </li>
                        <li>
                                <a class="variable" href="#ArticletovideoPlugin.translator">translator</a>
                        </li>
                        <li>
                                <a class="variable" href="#ArticletovideoPlugin.tts_model">tts_model</a>
                        </li>
                        <li>
                                <a class="variable" href="#ArticletovideoPlugin.imggen_plugin">imggen_plugin</a>
                        </li>
                        <li>
                                <a class="variable" href="#ArticletovideoPlugin.ragllm_plugin">ragllm_plugin</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.get_config_fields">get_config_fields</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.get_tabs">get_tabs</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.run">run</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.get_sorted_files">get_sorted_files</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.scan_files">scan_files</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.generate_video_one_click">generate_video_one_click</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.show_detailed_interface">show_detailed_interface</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.get_segments">get_segments</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.regenerate_audios">regenerate_audios</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.regenerate_images">regenerate_images</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.convert_numbers_to_words_llm">convert_numbers_to_words_llm</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.convert_numbers_to_words">convert_numbers_to_words</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.retrieve_article">retrieve_article</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.translate_text">translate_text</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.translate_text_withllm">translate_text_withllm</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.generate_and_edit_prompts">generate_and_edit_prompts</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.display_prompts">display_prompts</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.generate_all_images">generate_all_images</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.generate_one_audio">generate_one_audio</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.split_text">split_text</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.generate_all_image_prompts">generate_all_image_prompts</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.unload_ollama_model">unload_ollama_model</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.generate_image_prompt">generate_image_prompt</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.generate_image">generate_image</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.display_image_gallery">display_image_gallery</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.regenerate_image">regenerate_image</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.replace_image">replace_image</a>
                        </li>
                        <li>
                                <a class="function" href="#ArticletovideoPlugin.assemble_final_video">assemble_final_video</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#StreamlitProgressBarLogger">StreamlitProgressBarLogger</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#StreamlitProgressBarLogger.__init__">StreamlitProgressBarLogger</a>
                        </li>
                        <li>
                                <a class="variable" href="#StreamlitProgressBarLogger.progress_container">progress_container</a>
                        </li>
                        <li>
                                <a class="function" href="#StreamlitProgressBarLogger.callback">callback</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
articletovideo    </h1>

                
                        <input id="mod-articletovideo-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-articletovideo-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="kn">import</span> <span class="nn">streamlit</span> <span class="k">as</span> <span class="nn">st</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">Plugin</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="kn">from</span> <span class="nn">global_vars</span> <span class="kn">import</span> <span class="n">t</span><span class="p">,</span> <span class="n">translations</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="kn">import</span> <span class="nn">requests</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="kn">from</span> <span class="nn">transformers</span> <span class="kn">import</span> <span class="n">MarianMTModel</span><span class="p">,</span> <span class="n">MarianTokenizer</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="kn">import</span> <span class="nn">torch</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="kn">from</span> <span class="nn">TTS.api</span> <span class="kn">import</span> <span class="n">TTS</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="kn">from</span> <span class="nn">plugins.imggen</span> <span class="kn">import</span> <span class="n">ImggenPlugin</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="kn">from</span> <span class="nn">plugins.ragllm</span> <span class="kn">import</span> <span class="n">RagllmPlugin</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="kn">import</span> <span class="nn">os</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="kn">import</span> <span class="nn">subprocess</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a><span class="kn">from</span> <span class="nn">moviepy.editor</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="kn">import</span> <span class="nn">io</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a><span class="kn">import</span> <span class="nn">glob</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a><span class="kn">import</span> <span class="nn">re</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a><span class="kn">from</span> <span class="nn">num2words</span> <span class="kn">import</span> <span class="n">num2words</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="kn">import</span> <span class="nn">babel.numbers</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a><span class="kn">import</span> <span class="nn">locale</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a><span class="kn">import</span> <span class="nn">soundfile</span> <span class="k">as</span> <span class="nn">sf</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="kn">import</span> <span class="nn">random</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a><span class="kn">import</span> <span class="nn">math</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="kn">import</span> <span class="nn">cv2</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a><span class="c1"># Add translations for this plugin</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="n">translations</span><span class="p">[</span><span class="s2">&quot;en&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a>    <span class="p">{</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a>        <span class="s2">&quot;article_to_video&quot;</span><span class="p">:</span> <span class="s2">&quot;Article to Video&quot;</span><span class="p">,</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a>        <span class="s2">&quot;article_url&quot;</span><span class="p">:</span> <span class="s2">&quot;Article URL&quot;</span><span class="p">,</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a>        <span class="s2">&quot;retrieve&quot;</span><span class="p">:</span> <span class="s2">&quot;Retrieve&quot;</span><span class="p">,</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a>        <span class="s2">&quot;article_text&quot;</span><span class="p">:</span> <span class="s2">&quot;Article Text&quot;</span><span class="p">,</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a>        <span class="s2">&quot;translate&quot;</span><span class="p">:</span> <span class="s2">&quot;Translate&quot;</span><span class="p">,</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a>        <span class="s2">&quot;translated_text&quot;</span><span class="p">:</span> <span class="s2">&quot;Translated Text&quot;</span><span class="p">,</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a>        <span class="s2">&quot;generate_video&quot;</span><span class="p">:</span> <span class="s2">&quot;Generate audio and image sequence&quot;</span><span class="p">,</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a>        <span class="s2">&quot;processing&quot;</span><span class="p">:</span> <span class="s2">&quot;Processing...&quot;</span><span class="p">,</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a>        <span class="s2">&quot;video_generated&quot;</span><span class="p">:</span> <span class="s2">&quot;Video generated successfully!&quot;</span><span class="p">,</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a>        <span class="s2">&quot;split_by&quot;</span><span class="p">:</span> <span class="s2">&quot;Split text by&quot;</span><span class="p">,</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a>        <span class="s2">&quot;sentence&quot;</span><span class="p">:</span> <span class="s2">&quot;Sentence&quot;</span><span class="p">,</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a>        <span class="s2">&quot;paragraph&quot;</span><span class="p">:</span> <span class="s2">&quot;Paragraph&quot;</span><span class="p">,</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a>        <span class="s2">&quot;edit_prompts&quot;</span><span class="p">:</span> <span class="s2">&quot;Générating image prompts&quot;</span><span class="p">,</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a>        <span class="s2">&quot;translating&quot;</span><span class="p">:</span> <span class="s2">&quot;Translating...&quot;</span><span class="p">,</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a>        <span class="s2">&quot;generating_prompts&quot;</span><span class="p">:</span> <span class="s2">&quot;Generating image prompts...&quot;</span><span class="p">,</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a>        <span class="s2">&quot;generating_audio&quot;</span><span class="p">:</span> <span class="s2">&quot;Generating audio...&quot;</span><span class="p">,</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a>        <span class="s2">&quot;generating_images&quot;</span><span class="p">:</span> <span class="s2">&quot;Generating images...&quot;</span><span class="p">,</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a>        <span class="s2">&quot;creating_video&quot;</span><span class="p">:</span> <span class="s2">&quot;Creating final video...&quot;</span><span class="p">,</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a>        <span class="s2">&quot;zoom_factor&quot;</span><span class="p">:</span> <span class="s2">&quot;Zoom Factor&quot;</span><span class="p">,</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a>        <span class="s2">&quot;speed_factor&quot;</span><span class="p">:</span> <span class="s2">&quot;Speed Factor&quot;</span><span class="p">,</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a>        <span class="s2">&quot;use_zoom_and_transitions&quot;</span><span class="p">:</span> <span class="s2">&quot;Use Zoom and Transitions&quot;</span><span class="p">,</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a>        <span class="s2">&quot;edit_images_and_prompts&quot;</span><span class="p">:</span> <span class="s2">&quot;Edit Images and Prompts&quot;</span><span class="p">,</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a>        <span class="s2">&quot;assemble_video&quot;</span><span class="p">:</span> <span class="s2">&quot;Assemble Video&quot;</span><span class="p">,</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a>        <span class="s2">&quot;image_prompt&quot;</span><span class="p">:</span> <span class="s2">&quot;Image Prompt&quot;</span><span class="p">,</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a>        <span class="s2">&quot;translated_text&quot;</span><span class="p">:</span> <span class="s2">&quot;Translated Text&quot;</span><span class="p">,</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a>        <span class="s2">&quot;regenerate_image&quot;</span><span class="p">:</span> <span class="s2">&quot;Regenerate Image&quot;</span><span class="p">,</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a>        <span class="s2">&quot;upload_image&quot;</span><span class="p">:</span> <span class="s2">&quot;Upload Image&quot;</span><span class="p">,</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a>        <span class="s2">&quot;generate_video_from_url&quot;</span><span class="p">:</span> <span class="s2">&quot;Generate Video in One Click&quot;</span><span class="p">,</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a>        <span class="s2">&quot;show_detailed_steps&quot;</span><span class="p">:</span> <span class="s2">&quot;Show Detailed Steps&quot;</span><span class="p">,</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a>        <span class="s2">&quot;processing_video&quot;</span><span class="p">:</span> <span class="s2">&quot;Processing video...&quot;</span><span class="p">,</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a>        <span class="s2">&quot;scan_files&quot;</span><span class="p">:</span> <span class="s2">&quot;Scan Files&quot;</span><span class="p">,</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a>        <span class="s2">&quot;assemble_video&quot;</span><span class="p">:</span> <span class="s2">&quot;Assemble Video&quot;</span><span class="p">,</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a>        <span class="s2">&quot;no_files_found&quot;</span><span class="p">:</span> <span class="s2">&quot;No audio or image files found in the output directory.&quot;</span><span class="p">,</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a>        <span class="s2">&quot;files_scanned_successfully&quot;</span><span class="p">:</span> <span class="s2">&quot;Files scanned successfully!&quot;</span><span class="p">,</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a>        <span class="s2">&quot;scanned_files&quot;</span><span class="p">:</span> <span class="s2">&quot;Scanned Files&quot;</span><span class="p">,</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a>        <span class="s2">&quot;video_files_generated&quot;</span><span class="p">:</span> <span class="s2">&quot;Video files generated successfully. You can now assemble the video.&quot;</span><span class="p">,</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a>        <span class="s2">&quot;regenerate_audio&quot;</span><span class="p">:</span> <span class="s2">&quot;Regenerate Audio&quot;</span><span class="p">,</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a>        <span class="s2">&quot;regenerate_images&quot;</span><span class="p">:</span> <span class="s2">&quot;Regenerate Images&quot;</span><span class="p">,</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a>        <span class="s2">&quot;audio_regenerated&quot;</span><span class="p">:</span> <span class="s2">&quot;Audio files regenerated successfully!&quot;</span><span class="p">,</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a>        <span class="s2">&quot;images_regenerated&quot;</span><span class="p">:</span> <span class="s2">&quot;Image files regenerated successfully!&quot;</span><span class="p">,</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a>        <span class="s2">&quot;regenerating_audio&quot;</span><span class="p">:</span> <span class="s2">&quot;Regenerating audio files...&quot;</span><span class="p">,</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a>        <span class="s2">&quot;regenerating_images&quot;</span><span class="p">:</span> <span class="s2">&quot;Regenerating image files...&quot;</span><span class="p">,</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a>        <span class="s2">&quot;percent&quot;</span><span class="p">:</span> <span class="s2">&quot;percent&quot;</span><span class="p">,</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a>        <span class="s2">&quot;decimal_point&quot;</span><span class="p">:</span> <span class="s2">&quot;point&quot;</span><span class="p">,</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a>        <span class="s2">&quot;decimal_comma&quot;</span><span class="p">:</span> <span class="s2">&quot;comma&quot;</span><span class="p">,</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a>        <span class="s2">&quot;tts_model&quot;</span><span class="p">:</span> <span class="s2">&quot;TTS Model&quot;</span><span class="p">,</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a>        <span class="s2">&quot;convert_numbers&quot;</span><span class="p">:</span> <span class="s2">&quot;Convert numbers to words&quot;</span><span class="p">,</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a>        <span class="s2">&quot;image_sysprompt&quot;</span><span class="p">:</span> <span class="s2">&quot;Prompt système pour la génération d&#39;images&quot;</span><span class="p">,</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a>    <span class="p">}</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a><span class="p">)</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="n">translations</span><span class="p">[</span><span class="s2">&quot;fr&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a>    <span class="p">{</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a>        <span class="s2">&quot;article_to_video&quot;</span><span class="p">:</span> <span class="s2">&quot;Article vers Vidéo&quot;</span><span class="p">,</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a>        <span class="s2">&quot;article_url&quot;</span><span class="p">:</span> <span class="s2">&quot;URL de l&#39;article&quot;</span><span class="p">,</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a>        <span class="s2">&quot;retrieve&quot;</span><span class="p">:</span> <span class="s2">&quot;Récupérer&quot;</span><span class="p">,</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a>        <span class="s2">&quot;article_text&quot;</span><span class="p">:</span> <span class="s2">&quot;Texte de l&#39;article&quot;</span><span class="p">,</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a>        <span class="s2">&quot;translate&quot;</span><span class="p">:</span> <span class="s2">&quot;Traduire&quot;</span><span class="p">,</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a>        <span class="s2">&quot;translated_text&quot;</span><span class="p">:</span> <span class="s2">&quot;Texte traduit&quot;</span><span class="p">,</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a>        <span class="s2">&quot;generate_video&quot;</span><span class="p">:</span> <span class="s2">&quot;Générer l&#39;audio et la séquence d&#39;images&quot;</span><span class="p">,</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a>        <span class="s2">&quot;processing&quot;</span><span class="p">:</span> <span class="s2">&quot;Traitement en cours...&quot;</span><span class="p">,</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a>        <span class="s2">&quot;video_generated&quot;</span><span class="p">:</span> <span class="s2">&quot;Vidéo générée avec succès !&quot;</span><span class="p">,</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a>        <span class="s2">&quot;split_by&quot;</span><span class="p">:</span> <span class="s2">&quot;Découper le texte par&quot;</span><span class="p">,</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a>        <span class="s2">&quot;sentence&quot;</span><span class="p">:</span> <span class="s2">&quot;Phrase&quot;</span><span class="p">,</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a>        <span class="s2">&quot;paragraph&quot;</span><span class="p">:</span> <span class="s2">&quot;Paragraphe&quot;</span><span class="p">,</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a>        <span class="s2">&quot;edit_prompts&quot;</span><span class="p">:</span> <span class="s2">&quot;Générer les prompts d&#39;image&quot;</span><span class="p">,</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a>        <span class="s2">&quot;translating&quot;</span><span class="p">:</span> <span class="s2">&quot;Traduction en cours...&quot;</span><span class="p">,</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a>        <span class="s2">&quot;generating_prompts&quot;</span><span class="p">:</span> <span class="s2">&quot;Génération des prompts d&#39;image...&quot;</span><span class="p">,</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a>        <span class="s2">&quot;generating_audio&quot;</span><span class="p">:</span> <span class="s2">&quot;Génération de l&#39;audio...&quot;</span><span class="p">,</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>        <span class="s2">&quot;generating_images&quot;</span><span class="p">:</span> <span class="s2">&quot;Génération des images...&quot;</span><span class="p">,</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>        <span class="s2">&quot;creating_video&quot;</span><span class="p">:</span> <span class="s2">&quot;Création de la vidéo finale...&quot;</span><span class="p">,</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>        <span class="s2">&quot;zoom_factor&quot;</span><span class="p">:</span> <span class="s2">&quot;Facteur de Zoom&quot;</span><span class="p">,</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a>        <span class="s2">&quot;speed_factor&quot;</span><span class="p">:</span> <span class="s2">&quot;Facteur de vitesse&quot;</span><span class="p">,</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a>        <span class="s2">&quot;use_zoom_and_transitions&quot;</span><span class="p">:</span> <span class="s2">&quot;Utiliser le Zoom et les Transitions&quot;</span><span class="p">,</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a>        <span class="s2">&quot;edit_images_and_prompts&quot;</span><span class="p">:</span> <span class="s2">&quot;Éditer les Images et les Prompts&quot;</span><span class="p">,</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a>        <span class="s2">&quot;assemble_video&quot;</span><span class="p">:</span> <span class="s2">&quot;Assembler la Vidéo&quot;</span><span class="p">,</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a>        <span class="s2">&quot;image_prompt&quot;</span><span class="p">:</span> <span class="s2">&quot;Prompt de l&#39;Image&quot;</span><span class="p">,</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a>        <span class="s2">&quot;translated_text&quot;</span><span class="p">:</span> <span class="s2">&quot;Texte Traduit&quot;</span><span class="p">,</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a>        <span class="s2">&quot;regenerate_image&quot;</span><span class="p">:</span> <span class="s2">&quot;Régénérer l&#39;Image&quot;</span><span class="p">,</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a>        <span class="s2">&quot;upload_image&quot;</span><span class="p">:</span> <span class="s2">&quot;Télécharger une Image&quot;</span><span class="p">,</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a>        <span class="s2">&quot;generate_video_from_url&quot;</span><span class="p">:</span> <span class="s2">&quot;Générer une Vidéo en UN Click&quot;</span><span class="p">,</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a>        <span class="s2">&quot;show_detailed_steps&quot;</span><span class="p">:</span> <span class="s2">&quot;Afficher les Étapes Détaillées&quot;</span><span class="p">,</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a>        <span class="s2">&quot;processing_video&quot;</span><span class="p">:</span> <span class="s2">&quot;Traitement de la vidéo en cours...&quot;</span><span class="p">,</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a>        <span class="s2">&quot;scan_files&quot;</span><span class="p">:</span> <span class="s2">&quot;Scanner les Fichiers&quot;</span><span class="p">,</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a>        <span class="s2">&quot;assemble_video&quot;</span><span class="p">:</span> <span class="s2">&quot;Assembler la Vidéo&quot;</span><span class="p">,</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a>        <span class="s2">&quot;no_files_found&quot;</span><span class="p">:</span> <span class="s2">&quot;Aucun fichier audio ou image trouvé dans le répertoire de sortie.&quot;</span><span class="p">,</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a>        <span class="s2">&quot;files_scanned_successfully&quot;</span><span class="p">:</span> <span class="s2">&quot;Fichiers scannés avec succès !&quot;</span><span class="p">,</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a>        <span class="s2">&quot;scanned_files&quot;</span><span class="p">:</span> <span class="s2">&quot;Fichiers Scannés&quot;</span><span class="p">,</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a>        <span class="s2">&quot;video_files_generated&quot;</span><span class="p">:</span> <span class="s2">&quot;Fichiers vidéo générés avec succès. Vous pouvez maintenant assembler la vidéo.&quot;</span><span class="p">,</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a>        <span class="s2">&quot;regenerate_audio&quot;</span><span class="p">:</span> <span class="s2">&quot;Régénérer l&#39;Audio&quot;</span><span class="p">,</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>        <span class="s2">&quot;regenerate_images&quot;</span><span class="p">:</span> <span class="s2">&quot;Régénérer les Images&quot;</span><span class="p">,</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>        <span class="s2">&quot;audio_regenerated&quot;</span><span class="p">:</span> <span class="s2">&quot;Fichiers audio régénérés avec succès !&quot;</span><span class="p">,</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a>        <span class="s2">&quot;images_regenerated&quot;</span><span class="p">:</span> <span class="s2">&quot;Fichiers image régénérés avec succès !&quot;</span><span class="p">,</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>        <span class="s2">&quot;regenerating_audio&quot;</span><span class="p">:</span> <span class="s2">&quot;Régénération des fichiers audio en cours...&quot;</span><span class="p">,</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a>        <span class="s2">&quot;regenerating_images&quot;</span><span class="p">:</span> <span class="s2">&quot;Régénération des fichiers image en cours...&quot;</span><span class="p">,</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>        <span class="s2">&quot;percent&quot;</span><span class="p">:</span> <span class="s2">&quot;pourcent&quot;</span><span class="p">,</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a>        <span class="s2">&quot;decimal_point&quot;</span><span class="p">:</span> <span class="s2">&quot;point&quot;</span><span class="p">,</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>        <span class="s2">&quot;decimal_comma&quot;</span><span class="p">:</span> <span class="s2">&quot;virgule&quot;</span><span class="p">,</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>        <span class="s2">&quot;tts_model&quot;</span><span class="p">:</span> <span class="s2">&quot;Modèle TTS&quot;</span><span class="p">,</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a>        <span class="s2">&quot;convert_numbers&quot;</span><span class="p">:</span> <span class="s2">&quot;Convertir les nombres en mots&quot;</span><span class="p">,</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a>        <span class="s2">&quot;image_sysprompt&quot;</span><span class="p">:</span> <span class="s2">&quot;Prompt système pour la génération d&#39;images&quot;</span><span class="p">,</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a>    <span class="p">}</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a><span class="p">)</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a><span class="k">class</span> <span class="nc">ArticletovideoPlugin</span><span class="p">(</span><span class="n">Plugin</span><span class="p">):</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a><span class="sd">    A plugin that converts articles to videos, including translation,</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a><span class="sd">    text-to-speech (TTS), and image generation. The plugin supports both</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a><span class="sd">    detailed step-by-step processing and one-click video generation.</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a><span class="sd">    Parameters</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a><span class="sd">    ----------</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a><span class="sd">    name : str</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a><span class="sd">        The name of the plugin.</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a><span class="sd">    plugin_manager : PluginManager</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a><span class="sd">        The plugin manager that handles plugin lifecycle and dependencies.</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a><span class="sd">    Attributes</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a><span class="sd">    ----------</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a><span class="sd">    translator : MarianMTModel or None</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a><span class="sd">        The machine translation model used to translate article text.</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a><span class="sd">    tts_model : TTS or None</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a><span class="sd">        The text-to-speech model used to generate audio from text.</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a><span class="sd">    imggen_plugin : ImggenPlugin</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a><span class="sd">        An instance of `ImggenPlugin` for generating images.</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a><span class="sd">    ragllm_plugin : RagllmPlugin</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a><span class="sd">        An instance of `RagllmPlugin` for calling LLM (Language Models) for prompts.</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a><span class="sd">    Methods</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a><span class="sd">    -------</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a><span class="sd">    get_config_fields()</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a><span class="sd">        Returns a dictionary defining the configurable fields for the plugin.</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a><span class="sd">    get_tabs()</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a><span class="sd">        Returns the tabs for the plugin interface.</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a><span class="sd">    run(config)</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a><span class="sd">        Main entry point for running the plugin within the Streamlit interface.</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a><span class="sd">    generate_video_one_click(url, config)</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a><span class="sd">        Generates a video from an article URL using one-click mode.</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a><span class="sd">    scan_files(config)</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a><span class="sd">        Scans the output directory for generated audio and image files.</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a><span class="sd">    assemble_final_video(config, use_zoom_and_transitions, audio_paths, image_paths, output_path)</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a><span class="sd">        Assembles the final video from the generated audio and image files.</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a><span class="sd">    Examples</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a><span class="sd">    --------</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a><span class="sd">    # Example usage within a Streamlit app:</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a><span class="sd">    plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a><span class="sd">    config = plugin.get_config_fields()</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a><span class="sd">    plugin.run(config)</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="p">):</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a><span class="sd">        Initializes the ArticletovideoPlugin with a name and plugin manager.</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a><span class="sd">        This constructor sets up the plugin by initializing its name and plugin manager,</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a><span class="sd">        as well as creating instances of the `ImggenPlugin` and `RagllmPlugin` for</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a><span class="sd">        image generation and language model interactions, respectively.</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a><span class="sd">        Parameters</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a><span class="sd">        ----------</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a><span class="sd">        name : str</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a><span class="sd">            The name of the plugin, used for identification within the application.</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a><span class="sd">        plugin_manager : PluginManager</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a><span class="sd">            The plugin manager responsible for managing the lifecycle and dependencies</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a><span class="sd">            of the plugin within the application.</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a><span class="sd">        Attributes</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a><span class="sd">        ----------</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a><span class="sd">        translator : MarianMTModel or None</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a><span class="sd">            Initialized as `None`. This will hold the translation model used to translate</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a><span class="sd">            article text when needed.</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a><span class="sd">        tts_model : TTS or None</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a><span class="sd">            Initialized as `None`. This will hold the text-to-speech (TTS) model used to</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a><span class="sd">            generate audio from text.</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a><span class="sd">        imggen_plugin : ImggenPlugin</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a><span class="sd">            An instance of `ImggenPlugin`, used to generate images based on text prompts.</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a><span class="sd">        ragllm_plugin : RagllmPlugin</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a><span class="sd">            An instance of `RagllmPlugin`, used to interact with language models for</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a><span class="sd">            generating text prompts and other LLM-related tasks.</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a><span class="sd">        Examples</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a><span class="sd">        --------</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a><span class="sd">        plugin_manager = PluginManager()</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">translator</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imggen_plugin</span> <span class="o">=</span> <span class="n">ImggenPlugin</span><span class="p">(</span><span class="s2">&quot;imggen&quot;</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ragllm_plugin</span> <span class="o">=</span> <span class="n">RagllmPlugin</span><span class="p">(</span><span class="s2">&quot;ragllm&quot;</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a>    <span class="k">def</span> <span class="nf">get_config_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a><span class="sd">        Returns a dictionary defining the configurable fields for the plugin.</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a><span class="sd">        Returns</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a><span class="sd">        -------</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a><span class="sd">        dict</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a><span class="sd">            A dictionary where keys are field names and values are dictionaries</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a><span class="sd">            specifying field type, label, default values, and other options.</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a>            <span class="s2">&quot;output_dir&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;output_directory&quot;</span><span class="p">),</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;~/Videos/ArticleToVideo&quot;</span><span class="p">,</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a>            <span class="p">},</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a>            <span class="s2">&quot;target_language&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;target_language&quot;</span><span class="p">),</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a>                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;fr-fr&quot;</span><span class="p">,</span> <span class="s2">&quot;Français&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="s2">&quot;English&quot;</span><span class="p">)],</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;fr-fr&quot;</span><span class="p">,</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a>            <span class="p">},</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a>            <span class="s2">&quot;tts_speaker&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">),</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;p326&quot;</span><span class="p">,</span>  <span class="c1"># Default speaker for YourTTS</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>            <span class="p">},</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>            <span class="s2">&quot;split_by&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;split_by&quot;</span><span class="p">),</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a>                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;sentence&quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;sentence&quot;</span><span class="p">)),</span> <span class="p">(</span><span class="s2">&quot;paragraph&quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;paragraph&quot;</span><span class="p">))],</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;paragraph&quot;</span><span class="p">,</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a>            <span class="p">},</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a>            <span class="s2">&quot;zoom_factor&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;zoom_factor&quot;</span><span class="p">),</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>                <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a>                <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>                <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="mf">0.001</span><span class="p">,</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a>            <span class="p">},</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a>            <span class="s2">&quot;speed_factor&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;speed_factor&quot;</span><span class="p">),</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a>                <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>                <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>                <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="mf">0.001</span><span class="p">,</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>            <span class="p">},</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>            <span class="s2">&quot;tts_model&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;tts_model&quot;</span><span class="p">),</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a>                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a>                    <span class="p">(</span><span class="s2">&quot;your_tts&quot;</span><span class="p">,</span> <span class="s2">&quot;YourTTS&quot;</span><span class="p">),</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a>                    <span class="p">(</span><span class="s2">&quot;tacotron&quot;</span><span class="p">,</span> <span class="s2">&quot;Tacotron&quot;</span><span class="p">),</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a>                    <span class="p">(</span><span class="s2">&quot;xtts_v2&quot;</span><span class="p">,</span> <span class="s2">&quot;XTTS2&quot;</span><span class="p">),</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>                    <span class="p">(</span><span class="s2">&quot;bark&quot;</span><span class="p">,</span> <span class="s2">&quot;Bark&quot;</span><span class="p">),</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>                <span class="p">],</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;your_tts&quot;</span><span class="p">,</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>            <span class="p">},</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a>            <span class="s2">&quot;convert_numbers&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;checkbox&quot;</span><span class="p">,</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;convert_numbers&quot;</span><span class="p">),</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a>            <span class="p">},</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a>            <span class="s2">&quot;image_sysprompt&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;image_sysprompt&quot;</span><span class="p">),</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;You are an AI assistant tasked with creating image prompts. The prompt should be vivid and descriptive, suitable for image generation. Reply only the prompt.&quot;</span><span class="p">,</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>            <span class="p">},</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a>        <span class="p">}</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a>    <span class="k">def</span> <span class="nf">get_tabs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a>        <span class="k">return</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;article_to_video&quot;</span><span class="p">),</span> <span class="s2">&quot;plugin&quot;</span><span class="p">:</span> <span class="s2">&quot;articletovideo&quot;</span><span class="p">}]</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a><span class="sd">        Executes the main logic of the plugin within the Streamlit interface.</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a><span class="sd">        This method serves as the entry point for the plugin&#39;s functionality</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a><span class="sd">        when used in a Streamlit application. It displays the main interface</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a><span class="sd">        for the user, allowing them to input an article URL, choose options</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a><span class="sd">        for video generation, and either generate the video in one click or</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a><span class="sd">        follow a detailed step-by-step process.</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a><span class="sd">        Parameters</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a><span class="sd">        ----------</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a><span class="sd">        config : dict</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a><span class="sd">            the plugin. This includes settings like the output directory,</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a><span class="sd">            target language, TTS model, zoom factor, and others.</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a><span class="sd">        Raises</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a><span class="sd">        ------</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a><span class="sd">        ValueError</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a><span class="sd">            If the configuration is missing required fields or contains invalid values.</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a><span class="sd">        requests.exceptions.RequestException</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a><span class="sd">            If there is an issue retrieving the article from the provided URL.</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a><span class="sd">        Examples</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a><span class="sd">        --------</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a><span class="sd">        config = plugin.get_config_fields()</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a><span class="sd">        plugin.run(config)</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;article_to_video&quot;</span><span class="p">))</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>        <span class="n">url</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_input</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;article_url&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>        <span class="n">show_detailed_steps</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>            <span class="n">t</span><span class="p">(</span><span class="s2">&quot;show_detailed_steps&quot;</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;show_detailed_steps_checkbox&quot;</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a>        <span class="p">)</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a>        <span class="k">if</span> <span class="n">show_detailed_steps</span><span class="p">:</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">show_detailed_interface</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a>        <span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col3</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a>        <span class="k">with</span> <span class="n">col1</span><span class="p">:</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generate_video_from_url&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;generate_video_button&quot;</span><span class="p">):</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_video_one_click</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>        <span class="k">with</span> <span class="n">col2</span><span class="p">:</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;scan_files&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;scan_files_button&quot;</span><span class="p">):</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">scan_files</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>        <span class="k">with</span> <span class="n">col3</span><span class="p">:</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;assemble_video&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;assemble_video_button&quot;</span><span class="p">):</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>                <span class="n">audio_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a>                <span class="n">image_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a>                <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">assemble_final_video</span><span class="p">(</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a>                    <span class="n">config</span><span class="p">,</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a>                    <span class="n">use_zoom_and_transitions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a>                    <span class="n">audio_paths</span><span class="o">=</span><span class="n">audio_paths</span><span class="p">,</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a>                    <span class="n">image_paths</span><span class="o">=</span><span class="n">image_paths</span><span class="p">,</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>                    <span class="n">output_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="s2">&quot;final_video.mp4&quot;</span><span class="p">),</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>                <span class="p">)</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>        <span class="n">use_zoom_and_transitions</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>            <span class="n">t</span><span class="p">(</span><span class="s2">&quot;use_zoom_and_transitions&quot;</span><span class="p">),</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>            <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a>            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;use_zoom_transitions_checkbox&quot;</span><span class="p">,</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a>        <span class="p">)</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a>    <span class="k">def</span> <span class="nf">get_sorted_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a><span class="sd">        Retrieves and sorts files from a directory based on a specified pattern.</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a><span class="sd">        This method searches for files in the given directory that match the</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a><span class="sd">        provided regular expression pattern, sorts them by a numeric index,</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a><span class="sd">        and returns a list of file paths.</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a><span class="sd">        Parameters</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a><span class="sd">        ----------</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a><span class="sd">        directory : str</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a><span class="sd">            The directory where files are located.</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a><span class="sd">        pattern : str</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a><span class="sd">            A regular expression pattern used to identify and extract numeric</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a><span class="sd">            indices from filenames.</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a><span class="sd">        Returns</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a><span class="sd">        -------</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a><span class="sd">        list of str</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a><span class="sd">            A list of sorted file paths that match the specified pattern.</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a><span class="sd">        Examples</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a><span class="sd">        --------</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a><span class="sd">        files = plugin.get_sorted_files(&quot;~/output&quot;, r&quot;image_(\d+)\.png&quot;)</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>        <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a>        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a>            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a>            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a>                <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a>                <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">index</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">filename</span><span class="p">)))</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">file</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">files</span><span class="p">)]</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a>    <span class="k">def</span> <span class="nf">scan_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a><span class="sd">        Scans the output directory for generated audio and image files.</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a><span class="sd">        This method identifies and sorts the audio and image files based on</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a><span class="sd">        their naming convention in the specified output directory.</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a><span class="sd">        Parameters</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a><span class="sd">        ----------</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a><span class="sd">        config : dict</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a><span class="sd">            the plugin, including the output directory.</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a><span class="sd">        Raises</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a><span class="sd">        ------</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a><span class="sd">            If the specified output directory does not exist.</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a><span class="sd">        Warning</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a><span class="sd">            If no audio or image files are found in the output directory.</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a><span class="sd">        Examples</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a><span class="sd">        --------</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a><span class="sd">        config = plugin.get_config_fields()</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a><span class="sd">        plugin.scan_files(config)</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>        <span class="c1"># Scan for audio files</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a>        <span class="n">audio_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sorted_files</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;audio_(\d+)\.wav&quot;</span><span class="p">)</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>        <span class="c1"># Scan for image files</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a>        <span class="n">image_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sorted_files</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;image_(\d+)\.png&quot;</span><span class="p">)</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">audio_files</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">image_files</span><span class="p">:</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;no_files_found&quot;</span><span class="p">))</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>            <span class="k">return</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span> <span class="o">=</span> <span class="n">audio_files</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span> <span class="o">=</span> <span class="n">image_files</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>        <span class="c1"># Reconstruct segments and prompts based on file count</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">segments</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;Segment </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">audio_files</span><span class="p">))]</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">prompts</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>            <span class="sa">f</span><span class="s2">&quot;Prompt for image </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">image_files</span><span class="p">))</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>        <span class="p">]</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;files_scanned_successfully&quot;</span><span class="p">))</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a>        <span class="c1"># Display scanned files</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">subheader</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;scanned_files&quot;</span><span class="p">))</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Audio files: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">audio_files</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Image files: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">image_files</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a>    <span class="k">def</span> <span class="nf">generate_video_one_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a><span class="sd">        Generates a video from an article URL using one-click mode.</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a><span class="sd">        This method retrieves the article, translates it, generates prompts,</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a><span class="sd">        creates images, and assembles the final video.</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a><span class="sd">        Parameters</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a><span class="sd">        ----------</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a><span class="sd">        url : str</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a><span class="sd">            The URL of the article to be converted into a video.</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a><span class="sd">        config : dict</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a><span class="sd">            the plugin, such as output directory, language, TTS model, etc.</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a><span class="sd">        Raises</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a><span class="sd">        ------</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a><span class="sd">        ValueError</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a><span class="sd">            If the URL is invalid or the article cannot be retrieved.</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a><span class="sd">        Examples</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a><span class="sd">        --------</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a><span class="sd">        config = plugin.get_config_fields()</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a><span class="sd">        plugin.generate_video_one_click(&quot;https://example.com/article&quot;, config)</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;processing_video&quot;</span><span class="p">)):</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a>            <span class="c1"># Step 1: Retrieve article</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a>            <span class="n">article_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_article</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">article_text</span> <span class="o">=</span> <span class="n">article_text</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>            <span class="c1"># Step 2: Translate text</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>            <span class="n">translated_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate_text</span><span class="p">(</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>                <span class="n">article_text</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;target_language&quot;</span><span class="p">]</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>            <span class="p">)</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span> <span class="o">=</span> <span class="n">translated_text</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>            <span class="c1"># Step 3: Generate prompts</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>            <span class="n">split_by</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;split_by&quot;</span><span class="p">]</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>            <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_segments</span><span class="p">(</span><span class="n">translated_text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">)</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a>            <span class="n">prompts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_all_image_prompts</span><span class="p">(</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>                <span class="n">segments</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;image_sysprompt&quot;</span><span class="p">]</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>            <span class="p">)</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span> <span class="o">=</span> <span class="n">prompts</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>            <span class="c1"># Step 4: Generate video</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">generate_all_images</span><span class="p">(</span><span class="n">translated_text</span><span class="p">,</span> <span class="n">prompts</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;video_files_generated&quot;</span><span class="p">))</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a>    <span class="k">def</span> <span class="nf">show_detailed_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a><span class="sd">        Displays a detailed user interface for generating videos step by step.</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a><span class="sd">        This method provides an interface in Streamlit that allows users to</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a><span class="sd">        retrieve an article, translate it, generate image prompts, and</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a><span class="sd">        assemble the final video in a detailed, step-by-step manner.</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a><span class="sd">        Parameters</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a><span class="sd">        ----------</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a><span class="sd">        config : dict</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a><span class="sd">            the plugin.</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a><span class="sd">        Examples</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a><span class="sd">        --------</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a><span class="sd">        plugin.show_detailed_interface(config)</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>        <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;retrieve&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;retrieve_button&quot;</span><span class="p">):</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a>            <span class="n">article_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_article</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">article_text</span> <span class="o">=</span> <span class="n">article_text</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a>        <span class="k">if</span> <span class="s2">&quot;article_text&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a>            <span class="n">article_text</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_area</span><span class="p">(</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a>                <span class="n">t</span><span class="p">(</span><span class="s2">&quot;article_text&quot;</span><span class="p">),</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">article_text</span><span class="p">,</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a>                <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a>                <span class="n">key</span><span class="o">=</span><span class="s2">&quot;article_text_area&quot;</span><span class="p">,</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>            <span class="p">)</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;translate&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;translate_button&quot;</span><span class="p">):</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a>                <span class="n">translated_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate_text</span><span class="p">(</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a>                    <span class="n">article_text</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;target_language&quot;</span><span class="p">],</span> <span class="n">config</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a>                <span class="p">)</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span> <span class="o">=</span> <span class="n">translated_text</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a>        <span class="k">if</span> <span class="s2">&quot;translated_text&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a>            <span class="n">translated_text</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_area</span><span class="p">(</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>                <span class="n">t</span><span class="p">(</span><span class="s2">&quot;translated_text&quot;</span><span class="p">),</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span><span class="p">,</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>                <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>                <span class="n">key</span><span class="o">=</span><span class="s2">&quot;translated_text_area&quot;</span><span class="p">,</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>            <span class="p">)</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;edit_prompts&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;edit_prompts_button&quot;</span><span class="p">):</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_and_edit_prompts</span><span class="p">(</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a>                    <span class="n">translated_text</span><span class="p">,</span> <span class="n">config</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a>                <span class="p">)</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a>        <span class="k">if</span> <span class="s2">&quot;edited_prompts&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">display_prompts</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span><span class="p">)</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a>            <span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col3</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a>            <span class="k">with</span> <span class="n">col1</span><span class="p">:</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a>                <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generate_video&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;generate_video_button_detailed&quot;</span><span class="p">):</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">generate_all_images</span><span class="p">(</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a>                        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span><span class="p">,</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a>                        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span><span class="p">,</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a>                        <span class="n">config</span><span class="p">,</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a>                    <span class="p">)</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a>            <span class="k">with</span> <span class="n">col2</span><span class="p">:</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>                <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerate_audio&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;regenerate_audio_button&quot;</span><span class="p">):</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">regenerate_audios</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>            <span class="k">with</span> <span class="n">col3</span><span class="p">:</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>                <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerate_images&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;regenerate_images_button&quot;</span><span class="p">):</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">regenerate_images</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>            <span class="s2">&quot;image_paths&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>            <span class="ow">and</span> <span class="s2">&quot;prompts&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>            <span class="ow">and</span> <span class="s2">&quot;segments&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>        <span class="p">):</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;edit_images_and_prompts&quot;</span><span class="p">))</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">display_image_gallery</span><span class="p">()</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;assemble_video&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;assemble_video_button&quot;</span><span class="p">):</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>                <span class="n">audio_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>                <span class="n">image_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>                <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">assemble_final_video</span><span class="p">(</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>                    <span class="n">config</span><span class="p">,</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>                    <span class="n">use_zoom_and_transitions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>                    <span class="n">audio_paths</span><span class="o">=</span><span class="n">audio_paths</span><span class="p">,</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>                    <span class="n">image_paths</span><span class="o">=</span><span class="n">image_paths</span><span class="p">,</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>                    <span class="n">output_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="s2">&quot;final_video.mp4&quot;</span><span class="p">),</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>                <span class="p">)</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>    <span class="k">def</span> <span class="nf">get_segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">):</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a><span class="sd">        Splits the provided text into segments based on the specified criterion.</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a><span class="sd">        This method splits the text either by sentences or paragraphs, based on</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a><span class="sd">        the `split_by` parameter, and filters out empty or invalid segments.</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a><span class="sd">        Parameters</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a><span class="sd">        ----------</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a><span class="sd">        text : str</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a><span class="sd">            The text to split into segments.</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a><span class="sd">        split_by : str</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a><span class="sd">            The criterion for splitting the text, either &quot;sentence&quot; or &quot;paragraph&quot;.</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a><span class="sd">        Returns</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a><span class="sd">        -------</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a><span class="sd">        list of str</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a><span class="sd">            A list of text segments after splitting.</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a><span class="sd">        Raises</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a><span class="sd">        ------</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a><span class="sd">        ValueError</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a><span class="sd">            If `split_by` is not &quot;sentence&quot; or &quot;paragraph&quot;.</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a><span class="sd">        Examples</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a><span class="sd">        --------</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a><span class="sd">        segments = plugin.get_segments(&quot;This is the first sentence. This is the second.&quot;, &quot;sentence&quot;)</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>        <span class="k">if</span> <span class="n">split_by</span> <span class="o">==</span> <span class="s2">&quot;sentence&quot;</span><span class="p">:</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>            <span class="n">segments</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;. &quot;</span><span class="p">)</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>            <span class="n">segments</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>        <span class="c1"># Filtrer les segments</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a>        <span class="n">filtered_segments</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a>        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">:</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a>            <span class="k">if</span> <span class="n">segment</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a>                <span class="k">continue</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a>            <span class="n">segment</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">segment</span> <span class="ow">or</span> <span class="s2">&quot; &quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">segment</span><span class="p">:</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>                <span class="k">continue</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>            <span class="n">filtered_segments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>        <span class="k">return</span> <span class="n">filtered_segments</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a>    <span class="k">def</span> <span class="nf">regenerate_audios</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a><span class="sd">        Regenerates audio files from the given text using the configured TTS model.</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a><span class="sd">        This method splits the text into segments, generates audio for each</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a><span class="sd">        segment, and saves the audio files in the specified output directory.</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a><span class="sd">        Parameters</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a><span class="sd">        ----------</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a><span class="sd">        text : str</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a><span class="sd">            The text for which to regenerate audio.</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a><span class="sd">        config : dict</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a><span class="sd">            the plugin, such as the TTS model and output directory.</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a><span class="sd">        Raises</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a><span class="sd">        ------</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a><span class="sd">        Examples</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a><span class="sd">        --------</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a><span class="sd">        plugin.regenerate_audios(translated_text, config)</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>        <span class="n">split_by</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;split_by&quot;</span><span class="p">]</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_segments</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">)</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerating_audio&quot;</span><span class="p">)):</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>            <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>            <span class="n">audio_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">segment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">segments</span><span class="p">):</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>                <span class="n">audio_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;audio_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.wav&quot;</span><span class="p">)</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_one_audio</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">audio_path</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>                <span class="n">audio_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">audio_path</span><span class="p">)</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">))</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span> <span class="o">=</span> <span class="n">audio_paths</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;audio_regenerated&quot;</span><span class="p">))</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>    <span class="k">def</span> <span class="nf">regenerate_images</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompts</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a><span class="sd">        Regenerates images based on the provided prompts.</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a><span class="sd">        This method generates new images based on the provided prompts and</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a><span class="sd">        saves them in the specified output directory.</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a><span class="sd">        Parameters</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a><span class="sd">        ----------</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a><span class="sd">        prompts : list of str</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a><span class="sd">            The image prompts to use for generating new images.</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a><span class="sd">        config : dict</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a><span class="sd">            the plugin, such as the output directory.</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a><span class="sd">        Raises</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a><span class="sd">        ------</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a><span class="sd">        Examples</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a><span class="sd">        --------</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a><span class="sd">        plugin.regenerate_images(prompts, config)</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerating_images&quot;</span><span class="p">)):</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>            <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>            <span class="n">image_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">prompt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">prompts</span><span class="p">):</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a>                <span class="n">image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.png&quot;</span><span class="p">)</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_image</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">image_path</span><span class="p">)</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a>                <span class="n">image_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">prompts</span><span class="p">))</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span> <span class="o">=</span> <span class="n">image_paths</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;images_regenerated&quot;</span><span class="p">))</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a>    <span class="k">def</span> <span class="nf">convert_numbers_to_words_llm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="p">):</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a><span class="sd">        Converts numbers to words in the provided text using a language model.</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a><span class="sd">        This method leverages an LLM (Language Model) to convert numbers,</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a><span class="sd">        including percentages and dates, into words in the specified language.</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a><span class="sd">        Parameters</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a><span class="sd">        ----------</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a><span class="sd">        text : str</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a><span class="sd">            The text containing numbers to be converted to words.</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a><span class="sd">        lang : str</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a><span class="sd">            The language code indicating the target language for conversion (e.g., &#39;en&#39; for English, &#39;fr&#39; for French).</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a><span class="sd">        Returns</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a><span class="sd">        -------</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a><span class="sd">        str</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a><span class="sd">            The text with all numbers converted to words by the LLM.</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a><span class="sd">        Examples</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a><span class="sd">        --------</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a><span class="sd">        result = plugin.convert_numbers_to_words_llm(&quot;Le prix est 20,5 %.&quot;, &quot;fr&quot;)</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>        <span class="n">sysprompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;You are an AI assistant that converts numbers including real numbers and percentages to words in </span><span class="si">{</span><span class="n">lang</span><span class="si">}</span><span class="s2">. Maintain the original sentence structure and only convert the numbers and real numbers and percentages. DO NOT ADD COMMENTS&quot;</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>        <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Without adding any comment, convert all numbers and real numbers and percentages in the following text to words in </span><span class="si">{</span><span class="n">lang</span><span class="si">}</span><span class="s2">:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>        <span class="n">ragllm_plugin</span> <span class="o">=</span> <span class="n">RagllmPlugin</span><span class="p">(</span><span class="s2">&quot;ragllm&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">ragllm_plugin</span><span class="o">.</span><span class="n">call_llm</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">)</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>    <span class="k">def</span> <span class="nf">convert_numbers_to_words</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="p">):</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a><span class="sd">        Converts all numbers in the provided text to words in the specified language.</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a><span class="sd">        This method handles the conversion of integers, decimal numbers, percentages,</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a><span class="sd">        and dates to their word equivalents in the target language.</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a><span class="sd">        Parameters</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a><span class="sd">        ----------</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a><span class="sd">        text : str</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a><span class="sd">            The text containing numbers to be converted to words.</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a><span class="sd">        lang : str</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a><span class="sd">            The language code indicating the target language for conversion (e.g., &#39;en&#39; for English, &#39;fr&#39; for French).</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a><span class="sd">        Returns</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a><span class="sd">        -------</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a><span class="sd">        str</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a><span class="sd">            The text with all numbers converted to words.</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a><span class="sd">        Examples</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a><span class="sd">        --------</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a><span class="sd">        result = plugin.convert_numbers_to_words(&quot;The temperature is 25.5 degrees.&quot;, &quot;en&quot;)</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>        <span class="k">def</span> <span class="nf">convert_number</span><span class="p">(</span><span class="n">match</span><span class="p">):</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>            <span class="n">number</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>            <span class="c1"># Convert percentages</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>            <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="s2">&quot;%&quot;</span><span class="p">:</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>                <span class="k">return</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;percent&quot;</span><span class="p">)</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>            <span class="k">if</span> <span class="s2">&quot;%&quot;</span> <span class="ow">in</span> <span class="n">number</span><span class="p">:</span>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a>                <span class="n">num</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">number</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>                <span class="k">return</span> <span class="n">num2words</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;percent&quot;</span><span class="p">)</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>            <span class="c1"># Convert dates</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>            <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d{1,2}/\d{1,2}/\d</span><span class="si">{4}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>                <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y&quot;</span><span class="p">)</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a>                <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_TIME</span><span class="p">,</span> <span class="n">lang</span><span class="p">)</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a>                <span class="k">return</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> %B %Y&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a>            <span class="c1"># Convert decimal numbers</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a>            <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">number</span> <span class="ow">or</span> <span class="s2">&quot;,&quot;</span> <span class="ow">in</span> <span class="n">number</span><span class="p">:</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a>                <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a>                    <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>                <span class="p">)</span>  <span class="c1"># Normalize to dot as decimal separator</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>                <span class="n">integer_part</span><span class="p">,</span> <span class="n">decimal_part</span> <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>                <span class="n">integer_words</span> <span class="o">=</span> <span class="n">num2words</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">integer_part</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>                <span class="n">decimal_words</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>                    <span class="n">num2words</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">digit</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span> <span class="k">for</span> <span class="n">digit</span> <span class="ow">in</span> <span class="n">decimal_part</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>                <span class="p">)</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>                <span class="n">decimal_separator</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>                    <span class="n">t</span><span class="p">(</span><span class="s2">&quot;decimal_point&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">lang</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;en&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;decimal_comma&quot;</span><span class="p">)</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>                <span class="p">)</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>                <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">integer_words</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">decimal_separator</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">decimal_words</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>            <span class="c1"># Convert integers</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>            <span class="k">return</span> <span class="n">num2words</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>        <span class="c1"># Regular expression to match numbers, percentages, and dates</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>        <span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\b\d+(?:[.,]\d+)?%?|%|\b\d{1,2}/\d{1,2}/\d</span><span class="si">{4}</span><span class="s2">\b&quot;</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">convert_number</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">convert_number</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>    <span class="k">def</span> <span class="nf">retrieve_article</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a><span class="sd">        Retrieves and extracts the text content of an article from a given URL.</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a><span class="sd">        This method fetches the web page at the provided URL and extracts the</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a><span class="sd">        text from the paragraph (`&lt;p&gt;`) tags.</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a><span class="sd">        Parameters</span>
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a><span class="sd">        ----------</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a><span class="sd">        url : str</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a><span class="sd">            The URL of the article to retrieve.</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a><span class="sd">        Returns</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a><span class="sd">        -------</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a><span class="sd">        str</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a><span class="sd">            The extracted text content of the article.</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a><span class="sd">        Raises</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a><span class="sd">        ------</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a><span class="sd">        requests.exceptions.RequestException</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a><span class="sd">            If there is an issue with the HTTP request.</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a><span class="sd">        ValueError</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a><span class="sd">            If the URL is invalid or the article content cannot be retrieved.</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a><span class="sd">        Examples</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a><span class="sd">        --------</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a><span class="sd">        text = plugin.retrieve_article(&quot;https://example.com/article&quot;)</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>        <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>        <span class="n">paragraphs</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">paragraphs</span><span class="p">])</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>    <span class="k">def</span> <span class="nf">translate_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">target_lang</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a><span class="sd">        Translates the given text into the target language using a MarianMT model.</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a><span class="sd">        This method translates text by splitting it into paragraphs and sentences,</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a><span class="sd">        processing each individually, and then reassembling the translated text.</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a><span class="sd">        Optionally, numbers in the text can be converted to words.</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a><span class="sd">        Parameters</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a><span class="sd">        ----------</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a><span class="sd">        text : str</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a><span class="sd">            The text to translate.</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a><span class="sd">        target_lang : str</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a><span class="sd">            The target language code (e.g., &#39;fr-fr&#39; for French).</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a><span class="sd">        config : dict</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a><span class="sd">            the plugin, such as whether to convert numbers to words.</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a><span class="sd">        Returns</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a><span class="sd">        -------</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a><span class="sd">        str</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a><span class="sd">            The translated text.</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a><span class="sd">        Raises</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a><span class="sd">        ------</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a><span class="sd">        ValueError</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a><span class="sd">            If the target language is not supported or translation fails.</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a><span class="sd">        Examples</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a><span class="sd">        --------</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a><span class="sd">        translated_text = plugin.translate_text(&quot;Hello, world!&quot;, &quot;fr-fr&quot;, config)</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">translator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>            <span class="n">model_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Helsinki-NLP/opus-mt-en-</span><span class="si">{</span><span class="n">target_lang</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">translator</span> <span class="o">=</span> <span class="n">MarianMTModel</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tokenizer</span> <span class="o">=</span> <span class="n">MarianTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a>        <span class="n">paragraphs</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a>        <span class="n">translated_paragraphs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a>        <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Traductions&quot;</span><span class="p">)</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;processing&quot;</span><span class="p">)):</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">paragraph</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">):</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------&quot;</span><span class="p">)</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a>                <span class="n">sentences</span> <span class="o">=</span> <span class="n">paragraph</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;. &quot;</span><span class="p">)</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a>                <span class="n">translated_sentences</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a>                <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">sentence</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a>                        <span class="k">continue</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a>                    <span class="n">inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenizer</span><span class="p">(</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a>                        <span class="n">sentence</span><span class="p">,</span> <span class="n">return_tensors</span><span class="o">=</span><span class="s2">&quot;pt&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">truncation</span><span class="o">=</span><span class="kc">True</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a>                    <span class="p">)</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a>                    <span class="n">translated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>                    <span class="n">translated_sentence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenizer</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a>                        <span class="n">translated</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">skip_special_tokens</span><span class="o">=</span><span class="kc">True</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a>                    <span class="p">)</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a>                    <span class="c1"># Convert numbers to words after translation</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a>                    <span class="k">if</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;convert_numbers&quot;</span><span class="p">]:</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a>                        <span class="n">translated_sentence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_numbers_to_words</span><span class="p">(</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a>                            <span class="n">translated_sentence</span><span class="p">,</span> <span class="n">target_lang</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a>                        <span class="p">)</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>                    <span class="n">truncated_sentence</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>                        <span class="sa">r</span><span class="s2">&quot;[.\n]&quot;</span><span class="p">,</span> <span class="n">translated_sentence</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>                    <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>                    <span class="n">translated_sentences</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">truncated_sentence</span><span class="p">)</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[1m</span><span class="se">\033</span><span class="s2">[31m</span><span class="si">{</span><span class="n">sentence</span><span class="si">}</span><span class="se">\033</span><span class="s2">[0m&quot;</span><span class="p">)</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="n">translated_sentence</span><span class="p">)</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a>                <span class="n">translated_paragraph</span> <span class="o">=</span> <span class="s2">&quot;. &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">translated_sentences</span><span class="p">)</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a>                <span class="n">translated_paragraphs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">translated_paragraph</span><span class="p">)</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">))</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">translated_paragraphs</span><span class="p">)</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a>    <span class="k">def</span> <span class="nf">translate_text_withllm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">target_lang</span><span class="p">):</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a><span class="sd">        Translates text into the target language using a language model (LLM).</span>
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a><span class="sd">        This method translates the given text into the specified target language</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a><span class="sd">        by leveraging a language model (LLM). The translation includes converting</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a><span class="sd">        numbers and percentages to words in the target language. The text is</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a><span class="sd">        split into paragraphs, each translated separately, and the resulting</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a><span class="sd">        translated paragraphs are then combined.</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a><span class="sd">        Parameters</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a><span class="sd">        ----------</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a><span class="sd">        text : str</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a><span class="sd">            The text to be translated.</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a><span class="sd">        target_lang : str</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a><span class="sd">            The target language code (e.g., &#39;fr&#39; for French, &#39;en&#39; for English).</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a><span class="sd">        Returns</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a><span class="sd">        -------</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a><span class="sd">        str</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a><span class="sd">            The translated text, with numbers and percentages converted to words</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a><span class="sd">            in the target language.</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a><span class="sd">        Raises</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a><span class="sd">        ------</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a><span class="sd">        ValueError</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a><span class="sd">            If the translation fails or the language model returns an invalid response.</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a><span class="sd">        Examples</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a><span class="sd">        --------</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a><span class="sd">        translated_text = plugin.translate_text_withllm(&quot;The price is 25.5%.&quot;, &quot;fr&quot;)</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a>        <span class="n">paragraphs</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a>        <span class="n">translated_paragraphs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a>        <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;translating&quot;</span><span class="p">)):</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">paragraph</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">):</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a>                <span class="n">sysprompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;You are a professional translator. Translate the given text from English to </span><span class="si">{</span><span class="n">target_lang</span><span class="si">}</span><span class="s2">. Maintain the original tone and style. Convert all numbers, including real numbers and percentages, to words in the target language. DO NOT ADD COMMENTS OR EXPLANATIONS.&quot;</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a>                <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Translate the following text to </span><span class="si">{</span><span class="n">target_lang</span><span class="si">}</span><span class="s2">, converting all numbers and real numbers and percent sign to words, do not add any comment:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">paragraph</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a>                <span class="n">ragllm_plugin</span> <span class="o">=</span> <span class="n">RagllmPlugin</span><span class="p">(</span><span class="s2">&quot;ragllm&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>                <span class="n">translated_paragraph</span> <span class="o">=</span> <span class="n">ragllm_plugin</span><span class="o">.</span><span class="n">call_llm</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">)</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>                <span class="n">truncated_paragraph</span> <span class="o">=</span> <span class="n">translated_paragraph</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a>                <span class="n">translated_paragraphs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">truncated_paragraph</span><span class="p">)</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">))</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">translated_paragraphs</span><span class="p">)</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a>    <span class="k">def</span> <span class="nf">generate_and_edit_prompts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a><span class="sd">        Generates and optionally edits image prompts based on the translated text.</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a><span class="sd">        This method splits the text into segments, generates image prompts for</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a><span class="sd">        each segment, and allows the user to edit these prompts.</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a><span class="sd">        Parameters</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a><span class="sd">        ----------</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a><span class="sd">        text : str</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a><span class="sd">            The translated text for which to generate image prompts.</span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a><span class="sd">        config : dict</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a><span class="sd">            the plugin, such as the system prompt for generating image prompts.</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a><span class="sd">        Returns</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a><span class="sd">        -------</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a><span class="sd">        list of str</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a><span class="sd">            A list of generated (and possibly edited) image prompts.</span>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a><span class="sd">        Examples</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a><span class="sd">        --------</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a><span class="sd">        prompts = plugin.generate_and_edit_prompts(translated_text, config)</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a>        <span class="n">split_by</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;split_by&quot;</span><span class="p">]</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a>        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_segments</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">)</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generating_prompts&quot;</span><span class="p">)):</span>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a>            <span class="n">prompts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_all_image_prompts</span><span class="p">(</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a>                <span class="n">segments</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;image_sysprompt&quot;</span><span class="p">]</span>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>            <span class="p">)</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>            <span class="k">return</span> <span class="n">prompts</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>    <span class="k">def</span> <span class="nf">display_prompts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompts</span><span class="p">):</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a><span class="sd">        Displays and allows editing of image prompts in the Streamlit interface.</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a><span class="sd">        This method takes a list of image prompts, displays them in a text area</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a><span class="sd">        within the Streamlit interface, and allows the user to edit the prompts.</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a><span class="sd">        The edited prompts are then saved back into the session state for further</span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a><span class="sd">        processing.</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a><span class="sd">        Parameters</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a><span class="sd">        ----------</span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a><span class="sd">        prompts : list of str</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a><span class="sd">            A list of image prompts to be displayed and edited. Each prompt corresponds</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a><span class="sd">            to a specific segment of the text and is intended to guide the generation</span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a><span class="sd">            of an image.</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a><span class="sd">        Examples</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a><span class="sd">        --------</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a><span class="sd">        prompts = [&quot;A sunny day at the beach.&quot;, &quot;A crowded market in the city.&quot;]</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a><span class="sd">        plugin.display_prompts(prompts)</span>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>        <span class="n">prompts_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prompts</span><span class="p">)</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>        <span class="n">edited_prompts</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_area</span><span class="p">(</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>            <span class="n">t</span><span class="p">(</span><span class="s2">&quot;edit_prompts&quot;</span><span class="p">),</span> <span class="n">prompts_text</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;edit_prompts_text_area&quot;</span>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>        <span class="p">)</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span> <span class="o">=</span> <span class="n">edited_prompts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>    <span class="k">def</span> <span class="nf">generate_all_images</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">prompts</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a><span class="sd">        Generates all images and audio files for the provided text and prompts.</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a><span class="sd">        This method processes the text by splitting it into segments, generates</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a><span class="sd">        corresponding audio files using the configured TTS model, and creates</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a><span class="sd">        images based on the provided prompts.</span>
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a><span class="sd">        Parameters</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a><span class="sd">        ----------</span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a><span class="sd">        text : str</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a><span class="sd">            The text to be used for generating audio and images.</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a><span class="sd">        prompts : list of str</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a><span class="sd">            The prompts to be used for generating images.</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a><span class="sd">        config : dict</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a><span class="sd">            the plugin, such as the output directory, TTS model, and other parameters.</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a><span class="sd">        Raises</span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a><span class="sd">        ------</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a><span class="sd">        Examples</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a><span class="sd">        --------</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a><span class="sd">        plugin.generate_all_images(translated_text, prompts, config)</span>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>        <span class="n">split_by</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;split_by&quot;</span><span class="p">]</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_segments</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">)</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a>        <span class="c1"># Generate audio</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generating_audio&quot;</span><span class="p">)):</span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a>            <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a>            <span class="n">audio_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">segment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">segments</span><span class="p">):</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a>                <span class="n">audio_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;audio_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.wav&quot;</span><span class="p">)</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_one_audio</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">audio_path</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>                <span class="n">audio_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">audio_path</span><span class="p">)</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">))</span>
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unload_ollama_model</span><span class="p">()</span>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>        <span class="c1"># Generate images</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generating_images&quot;</span><span class="p">)):</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>            <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>            <span class="n">image_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">prompt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">prompts</span><span class="p">):</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>                <span class="n">image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.png&quot;</span><span class="p">)</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_image</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">image_path</span><span class="p">)</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>                <span class="n">image_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">prompts</span><span class="p">))</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span> <span class="o">=</span> <span class="n">audio_paths</span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span> <span class="o">=</span> <span class="n">image_paths</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">prompts</span> <span class="o">=</span> <span class="n">prompts</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">segments</span> <span class="o">=</span> <span class="n">segments</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>    <span class="k">def</span> <span class="nf">generate_one_audio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">output_path</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a><span class="sd">        Generates an audio file from the provided text using the configured TTS model.</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a><span class="sd">        This method converts the provided text into speech and saves the audio file</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a><span class="sd">        at the specified output path.</span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a><span class="sd">        Parameters</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a><span class="sd">        ----------</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a><span class="sd">        text : str</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a><span class="sd">            The text to convert into speech.</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a><span class="sd">        output_path : str</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a><span class="sd">            The file path where the generated audio file will be saved.</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a><span class="sd">        config : dict</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a><span class="sd">            the plugin, such as the TTS model and other parameters.</span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a><span class="sd">        Raises</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a><span class="sd">        ------</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a><span class="sd">        ValueError</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a><span class="sd">            If the specified TTS model is not supported.</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a><span class="sd">        Examples</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a><span class="sd">        --------</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a><span class="sd">        plugin.generate_one_audio(&quot;Bonjour tout le monde.&quot;, &quot;~/output/audio_0.wav&quot;, config)</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a>        <span class="c1"># https://theroamingworkshop.cloud/b/en/2425/%F0%9F%90%B8coqui-ai-tts-ultra-fast-voice-generation-and-cloning-from-multilingual-text/</span>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a>        <span class="n">tts_model</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_model&quot;</span><span class="p">]</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a>        <span class="n">target_lang</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;target_language&quot;</span><span class="p">]</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;COQUI_TTS_CACHE_DIR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>            <span class="s2">&quot;~/.cache/coqui&quot;</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a>        <span class="p">)</span>  <span class="c1"># https://github.com/coqui-ai/TTS/issues/3608</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a>        <span class="k">if</span> <span class="n">tts_model</span> <span class="o">==</span> <span class="s2">&quot;your_tts&quot;</span><span class="p">:</span>  <span class="c1"># fast but not best quality</span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="n">TTS</span><span class="p">(</span><span class="s2">&quot;tts_models/multilingual/multi-dataset/your_tts&quot;</span><span class="p">)</span>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span><span class="o">.</span><span class="n">tts_to_file</span><span class="p">(</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>                <span class="n">file_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>                <span class="n">speaker_wav</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">]),</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>                <span class="n">language</span><span class="o">=</span><span class="n">target_lang</span><span class="p">,</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a>            <span class="p">)</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a>        <span class="k">elif</span> <span class="n">tts_model</span> <span class="o">==</span> <span class="s2">&quot;xtts_v2&quot;</span><span class="p">:</span>  <span class="c1"># best quality but very slow</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="n">TTS</span><span class="p">(</span><span class="s2">&quot;tts_models/multilingual/multi-dataset/xtts_v2&quot;</span><span class="p">)</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span><span class="o">.</span><span class="n">tts_to_file</span><span class="p">(</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a>                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a>                <span class="n">file_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a>                <span class="n">speaker_wav</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">]),</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>                <span class="n">language</span><span class="o">=</span><span class="n">target_lang</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>            <span class="p">)</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>        <span class="k">elif</span> <span class="n">tts_model</span> <span class="o">==</span> <span class="s2">&quot;tacotron&quot;</span><span class="p">:</span>  <span class="c1"># not very good quality and predermined voice</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="n">TTS</span><span class="p">(</span><span class="s2">&quot;tts_models/fr/mai/tacotron2-DDC&quot;</span><span class="p">)</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span><span class="o">.</span><span class="n">tts_to_file</span><span class="p">(</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a>                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a>                <span class="n">file_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a>                <span class="n">speaker_wav</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">]),</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a>            <span class="p">)</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a>        <span class="k">elif</span> <span class="n">tts_model</span> <span class="o">==</span> <span class="s2">&quot;bark&quot;</span><span class="p">:</span>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="n">TTS</span><span class="p">(</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>                    <span class="s2">&quot;tts_models/multilingual/multi-dataset/bark&quot;</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>                <span class="p">)</span>  <span class="c1"># https://github.com/coqui-ai/TTS/issues/3567</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span><span class="o">.</span><span class="n">tts_to_file</span><span class="p">(</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a>                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a>                <span class="n">file_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a>                <span class="n">speaker_wav</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">]),</span>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a>                <span class="n">language</span><span class="o">=</span><span class="n">target_lang</span><span class="p">,</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a>            <span class="p">)</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported TTS model: </span><span class="si">{</span><span class="n">tts_model</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a>    <span class="k">def</span> <span class="nf">split_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">):</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a><span class="sd">        Generates image prompts for each paragraph in the provided list.</span>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a><span class="sd">        This method creates an image prompt for each paragraph by using a</span>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a><span class="sd">        language model and a system prompt to guide the generation process.</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a><span class="sd">        Parameters</span>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a><span class="sd">        ----------</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a><span class="sd">        paragraphs : list of str</span>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a><span class="sd">            A list of paragraphs for which to generate image prompts.</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a><span class="sd">        sysprompt : str</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a><span class="sd">            The system prompt guiding the generation of the image prompts.</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a><span class="sd">        Returns</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a><span class="sd">        -------</span>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a><span class="sd">        list of str</span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a><span class="sd">            A list of generated image prompts corresponding to each paragraph.</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a><span class="sd">        Examples</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a><span class="sd">        --------</span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a><span class="sd">        prompts = plugin.generate_all_image_prompts(paragraphs, sysprompt)</span>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a>        <span class="k">if</span> <span class="n">split_by</span> <span class="o">==</span> <span class="s2">&quot;sentence&quot;</span><span class="p">:</span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a>            <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;. &quot;</span><span class="p">)</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a>            <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a>    <span class="k">def</span> <span class="nf">generate_all_image_prompts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paragraphs</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">):</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a><span class="sd">        Generates image prompts for each paragraph in the provided list.</span>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a><span class="sd">        This method iterates through a list of paragraphs and generates an image</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a><span class="sd">        prompt for each one using a specified system prompt. The prompts are</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a><span class="sd">        generated by calling a language model via the `RagllmPlugin`.</span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a><span class="sd">        Parameters</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a><span class="sd">        ----------</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a><span class="sd">        paragraphs : list of str</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a><span class="sd">            A list of paragraphs for which to generate image prompts. Each paragraph</span>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a><span class="sd">            represents a segment of the translated text.</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a><span class="sd">        sysprompt : str</span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a><span class="sd">            The system prompt guiding the generation of the image prompts. This prompt</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a><span class="sd">            provides context or instructions for the language model to produce relevant</span>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a><span class="sd">            and descriptive image prompts.</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a><span class="sd">        Returns</span>
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a><span class="sd">        -------</span>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a><span class="sd">        list of str</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a><span class="sd">            A list of generated image prompts corresponding to each paragraph in the</span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a><span class="sd">            provided list. Each prompt is a textual description intended for generating</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a><span class="sd">            an image that visually represents the content of the paragraph.</span>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a><span class="sd">        Raises</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a><span class="sd">        ------</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a><span class="sd">        ValueError</span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a><span class="sd">            If the `paragraphs` list is empty or if an error occurs during prompt generation.</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a><span class="sd">        Examples</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a><span class="sd">        --------</span>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a><span class="sd">        paragraphs = [&quot;The sun rises over a tranquil beach.&quot;, &quot;A bustling city street at night.&quot;]</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a><span class="sd">        sysprompt = &quot;You are an AI tasked with generating image prompts. Each prompt should vividly describe a scene.&quot;</span>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a><span class="sd">        prompts = plugin.generate_all_image_prompts(paragraphs, sysprompt)</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a>        <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a>        <span class="n">prompts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">paragraph</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">):</span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a>            <span class="n">prompt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_image_prompt</span><span class="p">(</span><span class="n">paragraph</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">)</span>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a>            <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a>            <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">))</span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a>        <span class="k">return</span> <span class="n">prompts</span>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a>    <span class="k">def</span> <span class="nf">unload_ollama_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a><span class="sd">        Unloads the currently loaded Ollama model to free resources.</span>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a><span class="sd">        This method makes a dummy call to unload the model from memory,</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a><span class="sd">        preventing unnecessary resource consumption.</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a><span class="sd">        Examples</span>
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a><span class="sd">        --------</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a><span class="sd">        plugin.unload_ollama_model()</span>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a>        <span class="c1"># Effectuer un appel bidon à Ollama pour décharger le modèle</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ragllm_plugin</span><span class="o">.</span><span class="n">free_llm</span><span class="p">()</span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a>    <span class="k">def</span> <span class="nf">generate_image_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">):</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a><span class="sd">        Generates an image prompt based on the provided text and system prompt.</span>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a><span class="sd">        This method uses a language model to create an image prompt that describes</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a><span class="sd">        the visual content corresponding to the given text.</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a><span class="sd">        Parameters</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a><span class="sd">        ----------</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a><span class="sd">        text : str</span>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a><span class="sd">            The text for which to generate an image prompt.</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a><span class="sd">        sysprompt : str</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a><span class="sd">            The system prompt guiding the generation of the image prompt.</span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a><span class="sd">        Returns</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a><span class="sd">        -------</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a><span class="sd">        str</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a><span class="sd">            The generated image prompt.</span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a><span class="sd">        Examples</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a><span class="sd">        --------</span>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a><span class="sd">        prompt = plugin.generate_image_prompt(&quot;A beautiful sunset over the ocean.&quot;, sysprompt)</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a>        <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Create an image prompt, 77 word max. Describe, without commenting, just give the prompt for a scene that illustrate the following situation : </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a>        <span class="n">ragllm_plugin</span> <span class="o">=</span> <span class="n">RagllmPlugin</span><span class="p">(</span><span class="s2">&quot;ragllm&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">ragllm_plugin</span><span class="o">.</span><span class="n">call_llm</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">)</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a>        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a>    <span class="k">def</span> <span class="nf">generate_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompt</span><span class="p">,</span> <span class="n">output_path</span><span class="p">):</span>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a><span class="sd">        Generates an image from the provided prompt and saves it to the specified output path.</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a><span class="sd">        This method uses the `ImggenPlugin` to create an image based on the given</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a><span class="sd">        textual prompt. The generated image is saved as a PNG file at the specified path.</span>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a><span class="sd">        Parameters</span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a><span class="sd">        ----------</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a><span class="sd">        prompt : str</span>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a><span class="sd">            The prompt describing the content of the image to generate.</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a><span class="sd">        output_path : str</span>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a><span class="sd">            The file path where the generated image will be saved, typically ending in `.png`.</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a><span class="sd">        Raises</span>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a><span class="sd">        ------</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a><span class="sd">            If the specified directory in `output_path` does not exist.</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a><span class="sd">        ValueError</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a><span class="sd">            If the image generation process fails or returns an invalid result.</span>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a><span class="sd">        Examples</span>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a><span class="sd">        --------</span>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a><span class="sd">        plugin.generate_image(&quot;A beautiful sunrise over the mountains&quot;, &quot;~/output/image_1.png&quot;)</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a>        <span class="n">image</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">imggen_plugin</span><span class="o">.</span><span class="n">generate_image</span><span class="p">(</span>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a>            <span class="kc">None</span><span class="p">,</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a>            <span class="n">prompt</span><span class="p">,</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a>            <span class="n">aspect_ratio</span><span class="o">=</span><span class="s2">&quot;16:9&quot;</span><span class="p">,</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a>            <span class="n">remove_background</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>            <span class="n">background_removal_method</span><span class="o">=</span><span class="s2">&quot;ai&quot;</span><span class="p">,</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a>            <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a>            <span class="n">face</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a>            <span class="n">steps</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a>        <span class="p">)</span>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a>        <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a>    <span class="k">def</span> <span class="nf">display_image_gallery</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a><span class="sd">        Displays an image gallery in the Streamlit interface for editing and</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a><span class="sd">        replacing images.</span>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a><span class="sd">        This method allows users to view generated images, edit the associated</span>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a><span class="sd">        prompts, and upload new images to replace the existing ones.</span>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a><span class="sd">        Examples</span>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a><span class="sd">        --------</span>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a><span class="sd">        plugin.display_image_gallery()</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a>        <span class="n">image_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a>        <span class="n">prompts</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">prompts</span>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a>        <span class="n">segments</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">segments</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a>        <span class="n">cols</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="n">prompt</span><span class="p">,</span> <span class="n">segment</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a>            <span class="nb">zip</span><span class="p">(</span><span class="n">image_paths</span><span class="p">,</span> <span class="n">prompts</span><span class="p">,</span> <span class="n">segments</span><span class="p">)</span>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a>        <span class="p">):</span>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a>            <span class="k">with</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="mi">3</span><span class="p">]:</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a>                <span class="n">new_prompt</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_area</span><span class="p">(</span>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">t</span><span class="p">(</span><span class="s1">&#39;image_prompt&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">prompt</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;prompt_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a>                <span class="p">)</span>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a>                <span class="c1"># st.text_area(f&quot;{t(&#39;translated_text&#39;)} {i+1}&quot;, segment, key=f&quot;segment_{i}&quot;)</span>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a>                    <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a><span class="s2">                    &lt;div style=&quot;border: 1px solid #e6e6e6; padding: 10px; width: 100%; height: 100px; overflow-y: scroll;&quot;&gt;</span>
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a><span class="s2">                        </span><span class="si">{</span><span class="n">segment</span><span class="si">}</span>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a><span class="s2">                    &lt;/div&gt;</span>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a><span class="s2">                    &quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a>                    <span class="n">unsafe_allow_html</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a>                <span class="p">)</span>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a>                <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerate_image&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;regenerate_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">regenerate_image</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">new_prompt</span><span class="p">)</span>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a>                    <span class="n">st</span><span class="o">.</span><span class="n">rerun</span><span class="p">()</span>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a>                <span class="n">uploaded_file</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">file_uploader</span><span class="p">(</span>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a>                    <span class="n">t</span><span class="p">(</span><span class="s2">&quot;upload_image&quot;</span><span class="p">),</span> <span class="nb">type</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="s2">&quot;jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;jpeg&quot;</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;upload_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a>                <span class="p">)</span>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a>                    <span class="n">uploaded_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a>                    <span class="ow">and</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">uploaded_file</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a>                <span class="p">):</span>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">replace_image</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">uploaded_file</span><span class="p">)</span>
</span><span id="L-1383"><a href="#L-1383"><span class="linenos">1383</span></a>                    <span class="n">st</span><span class="o">.</span><span class="n">rerun</span><span class="p">()</span>
</span><span id="L-1384"><a href="#L-1384"><span class="linenos">1384</span></a>
</span><span id="L-1385"><a href="#L-1385"><span class="linenos">1385</span></a>    <span class="k">def</span> <span class="nf">regenerate_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">new_prompt</span><span class="p">):</span>
</span><span id="L-1386"><a href="#L-1386"><span class="linenos">1386</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1387"><a href="#L-1387"><span class="linenos">1387</span></a><span class="sd">        Regenerates a single image based on a new prompt provided by the user.</span>
</span><span id="L-1388"><a href="#L-1388"><span class="linenos">1388</span></a>
</span><span id="L-1389"><a href="#L-1389"><span class="linenos">1389</span></a><span class="sd">        This method generates a new image using the updated prompt and</span>
</span><span id="L-1390"><a href="#L-1390"><span class="linenos">1390</span></a><span class="sd">        replaces the existing image with the new one.</span>
</span><span id="L-1391"><a href="#L-1391"><span class="linenos">1391</span></a>
</span><span id="L-1392"><a href="#L-1392"><span class="linenos">1392</span></a><span class="sd">        Parameters</span>
</span><span id="L-1393"><a href="#L-1393"><span class="linenos">1393</span></a><span class="sd">        ----------</span>
</span><span id="L-1394"><a href="#L-1394"><span class="linenos">1394</span></a><span class="sd">        index : int</span>
</span><span id="L-1395"><a href="#L-1395"><span class="linenos">1395</span></a><span class="sd">            The index of the image to be regenerated in the list of image paths.</span>
</span><span id="L-1396"><a href="#L-1396"><span class="linenos">1396</span></a><span class="sd">        new_prompt : str</span>
</span><span id="L-1397"><a href="#L-1397"><span class="linenos">1397</span></a><span class="sd">            The new prompt to use for generating the image.</span>
</span><span id="L-1398"><a href="#L-1398"><span class="linenos">1398</span></a>
</span><span id="L-1399"><a href="#L-1399"><span class="linenos">1399</span></a><span class="sd">        Raises</span>
</span><span id="L-1400"><a href="#L-1400"><span class="linenos">1400</span></a><span class="sd">        ------</span>
</span><span id="L-1401"><a href="#L-1401"><span class="linenos">1401</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="L-1402"><a href="#L-1402"><span class="linenos">1402</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="L-1403"><a href="#L-1403"><span class="linenos">1403</span></a>
</span><span id="L-1404"><a href="#L-1404"><span class="linenos">1404</span></a><span class="sd">        Examples</span>
</span><span id="L-1405"><a href="#L-1405"><span class="linenos">1405</span></a><span class="sd">        --------</span>
</span><span id="L-1406"><a href="#L-1406"><span class="linenos">1406</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-1407"><a href="#L-1407"><span class="linenos">1407</span></a><span class="sd">        plugin.regenerate_image(1, &quot;A serene beach at sunset.&quot;)</span>
</span><span id="L-1408"><a href="#L-1408"><span class="linenos">1408</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1409"><a href="#L-1409"><span class="linenos">1409</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
</span><span id="L-1410"><a href="#L-1410"><span class="linenos">1410</span></a>        <span class="n">new_image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">_new.png&quot;</span><span class="p">)</span>
</span><span id="L-1411"><a href="#L-1411"><span class="linenos">1411</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generate_image</span><span class="p">(</span><span class="n">new_prompt</span><span class="p">,</span> <span class="n">new_image_path</span><span class="p">)</span>
</span><span id="L-1412"><a href="#L-1412"><span class="linenos">1412</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_image_path</span>
</span><span id="L-1413"><a href="#L-1413"><span class="linenos">1413</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">prompts</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_prompt</span>
</span><span id="L-1414"><a href="#L-1414"><span class="linenos">1414</span></a>
</span><span id="L-1415"><a href="#L-1415"><span class="linenos">1415</span></a>    <span class="k">def</span> <span class="nf">replace_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">uploaded_file</span><span class="p">):</span>
</span><span id="L-1416"><a href="#L-1416"><span class="linenos">1416</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1417"><a href="#L-1417"><span class="linenos">1417</span></a><span class="sd">        Replaces an existing image with a new one uploaded by the user.</span>
</span><span id="L-1418"><a href="#L-1418"><span class="linenos">1418</span></a>
</span><span id="L-1419"><a href="#L-1419"><span class="linenos">1419</span></a><span class="sd">        This method resizes the uploaded image to match the aspect ratio</span>
</span><span id="L-1420"><a href="#L-1420"><span class="linenos">1420</span></a><span class="sd">        of 16:9, converts it to RGB, and saves it as a PNG file.</span>
</span><span id="L-1421"><a href="#L-1421"><span class="linenos">1421</span></a>
</span><span id="L-1422"><a href="#L-1422"><span class="linenos">1422</span></a><span class="sd">        Parameters</span>
</span><span id="L-1423"><a href="#L-1423"><span class="linenos">1423</span></a><span class="sd">        ----------</span>
</span><span id="L-1424"><a href="#L-1424"><span class="linenos">1424</span></a><span class="sd">        index : int</span>
</span><span id="L-1425"><a href="#L-1425"><span class="linenos">1425</span></a><span class="sd">            The index of the image to be replaced in the list of image paths.</span>
</span><span id="L-1426"><a href="#L-1426"><span class="linenos">1426</span></a><span class="sd">        uploaded_file : UploadedFile</span>
</span><span id="L-1427"><a href="#L-1427"><span class="linenos">1427</span></a><span class="sd">            The new image file uploaded by the user.</span>
</span><span id="L-1428"><a href="#L-1428"><span class="linenos">1428</span></a>
</span><span id="L-1429"><a href="#L-1429"><span class="linenos">1429</span></a><span class="sd">        Raises</span>
</span><span id="L-1430"><a href="#L-1430"><span class="linenos">1430</span></a><span class="sd">        ------</span>
</span><span id="L-1431"><a href="#L-1431"><span class="linenos">1431</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="L-1432"><a href="#L-1432"><span class="linenos">1432</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="L-1433"><a href="#L-1433"><span class="linenos">1433</span></a>
</span><span id="L-1434"><a href="#L-1434"><span class="linenos">1434</span></a><span class="sd">        Examples</span>
</span><span id="L-1435"><a href="#L-1435"><span class="linenos">1435</span></a><span class="sd">        --------</span>
</span><span id="L-1436"><a href="#L-1436"><span class="linenos">1436</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-1437"><a href="#L-1437"><span class="linenos">1437</span></a><span class="sd">        plugin.replace_image(2, uploaded_file)</span>
</span><span id="L-1438"><a href="#L-1438"><span class="linenos">1438</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1439"><a href="#L-1439"><span class="linenos">1439</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">uploaded_file</span><span class="p">)</span>
</span><span id="L-1440"><a href="#L-1440"><span class="linenos">1440</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;RGB&quot;</span><span class="p">)</span>
</span><span id="L-1441"><a href="#L-1441"><span class="linenos">1441</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">1280</span><span class="p">,</span> <span class="mi">720</span><span class="p">),</span> <span class="n">Image</span><span class="o">.</span><span class="n">LANCZOS</span><span class="p">)</span>  <span class="c1"># Resize to 16:9 aspect ratio</span>
</span><span id="L-1442"><a href="#L-1442"><span class="linenos">1442</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
</span><span id="L-1443"><a href="#L-1443"><span class="linenos">1443</span></a>        <span class="n">new_image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">_uploaded.png&quot;</span><span class="p">)</span>
</span><span id="L-1444"><a href="#L-1444"><span class="linenos">1444</span></a>        <span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">new_image_path</span><span class="p">)</span>
</span><span id="L-1445"><a href="#L-1445"><span class="linenos">1445</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_image_path</span>
</span><span id="L-1446"><a href="#L-1446"><span class="linenos">1446</span></a>
</span><span id="L-1447"><a href="#L-1447"><span class="linenos">1447</span></a>    <span class="k">def</span> <span class="nf">assemble_final_video</span><span class="p">(</span>
</span><span id="L-1448"><a href="#L-1448"><span class="linenos">1448</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">use_zoom_and_transitions</span><span class="p">,</span> <span class="n">audio_paths</span><span class="p">,</span> <span class="n">image_paths</span><span class="p">,</span> <span class="n">output_path</span>
</span><span id="L-1449"><a href="#L-1449"><span class="linenos">1449</span></a>    <span class="p">):</span>
</span><span id="L-1450"><a href="#L-1450"><span class="linenos">1450</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1451"><a href="#L-1451"><span class="linenos">1451</span></a><span class="sd">        Assembles the final video from the generated audio and image files.</span>
</span><span id="L-1452"><a href="#L-1452"><span class="linenos">1452</span></a>
</span><span id="L-1453"><a href="#L-1453"><span class="linenos">1453</span></a><span class="sd">        This method combines the audio and image files into a video, optionally</span>
</span><span id="L-1454"><a href="#L-1454"><span class="linenos">1454</span></a><span class="sd">        adding zoom and transition effects.</span>
</span><span id="L-1455"><a href="#L-1455"><span class="linenos">1455</span></a>
</span><span id="L-1456"><a href="#L-1456"><span class="linenos">1456</span></a><span class="sd">        Parameters</span>
</span><span id="L-1457"><a href="#L-1457"><span class="linenos">1457</span></a><span class="sd">        ----------</span>
</span><span id="L-1458"><a href="#L-1458"><span class="linenos">1458</span></a><span class="sd">        config : dict</span>
</span><span id="L-1459"><a href="#L-1459"><span class="linenos">1459</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="L-1460"><a href="#L-1460"><span class="linenos">1460</span></a><span class="sd">            the plugin, such as zoom factor, speed factor, etc.</span>
</span><span id="L-1461"><a href="#L-1461"><span class="linenos">1461</span></a><span class="sd">        use_zoom_and_transitions : bool</span>
</span><span id="L-1462"><a href="#L-1462"><span class="linenos">1462</span></a><span class="sd">            Whether to apply zoom and transition effects to the video.</span>
</span><span id="L-1463"><a href="#L-1463"><span class="linenos">1463</span></a><span class="sd">        audio_paths : list of str</span>
</span><span id="L-1464"><a href="#L-1464"><span class="linenos">1464</span></a><span class="sd">            A list of file paths to the generated audio files.</span>
</span><span id="L-1465"><a href="#L-1465"><span class="linenos">1465</span></a><span class="sd">        image_paths : list of str</span>
</span><span id="L-1466"><a href="#L-1466"><span class="linenos">1466</span></a><span class="sd">            A list of file paths to the generated image files.</span>
</span><span id="L-1467"><a href="#L-1467"><span class="linenos">1467</span></a><span class="sd">        output_path : str</span>
</span><span id="L-1468"><a href="#L-1468"><span class="linenos">1468</span></a><span class="sd">            The file path where the final video will be saved.</span>
</span><span id="L-1469"><a href="#L-1469"><span class="linenos">1469</span></a>
</span><span id="L-1470"><a href="#L-1470"><span class="linenos">1470</span></a><span class="sd">        Raises</span>
</span><span id="L-1471"><a href="#L-1471"><span class="linenos">1471</span></a><span class="sd">        ------</span>
</span><span id="L-1472"><a href="#L-1472"><span class="linenos">1472</span></a><span class="sd">        ValueError</span>
</span><span id="L-1473"><a href="#L-1473"><span class="linenos">1473</span></a><span class="sd">            If the number of audio files does not match the number of image files.</span>
</span><span id="L-1474"><a href="#L-1474"><span class="linenos">1474</span></a>
</span><span id="L-1475"><a href="#L-1475"><span class="linenos">1475</span></a><span class="sd">        Examples</span>
</span><span id="L-1476"><a href="#L-1476"><span class="linenos">1476</span></a><span class="sd">        --------</span>
</span><span id="L-1477"><a href="#L-1477"><span class="linenos">1477</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="L-1478"><a href="#L-1478"><span class="linenos">1478</span></a><span class="sd">        config = plugin.get_config_fields()</span>
</span><span id="L-1479"><a href="#L-1479"><span class="linenos">1479</span></a><span class="sd">        plugin.assemble_final_video(config, True, audio_paths, image_paths, &quot;~/output/final_video.mp4&quot;)</span>
</span><span id="L-1480"><a href="#L-1480"><span class="linenos">1480</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1481"><a href="#L-1481"><span class="linenos">1481</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;creating_video&quot;</span><span class="p">)):</span>
</span><span id="L-1482"><a href="#L-1482"><span class="linenos">1482</span></a>            <span class="n">video_clips</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1483"><a href="#L-1483"><span class="linenos">1483</span></a>            <span class="k">for</span> <span class="n">audio_path</span><span class="p">,</span> <span class="n">image_path</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">audio_paths</span><span class="p">,</span> <span class="n">image_paths</span><span class="p">):</span>
</span><span id="L-1484"><a href="#L-1484"><span class="linenos">1484</span></a>                <span class="n">audio_clip</span> <span class="o">=</span> <span class="n">AudioFileClip</span><span class="p">(</span><span class="n">audio_path</span><span class="p">)</span>
</span><span id="L-1485"><a href="#L-1485"><span class="linenos">1485</span></a>                <span class="n">image_clip</span> <span class="o">=</span> <span class="n">ImageClip</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span><span class="o">.</span><span class="n">set_duration</span><span class="p">(</span><span class="n">audio_clip</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
</span><span id="L-1486"><a href="#L-1486"><span class="linenos">1486</span></a>
</span><span id="L-1487"><a href="#L-1487"><span class="linenos">1487</span></a>                <span class="k">if</span> <span class="n">use_zoom_and_transitions</span><span class="p">:</span>
</span><span id="L-1488"><a href="#L-1488"><span class="linenos">1488</span></a>                    <span class="n">zoom_factor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;zoom_factor&quot;</span><span class="p">])</span>
</span><span id="L-1489"><a href="#L-1489"><span class="linenos">1489</span></a>                    <span class="n">speed_factor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;speed_factor&quot;</span><span class="p">])</span>
</span><span id="L-1490"><a href="#L-1490"><span class="linenos">1490</span></a>
</span><span id="L-1491"><a href="#L-1491"><span class="linenos">1491</span></a>                    <span class="c1"># zoomed_clip = image_clip.resize(lambda t: 1 + zoom_factor * t) # simple zoom</span>
</span><span id="L-1492"><a href="#L-1492"><span class="linenos">1492</span></a>                    <span class="c1">#########</span>
</span><span id="L-1493"><a href="#L-1493"><span class="linenos">1493</span></a>                    <span class="k">def</span> <span class="nf">dynamic_zoom</span><span class="p">(</span><span class="n">get_frame</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
</span><span id="L-1494"><a href="#L-1494"><span class="linenos">1494</span></a>                        <span class="c1"># Create a smooth, periodic motion for zoom</span>
</span><span id="L-1495"><a href="#L-1495"><span class="linenos">1495</span></a>                        <span class="n">zoom</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">zoom_factor</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">10</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="L-1496"><a href="#L-1496"><span class="linenos">1496</span></a>
</span><span id="L-1497"><a href="#L-1497"><span class="linenos">1497</span></a>                        <span class="c1"># Generate wandering motion</span>
</span><span id="L-1498"><a href="#L-1498"><span class="linenos">1498</span></a>                        <span class="n">x_shift</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="mf">3.0</span><span class="p">)</span> <span class="o">*</span> <span class="n">speed_factor</span>
</span><span id="L-1499"><a href="#L-1499"><span class="linenos">1499</span></a>                        <span class="n">y_shift</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="mf">2.4</span><span class="p">)</span> <span class="o">*</span> <span class="n">speed_factor</span>
</span><span id="L-1500"><a href="#L-1500"><span class="linenos">1500</span></a>
</span><span id="L-1501"><a href="#L-1501"><span class="linenos">1501</span></a>                        <span class="c1"># Create the transformation matrix</span>
</span><span id="L-1502"><a href="#L-1502"><span class="linenos">1502</span></a>                        <span class="n">center_x</span><span class="p">,</span> <span class="n">center_y</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">x_shift</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">y_shift</span>
</span><span id="L-1503"><a href="#L-1503"><span class="linenos">1503</span></a>                        <span class="n">matrix</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getRotationMatrix2D</span><span class="p">(</span>
</span><span id="L-1504"><a href="#L-1504"><span class="linenos">1504</span></a>                            <span class="p">(</span><span class="n">center_x</span> <span class="o">*</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">w</span><span class="p">,</span> <span class="n">center_y</span> <span class="o">*</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">h</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">zoom</span>
</span><span id="L-1505"><a href="#L-1505"><span class="linenos">1505</span></a>                        <span class="p">)</span>
</span><span id="L-1506"><a href="#L-1506"><span class="linenos">1506</span></a>                        <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">-</span> <span class="n">center_x</span><span class="p">)</span> <span class="o">*</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">w</span>
</span><span id="L-1507"><a href="#L-1507"><span class="linenos">1507</span></a>                        <span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">-</span> <span class="n">center_y</span><span class="p">)</span> <span class="o">*</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">h</span>
</span><span id="L-1508"><a href="#L-1508"><span class="linenos">1508</span></a>
</span><span id="L-1509"><a href="#L-1509"><span class="linenos">1509</span></a>                        <span class="n">frame</span> <span class="o">=</span> <span class="n">get_frame</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="L-1510"><a href="#L-1510"><span class="linenos">1510</span></a>                        <span class="k">return</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpAffine</span><span class="p">(</span>
</span><span id="L-1511"><a href="#L-1511"><span class="linenos">1511</span></a>                            <span class="n">frame</span><span class="p">,</span>
</span><span id="L-1512"><a href="#L-1512"><span class="linenos">1512</span></a>                            <span class="n">matrix</span><span class="p">,</span>
</span><span id="L-1513"><a href="#L-1513"><span class="linenos">1513</span></a>                            <span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">frame</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="L-1514"><a href="#L-1514"><span class="linenos">1514</span></a>                            <span class="n">borderMode</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">BORDER_REFLECT_101</span><span class="p">,</span>
</span><span id="L-1515"><a href="#L-1515"><span class="linenos">1515</span></a>                        <span class="p">)</span>
</span><span id="L-1516"><a href="#L-1516"><span class="linenos">1516</span></a>
</span><span id="L-1517"><a href="#L-1517"><span class="linenos">1517</span></a>                    <span class="n">zoomed_clip</span> <span class="o">=</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">fl</span><span class="p">(</span><span class="n">dynamic_zoom</span><span class="p">)</span>
</span><span id="L-1518"><a href="#L-1518"><span class="linenos">1518</span></a>                    <span class="c1">#########</span>
</span><span id="L-1519"><a href="#L-1519"><span class="linenos">1519</span></a>                    <span class="n">video_clip</span> <span class="o">=</span> <span class="n">zoomed_clip</span><span class="o">.</span><span class="n">set_audio</span><span class="p">(</span><span class="n">audio_clip</span><span class="p">)</span>
</span><span id="L-1520"><a href="#L-1520"><span class="linenos">1520</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-1521"><a href="#L-1521"><span class="linenos">1521</span></a>                    <span class="n">video_clip</span> <span class="o">=</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">set_audio</span><span class="p">(</span><span class="n">audio_clip</span><span class="p">)</span>
</span><span id="L-1522"><a href="#L-1522"><span class="linenos">1522</span></a>
</span><span id="L-1523"><a href="#L-1523"><span class="linenos">1523</span></a>                <span class="n">video_clips</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">video_clip</span><span class="p">)</span>
</span><span id="L-1524"><a href="#L-1524"><span class="linenos">1524</span></a>
</span><span id="L-1525"><a href="#L-1525"><span class="linenos">1525</span></a>            <span class="k">if</span> <span class="n">use_zoom_and_transitions</span><span class="p">:</span>
</span><span id="L-1526"><a href="#L-1526"><span class="linenos">1526</span></a>                <span class="n">final_clips</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-1527"><a href="#L-1527"><span class="linenos">1527</span></a>                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">clip</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">video_clips</span><span class="p">):</span>
</span><span id="L-1528"><a href="#L-1528"><span class="linenos">1528</span></a>                    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-1529"><a href="#L-1529"><span class="linenos">1529</span></a>                        <span class="n">final_clips</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CompositeVideoClip</span><span class="p">([</span><span class="n">clip</span><span class="o">.</span><span class="n">crossfadein</span><span class="p">(</span><span class="mi">1</span><span class="p">)]))</span>
</span><span id="L-1530"><a href="#L-1530"><span class="linenos">1530</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-1531"><a href="#L-1531"><span class="linenos">1531</span></a>                        <span class="n">final_clips</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clip</span><span class="p">)</span>
</span><span id="L-1532"><a href="#L-1532"><span class="linenos">1532</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-1533"><a href="#L-1533"><span class="linenos">1533</span></a>                <span class="n">final_clips</span> <span class="o">=</span> <span class="n">video_clips</span>
</span><span id="L-1534"><a href="#L-1534"><span class="linenos">1534</span></a>
</span><span id="L-1535"><a href="#L-1535"><span class="linenos">1535</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Concatenating video&quot;</span><span class="p">)</span>
</span><span id="L-1536"><a href="#L-1536"><span class="linenos">1536</span></a>            <span class="n">final_video</span> <span class="o">=</span> <span class="n">concatenate_videoclips</span><span class="p">(</span><span class="n">final_clips</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;compose&quot;</span><span class="p">)</span>
</span><span id="L-1537"><a href="#L-1537"><span class="linenos">1537</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Writing final video to file&quot;</span><span class="p">)</span>
</span><span id="L-1538"><a href="#L-1538"><span class="linenos">1538</span></a>
</span><span id="L-1539"><a href="#L-1539"><span class="linenos">1539</span></a>            <span class="c1"># Create a progress container</span>
</span><span id="L-1540"><a href="#L-1540"><span class="linenos">1540</span></a>            <span class="n">progress_container</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>
</span><span id="L-1541"><a href="#L-1541"><span class="linenos">1541</span></a>
</span><span id="L-1542"><a href="#L-1542"><span class="linenos">1542</span></a>            <span class="c1"># Create a custom logger</span>
</span><span id="L-1543"><a href="#L-1543"><span class="linenos">1543</span></a>            <span class="n">logger</span> <span class="o">=</span> <span class="n">StreamlitProgressBarLogger</span><span class="p">(</span><span class="n">progress_container</span><span class="p">)</span>
</span><span id="L-1544"><a href="#L-1544"><span class="linenos">1544</span></a>
</span><span id="L-1545"><a href="#L-1545"><span class="linenos">1545</span></a>            <span class="c1"># Write the video file with the custom logger</span>
</span><span id="L-1546"><a href="#L-1546"><span class="linenos">1546</span></a>            <span class="n">final_video</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span>
</span><span id="L-1547"><a href="#L-1547"><span class="linenos">1547</span></a>                <span class="n">output_path</span><span class="p">,</span>
</span><span id="L-1548"><a href="#L-1548"><span class="linenos">1548</span></a>                <span class="n">codec</span><span class="o">=</span><span class="s2">&quot;libx264&quot;</span><span class="p">,</span>
</span><span id="L-1549"><a href="#L-1549"><span class="linenos">1549</span></a>                <span class="n">audio_codec</span><span class="o">=</span><span class="s2">&quot;aac&quot;</span><span class="p">,</span>
</span><span id="L-1550"><a href="#L-1550"><span class="linenos">1550</span></a>                <span class="n">fps</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span>
</span><span id="L-1551"><a href="#L-1551"><span class="linenos">1551</span></a>                <span class="c1"># logger=logger</span>
</span><span id="L-1552"><a href="#L-1552"><span class="linenos">1552</span></a>            <span class="p">)</span>
</span><span id="L-1553"><a href="#L-1553"><span class="linenos">1553</span></a>
</span><span id="L-1554"><a href="#L-1554"><span class="linenos">1554</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;video_generated&quot;</span><span class="p">))</span>
</span><span id="L-1555"><a href="#L-1555"><span class="linenos">1555</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">video</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
</span><span id="L-1556"><a href="#L-1556"><span class="linenos">1556</span></a>
</span><span id="L-1557"><a href="#L-1557"><span class="linenos">1557</span></a>
</span><span id="L-1558"><a href="#L-1558"><span class="linenos">1558</span></a><span class="kn">from</span> <span class="nn">proglog</span> <span class="kn">import</span> <span class="n">ProgressBarLogger</span>
</span><span id="L-1559"><a href="#L-1559"><span class="linenos">1559</span></a>
</span><span id="L-1560"><a href="#L-1560"><span class="linenos">1560</span></a>
</span><span id="L-1561"><a href="#L-1561"><span class="linenos">1561</span></a><span class="k">class</span> <span class="nc">StreamlitProgressBarLogger</span><span class="p">(</span><span class="n">ProgressBarLogger</span><span class="p">):</span>
</span><span id="L-1562"><a href="#L-1562"><span class="linenos">1562</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1563"><a href="#L-1563"><span class="linenos">1563</span></a><span class="sd">    A custom logger for displaying progress in Streamlit during video rendering.</span>
</span><span id="L-1564"><a href="#L-1564"><span class="linenos">1564</span></a>
</span><span id="L-1565"><a href="#L-1565"><span class="linenos">1565</span></a><span class="sd">    This class extends the `ProgressBarLogger` to update a Streamlit progress bar</span>
</span><span id="L-1566"><a href="#L-1566"><span class="linenos">1566</span></a><span class="sd">    container in real-time as the video rendering progresses.</span>
</span><span id="L-1567"><a href="#L-1567"><span class="linenos">1567</span></a>
</span><span id="L-1568"><a href="#L-1568"><span class="linenos">1568</span></a><span class="sd">    Parameters</span>
</span><span id="L-1569"><a href="#L-1569"><span class="linenos">1569</span></a><span class="sd">    ----------</span>
</span><span id="L-1570"><a href="#L-1570"><span class="linenos">1570</span></a><span class="sd">    progress_container : Streamlit</span>
</span><span id="L-1571"><a href="#L-1571"><span class="linenos">1571</span></a><span class="sd">        A Streamlit container object used to display the progress bar.</span>
</span><span id="L-1572"><a href="#L-1572"><span class="linenos">1572</span></a>
</span><span id="L-1573"><a href="#L-1573"><span class="linenos">1573</span></a><span class="sd">    Methods</span>
</span><span id="L-1574"><a href="#L-1574"><span class="linenos">1574</span></a><span class="sd">    -------</span>
</span><span id="L-1575"><a href="#L-1575"><span class="linenos">1575</span></a><span class="sd">    callback(**changes)</span>
</span><span id="L-1576"><a href="#L-1576"><span class="linenos">1576</span></a><span class="sd">        Updates the progress bar based on the current progress index and total tasks.</span>
</span><span id="L-1577"><a href="#L-1577"><span class="linenos">1577</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1578"><a href="#L-1578"><span class="linenos">1578</span></a>
</span><span id="L-1579"><a href="#L-1579"><span class="linenos">1579</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress_container</span><span class="p">):</span>
</span><span id="L-1580"><a href="#L-1580"><span class="linenos">1580</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1581"><a href="#L-1581"><span class="linenos">1581</span></a><span class="sd">        Initializes the StreamlitProgressBarLogger with a progress container.</span>
</span><span id="L-1582"><a href="#L-1582"><span class="linenos">1582</span></a>
</span><span id="L-1583"><a href="#L-1583"><span class="linenos">1583</span></a><span class="sd">        Parameters</span>
</span><span id="L-1584"><a href="#L-1584"><span class="linenos">1584</span></a><span class="sd">        ----------</span>
</span><span id="L-1585"><a href="#L-1585"><span class="linenos">1585</span></a><span class="sd">        progress_container : Streamlit</span>
</span><span id="L-1586"><a href="#L-1586"><span class="linenos">1586</span></a><span class="sd">            A Streamlit container object used to display the progress bar.</span>
</span><span id="L-1587"><a href="#L-1587"><span class="linenos">1587</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1588"><a href="#L-1588"><span class="linenos">1588</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-1589"><a href="#L-1589"><span class="linenos">1589</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">progress_container</span> <span class="o">=</span> <span class="n">progress_container</span>
</span><span id="L-1590"><a href="#L-1590"><span class="linenos">1590</span></a>
</span><span id="L-1591"><a href="#L-1591"><span class="linenos">1591</span></a>    <span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">changes</span><span class="p">):</span>
</span><span id="L-1592"><a href="#L-1592"><span class="linenos">1592</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1593"><a href="#L-1593"><span class="linenos">1593</span></a><span class="sd">        Updates the progress bar based on the current progress index and total tasks.</span>
</span><span id="L-1594"><a href="#L-1594"><span class="linenos">1594</span></a>
</span><span id="L-1595"><a href="#L-1595"><span class="linenos">1595</span></a><span class="sd">        Parameters</span>
</span><span id="L-1596"><a href="#L-1596"><span class="linenos">1596</span></a><span class="sd">        ----------</span>
</span><span id="L-1597"><a href="#L-1597"><span class="linenos">1597</span></a><span class="sd">        **changes : dict</span>
</span><span id="L-1598"><a href="#L-1598"><span class="linenos">1598</span></a><span class="sd">            Keyword arguments containing the current progress index and total tasks.</span>
</span><span id="L-1599"><a href="#L-1599"><span class="linenos">1599</span></a>
</span><span id="L-1600"><a href="#L-1600"><span class="linenos">1600</span></a><span class="sd">        Raises</span>
</span><span id="L-1601"><a href="#L-1601"><span class="linenos">1601</span></a><span class="sd">        ------</span>
</span><span id="L-1602"><a href="#L-1602"><span class="linenos">1602</span></a><span class="sd">        KeyError</span>
</span><span id="L-1603"><a href="#L-1603"><span class="linenos">1603</span></a><span class="sd">            If &#39;index&#39; or &#39;total&#39; keys are missing from the changes dictionary.</span>
</span><span id="L-1604"><a href="#L-1604"><span class="linenos">1604</span></a>
</span><span id="L-1605"><a href="#L-1605"><span class="linenos">1605</span></a><span class="sd">        Examples</span>
</span><span id="L-1606"><a href="#L-1606"><span class="linenos">1606</span></a><span class="sd">        --------</span>
</span><span id="L-1607"><a href="#L-1607"><span class="linenos">1607</span></a><span class="sd">        progress_container = st.empty()</span>
</span><span id="L-1608"><a href="#L-1608"><span class="linenos">1608</span></a><span class="sd">        logger = StreamlitProgressBarLogger(progress_container)</span>
</span><span id="L-1609"><a href="#L-1609"><span class="linenos">1609</span></a><span class="sd">        logger.callback(index=1, total=10)</span>
</span><span id="L-1610"><a href="#L-1610"><span class="linenos">1610</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1611"><a href="#L-1611"><span class="linenos">1611</span></a>        <span class="k">if</span> <span class="s2">&quot;index&quot;</span> <span class="ow">in</span> <span class="n">changes</span> <span class="ow">and</span> <span class="s2">&quot;total&quot;</span> <span class="ow">in</span> <span class="n">changes</span><span class="p">:</span>
</span><span id="L-1612"><a href="#L-1612"><span class="linenos">1612</span></a>            <span class="n">progress</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">changes</span><span class="p">[</span><span class="s2">&quot;index&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">changes</span><span class="p">[</span><span class="s2">&quot;total&quot;</span><span class="p">],</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span id="L-1613"><a href="#L-1613"><span class="linenos">1613</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">progress_container</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="n">progress</span><span class="p">)</span>
</span></pre></div>


            </section>
                <section id="ArticletovideoPlugin">
                            <input id="ArticletovideoPlugin-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ArticletovideoPlugin</span><wbr>(<span class="base">app.Plugin</span>):

                <label class="view-source-button" for="ArticletovideoPlugin-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin-135"><a href="#ArticletovideoPlugin-135"><span class="linenos"> 135</span></a><span class="k">class</span> <span class="nc">ArticletovideoPlugin</span><span class="p">(</span><span class="n">Plugin</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-136"><a href="#ArticletovideoPlugin-136"><span class="linenos"> 136</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-137"><a href="#ArticletovideoPlugin-137"><span class="linenos"> 137</span></a><span class="sd">    A plugin that converts articles to videos, including translation,</span>
</span><span id="ArticletovideoPlugin-138"><a href="#ArticletovideoPlugin-138"><span class="linenos"> 138</span></a><span class="sd">    text-to-speech (TTS), and image generation. The plugin supports both</span>
</span><span id="ArticletovideoPlugin-139"><a href="#ArticletovideoPlugin-139"><span class="linenos"> 139</span></a><span class="sd">    detailed step-by-step processing and one-click video generation.</span>
</span><span id="ArticletovideoPlugin-140"><a href="#ArticletovideoPlugin-140"><span class="linenos"> 140</span></a>
</span><span id="ArticletovideoPlugin-141"><a href="#ArticletovideoPlugin-141"><span class="linenos"> 141</span></a><span class="sd">    Parameters</span>
</span><span id="ArticletovideoPlugin-142"><a href="#ArticletovideoPlugin-142"><span class="linenos"> 142</span></a><span class="sd">    ----------</span>
</span><span id="ArticletovideoPlugin-143"><a href="#ArticletovideoPlugin-143"><span class="linenos"> 143</span></a><span class="sd">    name : str</span>
</span><span id="ArticletovideoPlugin-144"><a href="#ArticletovideoPlugin-144"><span class="linenos"> 144</span></a><span class="sd">        The name of the plugin.</span>
</span><span id="ArticletovideoPlugin-145"><a href="#ArticletovideoPlugin-145"><span class="linenos"> 145</span></a><span class="sd">    plugin_manager : PluginManager</span>
</span><span id="ArticletovideoPlugin-146"><a href="#ArticletovideoPlugin-146"><span class="linenos"> 146</span></a><span class="sd">        The plugin manager that handles plugin lifecycle and dependencies.</span>
</span><span id="ArticletovideoPlugin-147"><a href="#ArticletovideoPlugin-147"><span class="linenos"> 147</span></a>
</span><span id="ArticletovideoPlugin-148"><a href="#ArticletovideoPlugin-148"><span class="linenos"> 148</span></a><span class="sd">    Attributes</span>
</span><span id="ArticletovideoPlugin-149"><a href="#ArticletovideoPlugin-149"><span class="linenos"> 149</span></a><span class="sd">    ----------</span>
</span><span id="ArticletovideoPlugin-150"><a href="#ArticletovideoPlugin-150"><span class="linenos"> 150</span></a><span class="sd">    translator : MarianMTModel or None</span>
</span><span id="ArticletovideoPlugin-151"><a href="#ArticletovideoPlugin-151"><span class="linenos"> 151</span></a><span class="sd">        The machine translation model used to translate article text.</span>
</span><span id="ArticletovideoPlugin-152"><a href="#ArticletovideoPlugin-152"><span class="linenos"> 152</span></a><span class="sd">    tts_model : TTS or None</span>
</span><span id="ArticletovideoPlugin-153"><a href="#ArticletovideoPlugin-153"><span class="linenos"> 153</span></a><span class="sd">        The text-to-speech model used to generate audio from text.</span>
</span><span id="ArticletovideoPlugin-154"><a href="#ArticletovideoPlugin-154"><span class="linenos"> 154</span></a><span class="sd">    imggen_plugin : ImggenPlugin</span>
</span><span id="ArticletovideoPlugin-155"><a href="#ArticletovideoPlugin-155"><span class="linenos"> 155</span></a><span class="sd">        An instance of `ImggenPlugin` for generating images.</span>
</span><span id="ArticletovideoPlugin-156"><a href="#ArticletovideoPlugin-156"><span class="linenos"> 156</span></a><span class="sd">    ragllm_plugin : RagllmPlugin</span>
</span><span id="ArticletovideoPlugin-157"><a href="#ArticletovideoPlugin-157"><span class="linenos"> 157</span></a><span class="sd">        An instance of `RagllmPlugin` for calling LLM (Language Models) for prompts.</span>
</span><span id="ArticletovideoPlugin-158"><a href="#ArticletovideoPlugin-158"><span class="linenos"> 158</span></a>
</span><span id="ArticletovideoPlugin-159"><a href="#ArticletovideoPlugin-159"><span class="linenos"> 159</span></a><span class="sd">    Methods</span>
</span><span id="ArticletovideoPlugin-160"><a href="#ArticletovideoPlugin-160"><span class="linenos"> 160</span></a><span class="sd">    -------</span>
</span><span id="ArticletovideoPlugin-161"><a href="#ArticletovideoPlugin-161"><span class="linenos"> 161</span></a><span class="sd">    get_config_fields()</span>
</span><span id="ArticletovideoPlugin-162"><a href="#ArticletovideoPlugin-162"><span class="linenos"> 162</span></a><span class="sd">        Returns a dictionary defining the configurable fields for the plugin.</span>
</span><span id="ArticletovideoPlugin-163"><a href="#ArticletovideoPlugin-163"><span class="linenos"> 163</span></a>
</span><span id="ArticletovideoPlugin-164"><a href="#ArticletovideoPlugin-164"><span class="linenos"> 164</span></a><span class="sd">    get_tabs()</span>
</span><span id="ArticletovideoPlugin-165"><a href="#ArticletovideoPlugin-165"><span class="linenos"> 165</span></a><span class="sd">        Returns the tabs for the plugin interface.</span>
</span><span id="ArticletovideoPlugin-166"><a href="#ArticletovideoPlugin-166"><span class="linenos"> 166</span></a>
</span><span id="ArticletovideoPlugin-167"><a href="#ArticletovideoPlugin-167"><span class="linenos"> 167</span></a><span class="sd">    run(config)</span>
</span><span id="ArticletovideoPlugin-168"><a href="#ArticletovideoPlugin-168"><span class="linenos"> 168</span></a><span class="sd">        Main entry point for running the plugin within the Streamlit interface.</span>
</span><span id="ArticletovideoPlugin-169"><a href="#ArticletovideoPlugin-169"><span class="linenos"> 169</span></a>
</span><span id="ArticletovideoPlugin-170"><a href="#ArticletovideoPlugin-170"><span class="linenos"> 170</span></a><span class="sd">    generate_video_one_click(url, config)</span>
</span><span id="ArticletovideoPlugin-171"><a href="#ArticletovideoPlugin-171"><span class="linenos"> 171</span></a><span class="sd">        Generates a video from an article URL using one-click mode.</span>
</span><span id="ArticletovideoPlugin-172"><a href="#ArticletovideoPlugin-172"><span class="linenos"> 172</span></a>
</span><span id="ArticletovideoPlugin-173"><a href="#ArticletovideoPlugin-173"><span class="linenos"> 173</span></a><span class="sd">    scan_files(config)</span>
</span><span id="ArticletovideoPlugin-174"><a href="#ArticletovideoPlugin-174"><span class="linenos"> 174</span></a><span class="sd">        Scans the output directory for generated audio and image files.</span>
</span><span id="ArticletovideoPlugin-175"><a href="#ArticletovideoPlugin-175"><span class="linenos"> 175</span></a>
</span><span id="ArticletovideoPlugin-176"><a href="#ArticletovideoPlugin-176"><span class="linenos"> 176</span></a><span class="sd">    assemble_final_video(config, use_zoom_and_transitions, audio_paths, image_paths, output_path)</span>
</span><span id="ArticletovideoPlugin-177"><a href="#ArticletovideoPlugin-177"><span class="linenos"> 177</span></a><span class="sd">        Assembles the final video from the generated audio and image files.</span>
</span><span id="ArticletovideoPlugin-178"><a href="#ArticletovideoPlugin-178"><span class="linenos"> 178</span></a>
</span><span id="ArticletovideoPlugin-179"><a href="#ArticletovideoPlugin-179"><span class="linenos"> 179</span></a><span class="sd">    Examples</span>
</span><span id="ArticletovideoPlugin-180"><a href="#ArticletovideoPlugin-180"><span class="linenos"> 180</span></a><span class="sd">    --------</span>
</span><span id="ArticletovideoPlugin-181"><a href="#ArticletovideoPlugin-181"><span class="linenos"> 181</span></a><span class="sd">    # Example usage within a Streamlit app:</span>
</span><span id="ArticletovideoPlugin-182"><a href="#ArticletovideoPlugin-182"><span class="linenos"> 182</span></a><span class="sd">    plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-183"><a href="#ArticletovideoPlugin-183"><span class="linenos"> 183</span></a><span class="sd">    config = plugin.get_config_fields()</span>
</span><span id="ArticletovideoPlugin-184"><a href="#ArticletovideoPlugin-184"><span class="linenos"> 184</span></a><span class="sd">    plugin.run(config)</span>
</span><span id="ArticletovideoPlugin-185"><a href="#ArticletovideoPlugin-185"><span class="linenos"> 185</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-186"><a href="#ArticletovideoPlugin-186"><span class="linenos"> 186</span></a>
</span><span id="ArticletovideoPlugin-187"><a href="#ArticletovideoPlugin-187"><span class="linenos"> 187</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-188"><a href="#ArticletovideoPlugin-188"><span class="linenos"> 188</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-189"><a href="#ArticletovideoPlugin-189"><span class="linenos"> 189</span></a><span class="sd">        Initializes the ArticletovideoPlugin with a name and plugin manager.</span>
</span><span id="ArticletovideoPlugin-190"><a href="#ArticletovideoPlugin-190"><span class="linenos"> 190</span></a>
</span><span id="ArticletovideoPlugin-191"><a href="#ArticletovideoPlugin-191"><span class="linenos"> 191</span></a><span class="sd">        This constructor sets up the plugin by initializing its name and plugin manager,</span>
</span><span id="ArticletovideoPlugin-192"><a href="#ArticletovideoPlugin-192"><span class="linenos"> 192</span></a><span class="sd">        as well as creating instances of the `ImggenPlugin` and `RagllmPlugin` for</span>
</span><span id="ArticletovideoPlugin-193"><a href="#ArticletovideoPlugin-193"><span class="linenos"> 193</span></a><span class="sd">        image generation and language model interactions, respectively.</span>
</span><span id="ArticletovideoPlugin-194"><a href="#ArticletovideoPlugin-194"><span class="linenos"> 194</span></a>
</span><span id="ArticletovideoPlugin-195"><a href="#ArticletovideoPlugin-195"><span class="linenos"> 195</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-196"><a href="#ArticletovideoPlugin-196"><span class="linenos"> 196</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-197"><a href="#ArticletovideoPlugin-197"><span class="linenos"> 197</span></a><span class="sd">        name : str</span>
</span><span id="ArticletovideoPlugin-198"><a href="#ArticletovideoPlugin-198"><span class="linenos"> 198</span></a><span class="sd">            The name of the plugin, used for identification within the application.</span>
</span><span id="ArticletovideoPlugin-199"><a href="#ArticletovideoPlugin-199"><span class="linenos"> 199</span></a><span class="sd">        plugin_manager : PluginManager</span>
</span><span id="ArticletovideoPlugin-200"><a href="#ArticletovideoPlugin-200"><span class="linenos"> 200</span></a><span class="sd">            The plugin manager responsible for managing the lifecycle and dependencies</span>
</span><span id="ArticletovideoPlugin-201"><a href="#ArticletovideoPlugin-201"><span class="linenos"> 201</span></a><span class="sd">            of the plugin within the application.</span>
</span><span id="ArticletovideoPlugin-202"><a href="#ArticletovideoPlugin-202"><span class="linenos"> 202</span></a>
</span><span id="ArticletovideoPlugin-203"><a href="#ArticletovideoPlugin-203"><span class="linenos"> 203</span></a><span class="sd">        Attributes</span>
</span><span id="ArticletovideoPlugin-204"><a href="#ArticletovideoPlugin-204"><span class="linenos"> 204</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-205"><a href="#ArticletovideoPlugin-205"><span class="linenos"> 205</span></a><span class="sd">        translator : MarianMTModel or None</span>
</span><span id="ArticletovideoPlugin-206"><a href="#ArticletovideoPlugin-206"><span class="linenos"> 206</span></a><span class="sd">            Initialized as `None`. This will hold the translation model used to translate</span>
</span><span id="ArticletovideoPlugin-207"><a href="#ArticletovideoPlugin-207"><span class="linenos"> 207</span></a><span class="sd">            article text when needed.</span>
</span><span id="ArticletovideoPlugin-208"><a href="#ArticletovideoPlugin-208"><span class="linenos"> 208</span></a><span class="sd">        tts_model : TTS or None</span>
</span><span id="ArticletovideoPlugin-209"><a href="#ArticletovideoPlugin-209"><span class="linenos"> 209</span></a><span class="sd">            Initialized as `None`. This will hold the text-to-speech (TTS) model used to</span>
</span><span id="ArticletovideoPlugin-210"><a href="#ArticletovideoPlugin-210"><span class="linenos"> 210</span></a><span class="sd">            generate audio from text.</span>
</span><span id="ArticletovideoPlugin-211"><a href="#ArticletovideoPlugin-211"><span class="linenos"> 211</span></a><span class="sd">        imggen_plugin : ImggenPlugin</span>
</span><span id="ArticletovideoPlugin-212"><a href="#ArticletovideoPlugin-212"><span class="linenos"> 212</span></a><span class="sd">            An instance of `ImggenPlugin`, used to generate images based on text prompts.</span>
</span><span id="ArticletovideoPlugin-213"><a href="#ArticletovideoPlugin-213"><span class="linenos"> 213</span></a><span class="sd">        ragllm_plugin : RagllmPlugin</span>
</span><span id="ArticletovideoPlugin-214"><a href="#ArticletovideoPlugin-214"><span class="linenos"> 214</span></a><span class="sd">            An instance of `RagllmPlugin`, used to interact with language models for</span>
</span><span id="ArticletovideoPlugin-215"><a href="#ArticletovideoPlugin-215"><span class="linenos"> 215</span></a><span class="sd">            generating text prompts and other LLM-related tasks.</span>
</span><span id="ArticletovideoPlugin-216"><a href="#ArticletovideoPlugin-216"><span class="linenos"> 216</span></a>
</span><span id="ArticletovideoPlugin-217"><a href="#ArticletovideoPlugin-217"><span class="linenos"> 217</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-218"><a href="#ArticletovideoPlugin-218"><span class="linenos"> 218</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-219"><a href="#ArticletovideoPlugin-219"><span class="linenos"> 219</span></a><span class="sd">        plugin_manager = PluginManager()</span>
</span><span id="ArticletovideoPlugin-220"><a href="#ArticletovideoPlugin-220"><span class="linenos"> 220</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-221"><a href="#ArticletovideoPlugin-221"><span class="linenos"> 221</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-222"><a href="#ArticletovideoPlugin-222"><span class="linenos"> 222</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-223"><a href="#ArticletovideoPlugin-223"><span class="linenos"> 223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">translator</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ArticletovideoPlugin-224"><a href="#ArticletovideoPlugin-224"><span class="linenos"> 224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ArticletovideoPlugin-225"><a href="#ArticletovideoPlugin-225"><span class="linenos"> 225</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imggen_plugin</span> <span class="o">=</span> <span class="n">ImggenPlugin</span><span class="p">(</span><span class="s2">&quot;imggen&quot;</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-226"><a href="#ArticletovideoPlugin-226"><span class="linenos"> 226</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ragllm_plugin</span> <span class="o">=</span> <span class="n">RagllmPlugin</span><span class="p">(</span><span class="s2">&quot;ragllm&quot;</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-227"><a href="#ArticletovideoPlugin-227"><span class="linenos"> 227</span></a>
</span><span id="ArticletovideoPlugin-228"><a href="#ArticletovideoPlugin-228"><span class="linenos"> 228</span></a>    <span class="k">def</span> <span class="nf">get_config_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-229"><a href="#ArticletovideoPlugin-229"><span class="linenos"> 229</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-230"><a href="#ArticletovideoPlugin-230"><span class="linenos"> 230</span></a><span class="sd">        Returns a dictionary defining the configurable fields for the plugin.</span>
</span><span id="ArticletovideoPlugin-231"><a href="#ArticletovideoPlugin-231"><span class="linenos"> 231</span></a>
</span><span id="ArticletovideoPlugin-232"><a href="#ArticletovideoPlugin-232"><span class="linenos"> 232</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin-233"><a href="#ArticletovideoPlugin-233"><span class="linenos"> 233</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin-234"><a href="#ArticletovideoPlugin-234"><span class="linenos"> 234</span></a><span class="sd">        dict</span>
</span><span id="ArticletovideoPlugin-235"><a href="#ArticletovideoPlugin-235"><span class="linenos"> 235</span></a><span class="sd">            A dictionary where keys are field names and values are dictionaries</span>
</span><span id="ArticletovideoPlugin-236"><a href="#ArticletovideoPlugin-236"><span class="linenos"> 236</span></a><span class="sd">            specifying field type, label, default values, and other options.</span>
</span><span id="ArticletovideoPlugin-237"><a href="#ArticletovideoPlugin-237"><span class="linenos"> 237</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-238"><a href="#ArticletovideoPlugin-238"><span class="linenos"> 238</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin-239"><a href="#ArticletovideoPlugin-239"><span class="linenos"> 239</span></a>            <span class="s2">&quot;output_dir&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin-240"><a href="#ArticletovideoPlugin-240"><span class="linenos"> 240</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-241"><a href="#ArticletovideoPlugin-241"><span class="linenos"> 241</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;output_directory&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-242"><a href="#ArticletovideoPlugin-242"><span class="linenos"> 242</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;~/Videos/ArticleToVideo&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-243"><a href="#ArticletovideoPlugin-243"><span class="linenos"> 243</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin-244"><a href="#ArticletovideoPlugin-244"><span class="linenos"> 244</span></a>            <span class="s2">&quot;target_language&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin-245"><a href="#ArticletovideoPlugin-245"><span class="linenos"> 245</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-246"><a href="#ArticletovideoPlugin-246"><span class="linenos"> 246</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;target_language&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-247"><a href="#ArticletovideoPlugin-247"><span class="linenos"> 247</span></a>                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;fr-fr&quot;</span><span class="p">,</span> <span class="s2">&quot;Français&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="s2">&quot;English&quot;</span><span class="p">)],</span>
</span><span id="ArticletovideoPlugin-248"><a href="#ArticletovideoPlugin-248"><span class="linenos"> 248</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;fr-fr&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-249"><a href="#ArticletovideoPlugin-249"><span class="linenos"> 249</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin-250"><a href="#ArticletovideoPlugin-250"><span class="linenos"> 250</span></a>            <span class="s2">&quot;tts_speaker&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin-251"><a href="#ArticletovideoPlugin-251"><span class="linenos"> 251</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-252"><a href="#ArticletovideoPlugin-252"><span class="linenos"> 252</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-253"><a href="#ArticletovideoPlugin-253"><span class="linenos"> 253</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;p326&quot;</span><span class="p">,</span>  <span class="c1"># Default speaker for YourTTS</span>
</span><span id="ArticletovideoPlugin-254"><a href="#ArticletovideoPlugin-254"><span class="linenos"> 254</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin-255"><a href="#ArticletovideoPlugin-255"><span class="linenos"> 255</span></a>            <span class="s2">&quot;split_by&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin-256"><a href="#ArticletovideoPlugin-256"><span class="linenos"> 256</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-257"><a href="#ArticletovideoPlugin-257"><span class="linenos"> 257</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;split_by&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-258"><a href="#ArticletovideoPlugin-258"><span class="linenos"> 258</span></a>                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;sentence&quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;sentence&quot;</span><span class="p">)),</span> <span class="p">(</span><span class="s2">&quot;paragraph&quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;paragraph&quot;</span><span class="p">))],</span>
</span><span id="ArticletovideoPlugin-259"><a href="#ArticletovideoPlugin-259"><span class="linenos"> 259</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;paragraph&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-260"><a href="#ArticletovideoPlugin-260"><span class="linenos"> 260</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin-261"><a href="#ArticletovideoPlugin-261"><span class="linenos"> 261</span></a>            <span class="s2">&quot;zoom_factor&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin-262"><a href="#ArticletovideoPlugin-262"><span class="linenos"> 262</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-263"><a href="#ArticletovideoPlugin-263"><span class="linenos"> 263</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;zoom_factor&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-264"><a href="#ArticletovideoPlugin-264"><span class="linenos"> 264</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-265"><a href="#ArticletovideoPlugin-265"><span class="linenos"> 265</span></a>                <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-266"><a href="#ArticletovideoPlugin-266"><span class="linenos"> 266</span></a>                <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-267"><a href="#ArticletovideoPlugin-267"><span class="linenos"> 267</span></a>                <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="mf">0.001</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-268"><a href="#ArticletovideoPlugin-268"><span class="linenos"> 268</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin-269"><a href="#ArticletovideoPlugin-269"><span class="linenos"> 269</span></a>            <span class="s2">&quot;speed_factor&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin-270"><a href="#ArticletovideoPlugin-270"><span class="linenos"> 270</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-271"><a href="#ArticletovideoPlugin-271"><span class="linenos"> 271</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;speed_factor&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-272"><a href="#ArticletovideoPlugin-272"><span class="linenos"> 272</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-273"><a href="#ArticletovideoPlugin-273"><span class="linenos"> 273</span></a>                <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-274"><a href="#ArticletovideoPlugin-274"><span class="linenos"> 274</span></a>                <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-275"><a href="#ArticletovideoPlugin-275"><span class="linenos"> 275</span></a>                <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="mf">0.001</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-276"><a href="#ArticletovideoPlugin-276"><span class="linenos"> 276</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin-277"><a href="#ArticletovideoPlugin-277"><span class="linenos"> 277</span></a>            <span class="s2">&quot;tts_model&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin-278"><a href="#ArticletovideoPlugin-278"><span class="linenos"> 278</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-279"><a href="#ArticletovideoPlugin-279"><span class="linenos"> 279</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;tts_model&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-280"><a href="#ArticletovideoPlugin-280"><span class="linenos"> 280</span></a>                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="ArticletovideoPlugin-281"><a href="#ArticletovideoPlugin-281"><span class="linenos"> 281</span></a>                    <span class="p">(</span><span class="s2">&quot;your_tts&quot;</span><span class="p">,</span> <span class="s2">&quot;YourTTS&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-282"><a href="#ArticletovideoPlugin-282"><span class="linenos"> 282</span></a>                    <span class="p">(</span><span class="s2">&quot;tacotron&quot;</span><span class="p">,</span> <span class="s2">&quot;Tacotron&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-283"><a href="#ArticletovideoPlugin-283"><span class="linenos"> 283</span></a>                    <span class="p">(</span><span class="s2">&quot;xtts_v2&quot;</span><span class="p">,</span> <span class="s2">&quot;XTTS2&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-284"><a href="#ArticletovideoPlugin-284"><span class="linenos"> 284</span></a>                    <span class="p">(</span><span class="s2">&quot;bark&quot;</span><span class="p">,</span> <span class="s2">&quot;Bark&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-285"><a href="#ArticletovideoPlugin-285"><span class="linenos"> 285</span></a>                <span class="p">],</span>
</span><span id="ArticletovideoPlugin-286"><a href="#ArticletovideoPlugin-286"><span class="linenos"> 286</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;your_tts&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-287"><a href="#ArticletovideoPlugin-287"><span class="linenos"> 287</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin-288"><a href="#ArticletovideoPlugin-288"><span class="linenos"> 288</span></a>            <span class="s2">&quot;convert_numbers&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin-289"><a href="#ArticletovideoPlugin-289"><span class="linenos"> 289</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;checkbox&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-290"><a href="#ArticletovideoPlugin-290"><span class="linenos"> 290</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;convert_numbers&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-291"><a href="#ArticletovideoPlugin-291"><span class="linenos"> 291</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-292"><a href="#ArticletovideoPlugin-292"><span class="linenos"> 292</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin-293"><a href="#ArticletovideoPlugin-293"><span class="linenos"> 293</span></a>            <span class="s2">&quot;image_sysprompt&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin-294"><a href="#ArticletovideoPlugin-294"><span class="linenos"> 294</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-295"><a href="#ArticletovideoPlugin-295"><span class="linenos"> 295</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;image_sysprompt&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-296"><a href="#ArticletovideoPlugin-296"><span class="linenos"> 296</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;You are an AI assistant tasked with creating image prompts. The prompt should be vivid and descriptive, suitable for image generation. Reply only the prompt.&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-297"><a href="#ArticletovideoPlugin-297"><span class="linenos"> 297</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin-298"><a href="#ArticletovideoPlugin-298"><span class="linenos"> 298</span></a>        <span class="p">}</span>
</span><span id="ArticletovideoPlugin-299"><a href="#ArticletovideoPlugin-299"><span class="linenos"> 299</span></a>
</span><span id="ArticletovideoPlugin-300"><a href="#ArticletovideoPlugin-300"><span class="linenos"> 300</span></a>    <span class="k">def</span> <span class="nf">get_tabs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-301"><a href="#ArticletovideoPlugin-301"><span class="linenos"> 301</span></a>        <span class="k">return</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;article_to_video&quot;</span><span class="p">),</span> <span class="s2">&quot;plugin&quot;</span><span class="p">:</span> <span class="s2">&quot;articletovideo&quot;</span><span class="p">}]</span>
</span><span id="ArticletovideoPlugin-302"><a href="#ArticletovideoPlugin-302"><span class="linenos"> 302</span></a>
</span><span id="ArticletovideoPlugin-303"><a href="#ArticletovideoPlugin-303"><span class="linenos"> 303</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-304"><a href="#ArticletovideoPlugin-304"><span class="linenos"> 304</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-305"><a href="#ArticletovideoPlugin-305"><span class="linenos"> 305</span></a><span class="sd">        Executes the main logic of the plugin within the Streamlit interface.</span>
</span><span id="ArticletovideoPlugin-306"><a href="#ArticletovideoPlugin-306"><span class="linenos"> 306</span></a>
</span><span id="ArticletovideoPlugin-307"><a href="#ArticletovideoPlugin-307"><span class="linenos"> 307</span></a><span class="sd">        This method serves as the entry point for the plugin&#39;s functionality</span>
</span><span id="ArticletovideoPlugin-308"><a href="#ArticletovideoPlugin-308"><span class="linenos"> 308</span></a><span class="sd">        when used in a Streamlit application. It displays the main interface</span>
</span><span id="ArticletovideoPlugin-309"><a href="#ArticletovideoPlugin-309"><span class="linenos"> 309</span></a><span class="sd">        for the user, allowing them to input an article URL, choose options</span>
</span><span id="ArticletovideoPlugin-310"><a href="#ArticletovideoPlugin-310"><span class="linenos"> 310</span></a><span class="sd">        for video generation, and either generate the video in one click or</span>
</span><span id="ArticletovideoPlugin-311"><a href="#ArticletovideoPlugin-311"><span class="linenos"> 311</span></a><span class="sd">        follow a detailed step-by-step process.</span>
</span><span id="ArticletovideoPlugin-312"><a href="#ArticletovideoPlugin-312"><span class="linenos"> 312</span></a>
</span><span id="ArticletovideoPlugin-313"><a href="#ArticletovideoPlugin-313"><span class="linenos"> 313</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-314"><a href="#ArticletovideoPlugin-314"><span class="linenos"> 314</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-315"><a href="#ArticletovideoPlugin-315"><span class="linenos"> 315</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin-316"><a href="#ArticletovideoPlugin-316"><span class="linenos"> 316</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin-317"><a href="#ArticletovideoPlugin-317"><span class="linenos"> 317</span></a><span class="sd">            the plugin. This includes settings like the output directory,</span>
</span><span id="ArticletovideoPlugin-318"><a href="#ArticletovideoPlugin-318"><span class="linenos"> 318</span></a><span class="sd">            target language, TTS model, zoom factor, and others.</span>
</span><span id="ArticletovideoPlugin-319"><a href="#ArticletovideoPlugin-319"><span class="linenos"> 319</span></a>
</span><span id="ArticletovideoPlugin-320"><a href="#ArticletovideoPlugin-320"><span class="linenos"> 320</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-321"><a href="#ArticletovideoPlugin-321"><span class="linenos"> 321</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-322"><a href="#ArticletovideoPlugin-322"><span class="linenos"> 322</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin-323"><a href="#ArticletovideoPlugin-323"><span class="linenos"> 323</span></a><span class="sd">            If the configuration is missing required fields or contains invalid values.</span>
</span><span id="ArticletovideoPlugin-324"><a href="#ArticletovideoPlugin-324"><span class="linenos"> 324</span></a><span class="sd">        requests.exceptions.RequestException</span>
</span><span id="ArticletovideoPlugin-325"><a href="#ArticletovideoPlugin-325"><span class="linenos"> 325</span></a><span class="sd">            If there is an issue retrieving the article from the provided URL.</span>
</span><span id="ArticletovideoPlugin-326"><a href="#ArticletovideoPlugin-326"><span class="linenos"> 326</span></a>
</span><span id="ArticletovideoPlugin-327"><a href="#ArticletovideoPlugin-327"><span class="linenos"> 327</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-328"><a href="#ArticletovideoPlugin-328"><span class="linenos"> 328</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-329"><a href="#ArticletovideoPlugin-329"><span class="linenos"> 329</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-330"><a href="#ArticletovideoPlugin-330"><span class="linenos"> 330</span></a><span class="sd">        config = plugin.get_config_fields()</span>
</span><span id="ArticletovideoPlugin-331"><a href="#ArticletovideoPlugin-331"><span class="linenos"> 331</span></a><span class="sd">        plugin.run(config)</span>
</span><span id="ArticletovideoPlugin-332"><a href="#ArticletovideoPlugin-332"><span class="linenos"> 332</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-333"><a href="#ArticletovideoPlugin-333"><span class="linenos"> 333</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;article_to_video&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-334"><a href="#ArticletovideoPlugin-334"><span class="linenos"> 334</span></a>        <span class="n">url</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_input</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;article_url&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-335"><a href="#ArticletovideoPlugin-335"><span class="linenos"> 335</span></a>
</span><span id="ArticletovideoPlugin-336"><a href="#ArticletovideoPlugin-336"><span class="linenos"> 336</span></a>        <span class="n">show_detailed_steps</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-337"><a href="#ArticletovideoPlugin-337"><span class="linenos"> 337</span></a>            <span class="n">t</span><span class="p">(</span><span class="s2">&quot;show_detailed_steps&quot;</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;show_detailed_steps_checkbox&quot;</span>
</span><span id="ArticletovideoPlugin-338"><a href="#ArticletovideoPlugin-338"><span class="linenos"> 338</span></a>        <span class="p">)</span>
</span><span id="ArticletovideoPlugin-339"><a href="#ArticletovideoPlugin-339"><span class="linenos"> 339</span></a>        <span class="k">if</span> <span class="n">show_detailed_steps</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-340"><a href="#ArticletovideoPlugin-340"><span class="linenos"> 340</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">show_detailed_interface</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-341"><a href="#ArticletovideoPlugin-341"><span class="linenos"> 341</span></a>
</span><span id="ArticletovideoPlugin-342"><a href="#ArticletovideoPlugin-342"><span class="linenos"> 342</span></a>        <span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col3</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-343"><a href="#ArticletovideoPlugin-343"><span class="linenos"> 343</span></a>
</span><span id="ArticletovideoPlugin-344"><a href="#ArticletovideoPlugin-344"><span class="linenos"> 344</span></a>        <span class="k">with</span> <span class="n">col1</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-345"><a href="#ArticletovideoPlugin-345"><span class="linenos"> 345</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generate_video_from_url&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;generate_video_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-346"><a href="#ArticletovideoPlugin-346"><span class="linenos"> 346</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_video_one_click</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-347"><a href="#ArticletovideoPlugin-347"><span class="linenos"> 347</span></a>
</span><span id="ArticletovideoPlugin-348"><a href="#ArticletovideoPlugin-348"><span class="linenos"> 348</span></a>        <span class="k">with</span> <span class="n">col2</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-349"><a href="#ArticletovideoPlugin-349"><span class="linenos"> 349</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;scan_files&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;scan_files_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-350"><a href="#ArticletovideoPlugin-350"><span class="linenos"> 350</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">scan_files</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-351"><a href="#ArticletovideoPlugin-351"><span class="linenos"> 351</span></a>
</span><span id="ArticletovideoPlugin-352"><a href="#ArticletovideoPlugin-352"><span class="linenos"> 352</span></a>        <span class="k">with</span> <span class="n">col3</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-353"><a href="#ArticletovideoPlugin-353"><span class="linenos"> 353</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;assemble_video&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;assemble_video_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-354"><a href="#ArticletovideoPlugin-354"><span class="linenos"> 354</span></a>                <span class="n">audio_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span>
</span><span id="ArticletovideoPlugin-355"><a href="#ArticletovideoPlugin-355"><span class="linenos"> 355</span></a>                <span class="n">image_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span>
</span><span id="ArticletovideoPlugin-356"><a href="#ArticletovideoPlugin-356"><span class="linenos"> 356</span></a>                <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin-357"><a href="#ArticletovideoPlugin-357"><span class="linenos"> 357</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">assemble_final_video</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-358"><a href="#ArticletovideoPlugin-358"><span class="linenos"> 358</span></a>                    <span class="n">config</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-359"><a href="#ArticletovideoPlugin-359"><span class="linenos"> 359</span></a>                    <span class="n">use_zoom_and_transitions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-360"><a href="#ArticletovideoPlugin-360"><span class="linenos"> 360</span></a>                    <span class="n">audio_paths</span><span class="o">=</span><span class="n">audio_paths</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-361"><a href="#ArticletovideoPlugin-361"><span class="linenos"> 361</span></a>                    <span class="n">image_paths</span><span class="o">=</span><span class="n">image_paths</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-362"><a href="#ArticletovideoPlugin-362"><span class="linenos"> 362</span></a>                    <span class="n">output_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="s2">&quot;final_video.mp4&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-363"><a href="#ArticletovideoPlugin-363"><span class="linenos"> 363</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin-364"><a href="#ArticletovideoPlugin-364"><span class="linenos"> 364</span></a>
</span><span id="ArticletovideoPlugin-365"><a href="#ArticletovideoPlugin-365"><span class="linenos"> 365</span></a>        <span class="n">use_zoom_and_transitions</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-366"><a href="#ArticletovideoPlugin-366"><span class="linenos"> 366</span></a>            <span class="n">t</span><span class="p">(</span><span class="s2">&quot;use_zoom_and_transitions&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-367"><a href="#ArticletovideoPlugin-367"><span class="linenos"> 367</span></a>            <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-368"><a href="#ArticletovideoPlugin-368"><span class="linenos"> 368</span></a>            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;use_zoom_transitions_checkbox&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-369"><a href="#ArticletovideoPlugin-369"><span class="linenos"> 369</span></a>        <span class="p">)</span>
</span><span id="ArticletovideoPlugin-370"><a href="#ArticletovideoPlugin-370"><span class="linenos"> 370</span></a>
</span><span id="ArticletovideoPlugin-371"><a href="#ArticletovideoPlugin-371"><span class="linenos"> 371</span></a>    <span class="k">def</span> <span class="nf">get_sorted_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-372"><a href="#ArticletovideoPlugin-372"><span class="linenos"> 372</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-373"><a href="#ArticletovideoPlugin-373"><span class="linenos"> 373</span></a><span class="sd">        Retrieves and sorts files from a directory based on a specified pattern.</span>
</span><span id="ArticletovideoPlugin-374"><a href="#ArticletovideoPlugin-374"><span class="linenos"> 374</span></a>
</span><span id="ArticletovideoPlugin-375"><a href="#ArticletovideoPlugin-375"><span class="linenos"> 375</span></a><span class="sd">        This method searches for files in the given directory that match the</span>
</span><span id="ArticletovideoPlugin-376"><a href="#ArticletovideoPlugin-376"><span class="linenos"> 376</span></a><span class="sd">        provided regular expression pattern, sorts them by a numeric index,</span>
</span><span id="ArticletovideoPlugin-377"><a href="#ArticletovideoPlugin-377"><span class="linenos"> 377</span></a><span class="sd">        and returns a list of file paths.</span>
</span><span id="ArticletovideoPlugin-378"><a href="#ArticletovideoPlugin-378"><span class="linenos"> 378</span></a>
</span><span id="ArticletovideoPlugin-379"><a href="#ArticletovideoPlugin-379"><span class="linenos"> 379</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-380"><a href="#ArticletovideoPlugin-380"><span class="linenos"> 380</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-381"><a href="#ArticletovideoPlugin-381"><span class="linenos"> 381</span></a><span class="sd">        directory : str</span>
</span><span id="ArticletovideoPlugin-382"><a href="#ArticletovideoPlugin-382"><span class="linenos"> 382</span></a><span class="sd">            The directory where files are located.</span>
</span><span id="ArticletovideoPlugin-383"><a href="#ArticletovideoPlugin-383"><span class="linenos"> 383</span></a><span class="sd">        pattern : str</span>
</span><span id="ArticletovideoPlugin-384"><a href="#ArticletovideoPlugin-384"><span class="linenos"> 384</span></a><span class="sd">            A regular expression pattern used to identify and extract numeric</span>
</span><span id="ArticletovideoPlugin-385"><a href="#ArticletovideoPlugin-385"><span class="linenos"> 385</span></a><span class="sd">            indices from filenames.</span>
</span><span id="ArticletovideoPlugin-386"><a href="#ArticletovideoPlugin-386"><span class="linenos"> 386</span></a>
</span><span id="ArticletovideoPlugin-387"><a href="#ArticletovideoPlugin-387"><span class="linenos"> 387</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin-388"><a href="#ArticletovideoPlugin-388"><span class="linenos"> 388</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin-389"><a href="#ArticletovideoPlugin-389"><span class="linenos"> 389</span></a><span class="sd">        list of str</span>
</span><span id="ArticletovideoPlugin-390"><a href="#ArticletovideoPlugin-390"><span class="linenos"> 390</span></a><span class="sd">            A list of sorted file paths that match the specified pattern.</span>
</span><span id="ArticletovideoPlugin-391"><a href="#ArticletovideoPlugin-391"><span class="linenos"> 391</span></a>
</span><span id="ArticletovideoPlugin-392"><a href="#ArticletovideoPlugin-392"><span class="linenos"> 392</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-393"><a href="#ArticletovideoPlugin-393"><span class="linenos"> 393</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-394"><a href="#ArticletovideoPlugin-394"><span class="linenos"> 394</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-395"><a href="#ArticletovideoPlugin-395"><span class="linenos"> 395</span></a><span class="sd">        files = plugin.get_sorted_files(&quot;~/output&quot;, r&quot;image_(\d+)\.png&quot;)</span>
</span><span id="ArticletovideoPlugin-396"><a href="#ArticletovideoPlugin-396"><span class="linenos"> 396</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-397"><a href="#ArticletovideoPlugin-397"><span class="linenos"> 397</span></a>        <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin-398"><a href="#ArticletovideoPlugin-398"><span class="linenos"> 398</span></a>        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-399"><a href="#ArticletovideoPlugin-399"><span class="linenos"> 399</span></a>            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-400"><a href="#ArticletovideoPlugin-400"><span class="linenos"> 400</span></a>            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-401"><a href="#ArticletovideoPlugin-401"><span class="linenos"> 401</span></a>                <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-402"><a href="#ArticletovideoPlugin-402"><span class="linenos"> 402</span></a>                <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">index</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">filename</span><span class="p">)))</span>
</span><span id="ArticletovideoPlugin-403"><a href="#ArticletovideoPlugin-403"><span class="linenos"> 403</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">file</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">files</span><span class="p">)]</span>
</span><span id="ArticletovideoPlugin-404"><a href="#ArticletovideoPlugin-404"><span class="linenos"> 404</span></a>
</span><span id="ArticletovideoPlugin-405"><a href="#ArticletovideoPlugin-405"><span class="linenos"> 405</span></a>    <span class="k">def</span> <span class="nf">scan_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-406"><a href="#ArticletovideoPlugin-406"><span class="linenos"> 406</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-407"><a href="#ArticletovideoPlugin-407"><span class="linenos"> 407</span></a><span class="sd">        Scans the output directory for generated audio and image files.</span>
</span><span id="ArticletovideoPlugin-408"><a href="#ArticletovideoPlugin-408"><span class="linenos"> 408</span></a>
</span><span id="ArticletovideoPlugin-409"><a href="#ArticletovideoPlugin-409"><span class="linenos"> 409</span></a><span class="sd">        This method identifies and sorts the audio and image files based on</span>
</span><span id="ArticletovideoPlugin-410"><a href="#ArticletovideoPlugin-410"><span class="linenos"> 410</span></a><span class="sd">        their naming convention in the specified output directory.</span>
</span><span id="ArticletovideoPlugin-411"><a href="#ArticletovideoPlugin-411"><span class="linenos"> 411</span></a>
</span><span id="ArticletovideoPlugin-412"><a href="#ArticletovideoPlugin-412"><span class="linenos"> 412</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-413"><a href="#ArticletovideoPlugin-413"><span class="linenos"> 413</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-414"><a href="#ArticletovideoPlugin-414"><span class="linenos"> 414</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin-415"><a href="#ArticletovideoPlugin-415"><span class="linenos"> 415</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin-416"><a href="#ArticletovideoPlugin-416"><span class="linenos"> 416</span></a><span class="sd">            the plugin, including the output directory.</span>
</span><span id="ArticletovideoPlugin-417"><a href="#ArticletovideoPlugin-417"><span class="linenos"> 417</span></a>
</span><span id="ArticletovideoPlugin-418"><a href="#ArticletovideoPlugin-418"><span class="linenos"> 418</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-419"><a href="#ArticletovideoPlugin-419"><span class="linenos"> 419</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-420"><a href="#ArticletovideoPlugin-420"><span class="linenos"> 420</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin-421"><a href="#ArticletovideoPlugin-421"><span class="linenos"> 421</span></a><span class="sd">            If the specified output directory does not exist.</span>
</span><span id="ArticletovideoPlugin-422"><a href="#ArticletovideoPlugin-422"><span class="linenos"> 422</span></a><span class="sd">        Warning</span>
</span><span id="ArticletovideoPlugin-423"><a href="#ArticletovideoPlugin-423"><span class="linenos"> 423</span></a><span class="sd">            If no audio or image files are found in the output directory.</span>
</span><span id="ArticletovideoPlugin-424"><a href="#ArticletovideoPlugin-424"><span class="linenos"> 424</span></a>
</span><span id="ArticletovideoPlugin-425"><a href="#ArticletovideoPlugin-425"><span class="linenos"> 425</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-426"><a href="#ArticletovideoPlugin-426"><span class="linenos"> 426</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-427"><a href="#ArticletovideoPlugin-427"><span class="linenos"> 427</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-428"><a href="#ArticletovideoPlugin-428"><span class="linenos"> 428</span></a><span class="sd">        config = plugin.get_config_fields()</span>
</span><span id="ArticletovideoPlugin-429"><a href="#ArticletovideoPlugin-429"><span class="linenos"> 429</span></a><span class="sd">        plugin.scan_files(config)</span>
</span><span id="ArticletovideoPlugin-430"><a href="#ArticletovideoPlugin-430"><span class="linenos"> 430</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-431"><a href="#ArticletovideoPlugin-431"><span class="linenos"> 431</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin-432"><a href="#ArticletovideoPlugin-432"><span class="linenos"> 432</span></a>
</span><span id="ArticletovideoPlugin-433"><a href="#ArticletovideoPlugin-433"><span class="linenos"> 433</span></a>        <span class="c1"># Scan for audio files</span>
</span><span id="ArticletovideoPlugin-434"><a href="#ArticletovideoPlugin-434"><span class="linenos"> 434</span></a>        <span class="n">audio_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sorted_files</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;audio_(\d+)\.wav&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-435"><a href="#ArticletovideoPlugin-435"><span class="linenos"> 435</span></a>
</span><span id="ArticletovideoPlugin-436"><a href="#ArticletovideoPlugin-436"><span class="linenos"> 436</span></a>        <span class="c1"># Scan for image files</span>
</span><span id="ArticletovideoPlugin-437"><a href="#ArticletovideoPlugin-437"><span class="linenos"> 437</span></a>        <span class="n">image_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sorted_files</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;image_(\d+)\.png&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-438"><a href="#ArticletovideoPlugin-438"><span class="linenos"> 438</span></a>
</span><span id="ArticletovideoPlugin-439"><a href="#ArticletovideoPlugin-439"><span class="linenos"> 439</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">audio_files</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">image_files</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-440"><a href="#ArticletovideoPlugin-440"><span class="linenos"> 440</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;no_files_found&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-441"><a href="#ArticletovideoPlugin-441"><span class="linenos"> 441</span></a>            <span class="k">return</span>
</span><span id="ArticletovideoPlugin-442"><a href="#ArticletovideoPlugin-442"><span class="linenos"> 442</span></a>
</span><span id="ArticletovideoPlugin-443"><a href="#ArticletovideoPlugin-443"><span class="linenos"> 443</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span> <span class="o">=</span> <span class="n">audio_files</span>
</span><span id="ArticletovideoPlugin-444"><a href="#ArticletovideoPlugin-444"><span class="linenos"> 444</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span> <span class="o">=</span> <span class="n">image_files</span>
</span><span id="ArticletovideoPlugin-445"><a href="#ArticletovideoPlugin-445"><span class="linenos"> 445</span></a>
</span><span id="ArticletovideoPlugin-446"><a href="#ArticletovideoPlugin-446"><span class="linenos"> 446</span></a>        <span class="c1"># Reconstruct segments and prompts based on file count</span>
</span><span id="ArticletovideoPlugin-447"><a href="#ArticletovideoPlugin-447"><span class="linenos"> 447</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">segments</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;Segment </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">audio_files</span><span class="p">))]</span>
</span><span id="ArticletovideoPlugin-448"><a href="#ArticletovideoPlugin-448"><span class="linenos"> 448</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">prompts</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="ArticletovideoPlugin-449"><a href="#ArticletovideoPlugin-449"><span class="linenos"> 449</span></a>            <span class="sa">f</span><span class="s2">&quot;Prompt for image </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">image_files</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-450"><a href="#ArticletovideoPlugin-450"><span class="linenos"> 450</span></a>        <span class="p">]</span>
</span><span id="ArticletovideoPlugin-451"><a href="#ArticletovideoPlugin-451"><span class="linenos"> 451</span></a>
</span><span id="ArticletovideoPlugin-452"><a href="#ArticletovideoPlugin-452"><span class="linenos"> 452</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;files_scanned_successfully&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-453"><a href="#ArticletovideoPlugin-453"><span class="linenos"> 453</span></a>
</span><span id="ArticletovideoPlugin-454"><a href="#ArticletovideoPlugin-454"><span class="linenos"> 454</span></a>        <span class="c1"># Display scanned files</span>
</span><span id="ArticletovideoPlugin-455"><a href="#ArticletovideoPlugin-455"><span class="linenos"> 455</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">subheader</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;scanned_files&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-456"><a href="#ArticletovideoPlugin-456"><span class="linenos"> 456</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Audio files: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">audio_files</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-457"><a href="#ArticletovideoPlugin-457"><span class="linenos"> 457</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Image files: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">image_files</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-458"><a href="#ArticletovideoPlugin-458"><span class="linenos"> 458</span></a>
</span><span id="ArticletovideoPlugin-459"><a href="#ArticletovideoPlugin-459"><span class="linenos"> 459</span></a>    <span class="k">def</span> <span class="nf">generate_video_one_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-460"><a href="#ArticletovideoPlugin-460"><span class="linenos"> 460</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-461"><a href="#ArticletovideoPlugin-461"><span class="linenos"> 461</span></a><span class="sd">        Generates a video from an article URL using one-click mode.</span>
</span><span id="ArticletovideoPlugin-462"><a href="#ArticletovideoPlugin-462"><span class="linenos"> 462</span></a>
</span><span id="ArticletovideoPlugin-463"><a href="#ArticletovideoPlugin-463"><span class="linenos"> 463</span></a><span class="sd">        This method retrieves the article, translates it, generates prompts,</span>
</span><span id="ArticletovideoPlugin-464"><a href="#ArticletovideoPlugin-464"><span class="linenos"> 464</span></a><span class="sd">        creates images, and assembles the final video.</span>
</span><span id="ArticletovideoPlugin-465"><a href="#ArticletovideoPlugin-465"><span class="linenos"> 465</span></a>
</span><span id="ArticletovideoPlugin-466"><a href="#ArticletovideoPlugin-466"><span class="linenos"> 466</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-467"><a href="#ArticletovideoPlugin-467"><span class="linenos"> 467</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-468"><a href="#ArticletovideoPlugin-468"><span class="linenos"> 468</span></a><span class="sd">        url : str</span>
</span><span id="ArticletovideoPlugin-469"><a href="#ArticletovideoPlugin-469"><span class="linenos"> 469</span></a><span class="sd">            The URL of the article to be converted into a video.</span>
</span><span id="ArticletovideoPlugin-470"><a href="#ArticletovideoPlugin-470"><span class="linenos"> 470</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin-471"><a href="#ArticletovideoPlugin-471"><span class="linenos"> 471</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin-472"><a href="#ArticletovideoPlugin-472"><span class="linenos"> 472</span></a><span class="sd">            the plugin, such as output directory, language, TTS model, etc.</span>
</span><span id="ArticletovideoPlugin-473"><a href="#ArticletovideoPlugin-473"><span class="linenos"> 473</span></a>
</span><span id="ArticletovideoPlugin-474"><a href="#ArticletovideoPlugin-474"><span class="linenos"> 474</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-475"><a href="#ArticletovideoPlugin-475"><span class="linenos"> 475</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-476"><a href="#ArticletovideoPlugin-476"><span class="linenos"> 476</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin-477"><a href="#ArticletovideoPlugin-477"><span class="linenos"> 477</span></a><span class="sd">            If the URL is invalid or the article cannot be retrieved.</span>
</span><span id="ArticletovideoPlugin-478"><a href="#ArticletovideoPlugin-478"><span class="linenos"> 478</span></a>
</span><span id="ArticletovideoPlugin-479"><a href="#ArticletovideoPlugin-479"><span class="linenos"> 479</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-480"><a href="#ArticletovideoPlugin-480"><span class="linenos"> 480</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-481"><a href="#ArticletovideoPlugin-481"><span class="linenos"> 481</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-482"><a href="#ArticletovideoPlugin-482"><span class="linenos"> 482</span></a><span class="sd">        config = plugin.get_config_fields()</span>
</span><span id="ArticletovideoPlugin-483"><a href="#ArticletovideoPlugin-483"><span class="linenos"> 483</span></a><span class="sd">        plugin.generate_video_one_click(&quot;https://example.com/article&quot;, config)</span>
</span><span id="ArticletovideoPlugin-484"><a href="#ArticletovideoPlugin-484"><span class="linenos"> 484</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-485"><a href="#ArticletovideoPlugin-485"><span class="linenos"> 485</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;processing_video&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin-486"><a href="#ArticletovideoPlugin-486"><span class="linenos"> 486</span></a>            <span class="c1"># Step 1: Retrieve article</span>
</span><span id="ArticletovideoPlugin-487"><a href="#ArticletovideoPlugin-487"><span class="linenos"> 487</span></a>            <span class="n">article_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_article</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-488"><a href="#ArticletovideoPlugin-488"><span class="linenos"> 488</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">article_text</span> <span class="o">=</span> <span class="n">article_text</span>
</span><span id="ArticletovideoPlugin-489"><a href="#ArticletovideoPlugin-489"><span class="linenos"> 489</span></a>
</span><span id="ArticletovideoPlugin-490"><a href="#ArticletovideoPlugin-490"><span class="linenos"> 490</span></a>            <span class="c1"># Step 2: Translate text</span>
</span><span id="ArticletovideoPlugin-491"><a href="#ArticletovideoPlugin-491"><span class="linenos"> 491</span></a>            <span class="n">translated_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate_text</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-492"><a href="#ArticletovideoPlugin-492"><span class="linenos"> 492</span></a>                <span class="n">article_text</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;target_language&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin-493"><a href="#ArticletovideoPlugin-493"><span class="linenos"> 493</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin-494"><a href="#ArticletovideoPlugin-494"><span class="linenos"> 494</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span> <span class="o">=</span> <span class="n">translated_text</span>
</span><span id="ArticletovideoPlugin-495"><a href="#ArticletovideoPlugin-495"><span class="linenos"> 495</span></a>
</span><span id="ArticletovideoPlugin-496"><a href="#ArticletovideoPlugin-496"><span class="linenos"> 496</span></a>            <span class="c1"># Step 3: Generate prompts</span>
</span><span id="ArticletovideoPlugin-497"><a href="#ArticletovideoPlugin-497"><span class="linenos"> 497</span></a>            <span class="n">split_by</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;split_by&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin-498"><a href="#ArticletovideoPlugin-498"><span class="linenos"> 498</span></a>            <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_segments</span><span class="p">(</span><span class="n">translated_text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-499"><a href="#ArticletovideoPlugin-499"><span class="linenos"> 499</span></a>            <span class="n">prompts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_all_image_prompts</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-500"><a href="#ArticletovideoPlugin-500"><span class="linenos"> 500</span></a>                <span class="n">segments</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;image_sysprompt&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin-501"><a href="#ArticletovideoPlugin-501"><span class="linenos"> 501</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin-502"><a href="#ArticletovideoPlugin-502"><span class="linenos"> 502</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span> <span class="o">=</span> <span class="n">prompts</span>
</span><span id="ArticletovideoPlugin-503"><a href="#ArticletovideoPlugin-503"><span class="linenos"> 503</span></a>
</span><span id="ArticletovideoPlugin-504"><a href="#ArticletovideoPlugin-504"><span class="linenos"> 504</span></a>            <span class="c1"># Step 4: Generate video</span>
</span><span id="ArticletovideoPlugin-505"><a href="#ArticletovideoPlugin-505"><span class="linenos"> 505</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">generate_all_images</span><span class="p">(</span><span class="n">translated_text</span><span class="p">,</span> <span class="n">prompts</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-506"><a href="#ArticletovideoPlugin-506"><span class="linenos"> 506</span></a>
</span><span id="ArticletovideoPlugin-507"><a href="#ArticletovideoPlugin-507"><span class="linenos"> 507</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;video_files_generated&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-508"><a href="#ArticletovideoPlugin-508"><span class="linenos"> 508</span></a>
</span><span id="ArticletovideoPlugin-509"><a href="#ArticletovideoPlugin-509"><span class="linenos"> 509</span></a>    <span class="k">def</span> <span class="nf">show_detailed_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-510"><a href="#ArticletovideoPlugin-510"><span class="linenos"> 510</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-511"><a href="#ArticletovideoPlugin-511"><span class="linenos"> 511</span></a><span class="sd">        Displays a detailed user interface for generating videos step by step.</span>
</span><span id="ArticletovideoPlugin-512"><a href="#ArticletovideoPlugin-512"><span class="linenos"> 512</span></a>
</span><span id="ArticletovideoPlugin-513"><a href="#ArticletovideoPlugin-513"><span class="linenos"> 513</span></a><span class="sd">        This method provides an interface in Streamlit that allows users to</span>
</span><span id="ArticletovideoPlugin-514"><a href="#ArticletovideoPlugin-514"><span class="linenos"> 514</span></a><span class="sd">        retrieve an article, translate it, generate image prompts, and</span>
</span><span id="ArticletovideoPlugin-515"><a href="#ArticletovideoPlugin-515"><span class="linenos"> 515</span></a><span class="sd">        assemble the final video in a detailed, step-by-step manner.</span>
</span><span id="ArticletovideoPlugin-516"><a href="#ArticletovideoPlugin-516"><span class="linenos"> 516</span></a>
</span><span id="ArticletovideoPlugin-517"><a href="#ArticletovideoPlugin-517"><span class="linenos"> 517</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-518"><a href="#ArticletovideoPlugin-518"><span class="linenos"> 518</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-519"><a href="#ArticletovideoPlugin-519"><span class="linenos"> 519</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin-520"><a href="#ArticletovideoPlugin-520"><span class="linenos"> 520</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin-521"><a href="#ArticletovideoPlugin-521"><span class="linenos"> 521</span></a><span class="sd">            the plugin.</span>
</span><span id="ArticletovideoPlugin-522"><a href="#ArticletovideoPlugin-522"><span class="linenos"> 522</span></a>
</span><span id="ArticletovideoPlugin-523"><a href="#ArticletovideoPlugin-523"><span class="linenos"> 523</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-524"><a href="#ArticletovideoPlugin-524"><span class="linenos"> 524</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-525"><a href="#ArticletovideoPlugin-525"><span class="linenos"> 525</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-526"><a href="#ArticletovideoPlugin-526"><span class="linenos"> 526</span></a><span class="sd">        plugin.show_detailed_interface(config)</span>
</span><span id="ArticletovideoPlugin-527"><a href="#ArticletovideoPlugin-527"><span class="linenos"> 527</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-528"><a href="#ArticletovideoPlugin-528"><span class="linenos"> 528</span></a>        <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;retrieve&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;retrieve_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-529"><a href="#ArticletovideoPlugin-529"><span class="linenos"> 529</span></a>            <span class="n">article_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_article</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-530"><a href="#ArticletovideoPlugin-530"><span class="linenos"> 530</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">article_text</span> <span class="o">=</span> <span class="n">article_text</span>
</span><span id="ArticletovideoPlugin-531"><a href="#ArticletovideoPlugin-531"><span class="linenos"> 531</span></a>
</span><span id="ArticletovideoPlugin-532"><a href="#ArticletovideoPlugin-532"><span class="linenos"> 532</span></a>        <span class="k">if</span> <span class="s2">&quot;article_text&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-533"><a href="#ArticletovideoPlugin-533"><span class="linenos"> 533</span></a>            <span class="n">article_text</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_area</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-534"><a href="#ArticletovideoPlugin-534"><span class="linenos"> 534</span></a>                <span class="n">t</span><span class="p">(</span><span class="s2">&quot;article_text&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-535"><a href="#ArticletovideoPlugin-535"><span class="linenos"> 535</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">article_text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-536"><a href="#ArticletovideoPlugin-536"><span class="linenos"> 536</span></a>                <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-537"><a href="#ArticletovideoPlugin-537"><span class="linenos"> 537</span></a>                <span class="n">key</span><span class="o">=</span><span class="s2">&quot;article_text_area&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-538"><a href="#ArticletovideoPlugin-538"><span class="linenos"> 538</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin-539"><a href="#ArticletovideoPlugin-539"><span class="linenos"> 539</span></a>
</span><span id="ArticletovideoPlugin-540"><a href="#ArticletovideoPlugin-540"><span class="linenos"> 540</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;translate&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;translate_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-541"><a href="#ArticletovideoPlugin-541"><span class="linenos"> 541</span></a>                <span class="n">translated_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate_text</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-542"><a href="#ArticletovideoPlugin-542"><span class="linenos"> 542</span></a>                    <span class="n">article_text</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;target_language&quot;</span><span class="p">],</span> <span class="n">config</span>
</span><span id="ArticletovideoPlugin-543"><a href="#ArticletovideoPlugin-543"><span class="linenos"> 543</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin-544"><a href="#ArticletovideoPlugin-544"><span class="linenos"> 544</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span> <span class="o">=</span> <span class="n">translated_text</span>
</span><span id="ArticletovideoPlugin-545"><a href="#ArticletovideoPlugin-545"><span class="linenos"> 545</span></a>
</span><span id="ArticletovideoPlugin-546"><a href="#ArticletovideoPlugin-546"><span class="linenos"> 546</span></a>        <span class="k">if</span> <span class="s2">&quot;translated_text&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-547"><a href="#ArticletovideoPlugin-547"><span class="linenos"> 547</span></a>            <span class="n">translated_text</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_area</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-548"><a href="#ArticletovideoPlugin-548"><span class="linenos"> 548</span></a>                <span class="n">t</span><span class="p">(</span><span class="s2">&quot;translated_text&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-549"><a href="#ArticletovideoPlugin-549"><span class="linenos"> 549</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-550"><a href="#ArticletovideoPlugin-550"><span class="linenos"> 550</span></a>                <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-551"><a href="#ArticletovideoPlugin-551"><span class="linenos"> 551</span></a>                <span class="n">key</span><span class="o">=</span><span class="s2">&quot;translated_text_area&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-552"><a href="#ArticletovideoPlugin-552"><span class="linenos"> 552</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin-553"><a href="#ArticletovideoPlugin-553"><span class="linenos"> 553</span></a>
</span><span id="ArticletovideoPlugin-554"><a href="#ArticletovideoPlugin-554"><span class="linenos"> 554</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;edit_prompts&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;edit_prompts_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-555"><a href="#ArticletovideoPlugin-555"><span class="linenos"> 555</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_and_edit_prompts</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-556"><a href="#ArticletovideoPlugin-556"><span class="linenos"> 556</span></a>                    <span class="n">translated_text</span><span class="p">,</span> <span class="n">config</span>
</span><span id="ArticletovideoPlugin-557"><a href="#ArticletovideoPlugin-557"><span class="linenos"> 557</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin-558"><a href="#ArticletovideoPlugin-558"><span class="linenos"> 558</span></a>
</span><span id="ArticletovideoPlugin-559"><a href="#ArticletovideoPlugin-559"><span class="linenos"> 559</span></a>        <span class="k">if</span> <span class="s2">&quot;edited_prompts&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-560"><a href="#ArticletovideoPlugin-560"><span class="linenos"> 560</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">display_prompts</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-561"><a href="#ArticletovideoPlugin-561"><span class="linenos"> 561</span></a>            <span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col3</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-562"><a href="#ArticletovideoPlugin-562"><span class="linenos"> 562</span></a>            <span class="k">with</span> <span class="n">col1</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-563"><a href="#ArticletovideoPlugin-563"><span class="linenos"> 563</span></a>                <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generate_video&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;generate_video_button_detailed&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-564"><a href="#ArticletovideoPlugin-564"><span class="linenos"> 564</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">generate_all_images</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-565"><a href="#ArticletovideoPlugin-565"><span class="linenos"> 565</span></a>                        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-566"><a href="#ArticletovideoPlugin-566"><span class="linenos"> 566</span></a>                        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-567"><a href="#ArticletovideoPlugin-567"><span class="linenos"> 567</span></a>                        <span class="n">config</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-568"><a href="#ArticletovideoPlugin-568"><span class="linenos"> 568</span></a>                    <span class="p">)</span>
</span><span id="ArticletovideoPlugin-569"><a href="#ArticletovideoPlugin-569"><span class="linenos"> 569</span></a>            <span class="k">with</span> <span class="n">col2</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-570"><a href="#ArticletovideoPlugin-570"><span class="linenos"> 570</span></a>                <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerate_audio&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;regenerate_audio_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-571"><a href="#ArticletovideoPlugin-571"><span class="linenos"> 571</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">regenerate_audios</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-572"><a href="#ArticletovideoPlugin-572"><span class="linenos"> 572</span></a>            <span class="k">with</span> <span class="n">col3</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-573"><a href="#ArticletovideoPlugin-573"><span class="linenos"> 573</span></a>                <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerate_images&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;regenerate_images_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-574"><a href="#ArticletovideoPlugin-574"><span class="linenos"> 574</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">regenerate_images</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-575"><a href="#ArticletovideoPlugin-575"><span class="linenos"> 575</span></a>
</span><span id="ArticletovideoPlugin-576"><a href="#ArticletovideoPlugin-576"><span class="linenos"> 576</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="ArticletovideoPlugin-577"><a href="#ArticletovideoPlugin-577"><span class="linenos"> 577</span></a>            <span class="s2">&quot;image_paths&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span>
</span><span id="ArticletovideoPlugin-578"><a href="#ArticletovideoPlugin-578"><span class="linenos"> 578</span></a>            <span class="ow">and</span> <span class="s2">&quot;prompts&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span>
</span><span id="ArticletovideoPlugin-579"><a href="#ArticletovideoPlugin-579"><span class="linenos"> 579</span></a>            <span class="ow">and</span> <span class="s2">&quot;segments&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span>
</span><span id="ArticletovideoPlugin-580"><a href="#ArticletovideoPlugin-580"><span class="linenos"> 580</span></a>        <span class="p">):</span>
</span><span id="ArticletovideoPlugin-581"><a href="#ArticletovideoPlugin-581"><span class="linenos"> 581</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;edit_images_and_prompts&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-582"><a href="#ArticletovideoPlugin-582"><span class="linenos"> 582</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">display_image_gallery</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin-583"><a href="#ArticletovideoPlugin-583"><span class="linenos"> 583</span></a>
</span><span id="ArticletovideoPlugin-584"><a href="#ArticletovideoPlugin-584"><span class="linenos"> 584</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;assemble_video&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;assemble_video_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-585"><a href="#ArticletovideoPlugin-585"><span class="linenos"> 585</span></a>                <span class="n">audio_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span>
</span><span id="ArticletovideoPlugin-586"><a href="#ArticletovideoPlugin-586"><span class="linenos"> 586</span></a>                <span class="n">image_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span>
</span><span id="ArticletovideoPlugin-587"><a href="#ArticletovideoPlugin-587"><span class="linenos"> 587</span></a>                <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin-588"><a href="#ArticletovideoPlugin-588"><span class="linenos"> 588</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">assemble_final_video</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-589"><a href="#ArticletovideoPlugin-589"><span class="linenos"> 589</span></a>                    <span class="n">config</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-590"><a href="#ArticletovideoPlugin-590"><span class="linenos"> 590</span></a>                    <span class="n">use_zoom_and_transitions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-591"><a href="#ArticletovideoPlugin-591"><span class="linenos"> 591</span></a>                    <span class="n">audio_paths</span><span class="o">=</span><span class="n">audio_paths</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-592"><a href="#ArticletovideoPlugin-592"><span class="linenos"> 592</span></a>                    <span class="n">image_paths</span><span class="o">=</span><span class="n">image_paths</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-593"><a href="#ArticletovideoPlugin-593"><span class="linenos"> 593</span></a>                    <span class="n">output_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="s2">&quot;final_video.mp4&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin-594"><a href="#ArticletovideoPlugin-594"><span class="linenos"> 594</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin-595"><a href="#ArticletovideoPlugin-595"><span class="linenos"> 595</span></a>
</span><span id="ArticletovideoPlugin-596"><a href="#ArticletovideoPlugin-596"><span class="linenos"> 596</span></a>    <span class="k">def</span> <span class="nf">get_segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-597"><a href="#ArticletovideoPlugin-597"><span class="linenos"> 597</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-598"><a href="#ArticletovideoPlugin-598"><span class="linenos"> 598</span></a><span class="sd">        Splits the provided text into segments based on the specified criterion.</span>
</span><span id="ArticletovideoPlugin-599"><a href="#ArticletovideoPlugin-599"><span class="linenos"> 599</span></a>
</span><span id="ArticletovideoPlugin-600"><a href="#ArticletovideoPlugin-600"><span class="linenos"> 600</span></a><span class="sd">        This method splits the text either by sentences or paragraphs, based on</span>
</span><span id="ArticletovideoPlugin-601"><a href="#ArticletovideoPlugin-601"><span class="linenos"> 601</span></a><span class="sd">        the `split_by` parameter, and filters out empty or invalid segments.</span>
</span><span id="ArticletovideoPlugin-602"><a href="#ArticletovideoPlugin-602"><span class="linenos"> 602</span></a>
</span><span id="ArticletovideoPlugin-603"><a href="#ArticletovideoPlugin-603"><span class="linenos"> 603</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-604"><a href="#ArticletovideoPlugin-604"><span class="linenos"> 604</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-605"><a href="#ArticletovideoPlugin-605"><span class="linenos"> 605</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin-606"><a href="#ArticletovideoPlugin-606"><span class="linenos"> 606</span></a><span class="sd">            The text to split into segments.</span>
</span><span id="ArticletovideoPlugin-607"><a href="#ArticletovideoPlugin-607"><span class="linenos"> 607</span></a><span class="sd">        split_by : str</span>
</span><span id="ArticletovideoPlugin-608"><a href="#ArticletovideoPlugin-608"><span class="linenos"> 608</span></a><span class="sd">            The criterion for splitting the text, either &quot;sentence&quot; or &quot;paragraph&quot;.</span>
</span><span id="ArticletovideoPlugin-609"><a href="#ArticletovideoPlugin-609"><span class="linenos"> 609</span></a>
</span><span id="ArticletovideoPlugin-610"><a href="#ArticletovideoPlugin-610"><span class="linenos"> 610</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin-611"><a href="#ArticletovideoPlugin-611"><span class="linenos"> 611</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin-612"><a href="#ArticletovideoPlugin-612"><span class="linenos"> 612</span></a><span class="sd">        list of str</span>
</span><span id="ArticletovideoPlugin-613"><a href="#ArticletovideoPlugin-613"><span class="linenos"> 613</span></a><span class="sd">            A list of text segments after splitting.</span>
</span><span id="ArticletovideoPlugin-614"><a href="#ArticletovideoPlugin-614"><span class="linenos"> 614</span></a>
</span><span id="ArticletovideoPlugin-615"><a href="#ArticletovideoPlugin-615"><span class="linenos"> 615</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-616"><a href="#ArticletovideoPlugin-616"><span class="linenos"> 616</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-617"><a href="#ArticletovideoPlugin-617"><span class="linenos"> 617</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin-618"><a href="#ArticletovideoPlugin-618"><span class="linenos"> 618</span></a><span class="sd">            If `split_by` is not &quot;sentence&quot; or &quot;paragraph&quot;.</span>
</span><span id="ArticletovideoPlugin-619"><a href="#ArticletovideoPlugin-619"><span class="linenos"> 619</span></a>
</span><span id="ArticletovideoPlugin-620"><a href="#ArticletovideoPlugin-620"><span class="linenos"> 620</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-621"><a href="#ArticletovideoPlugin-621"><span class="linenos"> 621</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-622"><a href="#ArticletovideoPlugin-622"><span class="linenos"> 622</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-623"><a href="#ArticletovideoPlugin-623"><span class="linenos"> 623</span></a><span class="sd">        segments = plugin.get_segments(&quot;This is the first sentence. This is the second.&quot;, &quot;sentence&quot;)</span>
</span><span id="ArticletovideoPlugin-624"><a href="#ArticletovideoPlugin-624"><span class="linenos"> 624</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-625"><a href="#ArticletovideoPlugin-625"><span class="linenos"> 625</span></a>        <span class="k">if</span> <span class="n">split_by</span> <span class="o">==</span> <span class="s2">&quot;sentence&quot;</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-626"><a href="#ArticletovideoPlugin-626"><span class="linenos"> 626</span></a>            <span class="n">segments</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;. &quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-627"><a href="#ArticletovideoPlugin-627"><span class="linenos"> 627</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-628"><a href="#ArticletovideoPlugin-628"><span class="linenos"> 628</span></a>            <span class="n">segments</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-629"><a href="#ArticletovideoPlugin-629"><span class="linenos"> 629</span></a>
</span><span id="ArticletovideoPlugin-630"><a href="#ArticletovideoPlugin-630"><span class="linenos"> 630</span></a>        <span class="c1"># Filtrer les segments</span>
</span><span id="ArticletovideoPlugin-631"><a href="#ArticletovideoPlugin-631"><span class="linenos"> 631</span></a>        <span class="n">filtered_segments</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin-632"><a href="#ArticletovideoPlugin-632"><span class="linenos"> 632</span></a>        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-633"><a href="#ArticletovideoPlugin-633"><span class="linenos"> 633</span></a>            <span class="k">if</span> <span class="n">segment</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-634"><a href="#ArticletovideoPlugin-634"><span class="linenos"> 634</span></a>                <span class="k">continue</span>
</span><span id="ArticletovideoPlugin-635"><a href="#ArticletovideoPlugin-635"><span class="linenos"> 635</span></a>            <span class="n">segment</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin-636"><a href="#ArticletovideoPlugin-636"><span class="linenos"> 636</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">segment</span> <span class="ow">or</span> <span class="s2">&quot; &quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">segment</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-637"><a href="#ArticletovideoPlugin-637"><span class="linenos"> 637</span></a>                <span class="k">continue</span>
</span><span id="ArticletovideoPlugin-638"><a href="#ArticletovideoPlugin-638"><span class="linenos"> 638</span></a>            <span class="n">filtered_segments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-639"><a href="#ArticletovideoPlugin-639"><span class="linenos"> 639</span></a>
</span><span id="ArticletovideoPlugin-640"><a href="#ArticletovideoPlugin-640"><span class="linenos"> 640</span></a>        <span class="k">return</span> <span class="n">filtered_segments</span>
</span><span id="ArticletovideoPlugin-641"><a href="#ArticletovideoPlugin-641"><span class="linenos"> 641</span></a>
</span><span id="ArticletovideoPlugin-642"><a href="#ArticletovideoPlugin-642"><span class="linenos"> 642</span></a>    <span class="k">def</span> <span class="nf">regenerate_audios</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-643"><a href="#ArticletovideoPlugin-643"><span class="linenos"> 643</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-644"><a href="#ArticletovideoPlugin-644"><span class="linenos"> 644</span></a><span class="sd">        Regenerates audio files from the given text using the configured TTS model.</span>
</span><span id="ArticletovideoPlugin-645"><a href="#ArticletovideoPlugin-645"><span class="linenos"> 645</span></a>
</span><span id="ArticletovideoPlugin-646"><a href="#ArticletovideoPlugin-646"><span class="linenos"> 646</span></a><span class="sd">        This method splits the text into segments, generates audio for each</span>
</span><span id="ArticletovideoPlugin-647"><a href="#ArticletovideoPlugin-647"><span class="linenos"> 647</span></a><span class="sd">        segment, and saves the audio files in the specified output directory.</span>
</span><span id="ArticletovideoPlugin-648"><a href="#ArticletovideoPlugin-648"><span class="linenos"> 648</span></a>
</span><span id="ArticletovideoPlugin-649"><a href="#ArticletovideoPlugin-649"><span class="linenos"> 649</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-650"><a href="#ArticletovideoPlugin-650"><span class="linenos"> 650</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-651"><a href="#ArticletovideoPlugin-651"><span class="linenos"> 651</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin-652"><a href="#ArticletovideoPlugin-652"><span class="linenos"> 652</span></a><span class="sd">            The text for which to regenerate audio.</span>
</span><span id="ArticletovideoPlugin-653"><a href="#ArticletovideoPlugin-653"><span class="linenos"> 653</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin-654"><a href="#ArticletovideoPlugin-654"><span class="linenos"> 654</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin-655"><a href="#ArticletovideoPlugin-655"><span class="linenos"> 655</span></a><span class="sd">            the plugin, such as the TTS model and output directory.</span>
</span><span id="ArticletovideoPlugin-656"><a href="#ArticletovideoPlugin-656"><span class="linenos"> 656</span></a>
</span><span id="ArticletovideoPlugin-657"><a href="#ArticletovideoPlugin-657"><span class="linenos"> 657</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-658"><a href="#ArticletovideoPlugin-658"><span class="linenos"> 658</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-659"><a href="#ArticletovideoPlugin-659"><span class="linenos"> 659</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin-660"><a href="#ArticletovideoPlugin-660"><span class="linenos"> 660</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="ArticletovideoPlugin-661"><a href="#ArticletovideoPlugin-661"><span class="linenos"> 661</span></a>
</span><span id="ArticletovideoPlugin-662"><a href="#ArticletovideoPlugin-662"><span class="linenos"> 662</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-663"><a href="#ArticletovideoPlugin-663"><span class="linenos"> 663</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-664"><a href="#ArticletovideoPlugin-664"><span class="linenos"> 664</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-665"><a href="#ArticletovideoPlugin-665"><span class="linenos"> 665</span></a><span class="sd">        plugin.regenerate_audios(translated_text, config)</span>
</span><span id="ArticletovideoPlugin-666"><a href="#ArticletovideoPlugin-666"><span class="linenos"> 666</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-667"><a href="#ArticletovideoPlugin-667"><span class="linenos"> 667</span></a>        <span class="n">split_by</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;split_by&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin-668"><a href="#ArticletovideoPlugin-668"><span class="linenos"> 668</span></a>        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_segments</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-669"><a href="#ArticletovideoPlugin-669"><span class="linenos"> 669</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin-670"><a href="#ArticletovideoPlugin-670"><span class="linenos"> 670</span></a>
</span><span id="ArticletovideoPlugin-671"><a href="#ArticletovideoPlugin-671"><span class="linenos"> 671</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerating_audio&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin-672"><a href="#ArticletovideoPlugin-672"><span class="linenos"> 672</span></a>            <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-673"><a href="#ArticletovideoPlugin-673"><span class="linenos"> 673</span></a>            <span class="n">audio_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin-674"><a href="#ArticletovideoPlugin-674"><span class="linenos"> 674</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">segment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">segments</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-675"><a href="#ArticletovideoPlugin-675"><span class="linenos"> 675</span></a>                <span class="n">audio_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;audio_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.wav&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-676"><a href="#ArticletovideoPlugin-676"><span class="linenos"> 676</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_one_audio</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">audio_path</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-677"><a href="#ArticletovideoPlugin-677"><span class="linenos"> 677</span></a>                <span class="n">audio_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">audio_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-678"><a href="#ArticletovideoPlugin-678"><span class="linenos"> 678</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-679"><a href="#ArticletovideoPlugin-679"><span class="linenos"> 679</span></a>
</span><span id="ArticletovideoPlugin-680"><a href="#ArticletovideoPlugin-680"><span class="linenos"> 680</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span> <span class="o">=</span> <span class="n">audio_paths</span>
</span><span id="ArticletovideoPlugin-681"><a href="#ArticletovideoPlugin-681"><span class="linenos"> 681</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;audio_regenerated&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-682"><a href="#ArticletovideoPlugin-682"><span class="linenos"> 682</span></a>
</span><span id="ArticletovideoPlugin-683"><a href="#ArticletovideoPlugin-683"><span class="linenos"> 683</span></a>    <span class="k">def</span> <span class="nf">regenerate_images</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompts</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-684"><a href="#ArticletovideoPlugin-684"><span class="linenos"> 684</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-685"><a href="#ArticletovideoPlugin-685"><span class="linenos"> 685</span></a><span class="sd">        Regenerates images based on the provided prompts.</span>
</span><span id="ArticletovideoPlugin-686"><a href="#ArticletovideoPlugin-686"><span class="linenos"> 686</span></a>
</span><span id="ArticletovideoPlugin-687"><a href="#ArticletovideoPlugin-687"><span class="linenos"> 687</span></a><span class="sd">        This method generates new images based on the provided prompts and</span>
</span><span id="ArticletovideoPlugin-688"><a href="#ArticletovideoPlugin-688"><span class="linenos"> 688</span></a><span class="sd">        saves them in the specified output directory.</span>
</span><span id="ArticletovideoPlugin-689"><a href="#ArticletovideoPlugin-689"><span class="linenos"> 689</span></a>
</span><span id="ArticletovideoPlugin-690"><a href="#ArticletovideoPlugin-690"><span class="linenos"> 690</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-691"><a href="#ArticletovideoPlugin-691"><span class="linenos"> 691</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-692"><a href="#ArticletovideoPlugin-692"><span class="linenos"> 692</span></a><span class="sd">        prompts : list of str</span>
</span><span id="ArticletovideoPlugin-693"><a href="#ArticletovideoPlugin-693"><span class="linenos"> 693</span></a><span class="sd">            The image prompts to use for generating new images.</span>
</span><span id="ArticletovideoPlugin-694"><a href="#ArticletovideoPlugin-694"><span class="linenos"> 694</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin-695"><a href="#ArticletovideoPlugin-695"><span class="linenos"> 695</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin-696"><a href="#ArticletovideoPlugin-696"><span class="linenos"> 696</span></a><span class="sd">            the plugin, such as the output directory.</span>
</span><span id="ArticletovideoPlugin-697"><a href="#ArticletovideoPlugin-697"><span class="linenos"> 697</span></a>
</span><span id="ArticletovideoPlugin-698"><a href="#ArticletovideoPlugin-698"><span class="linenos"> 698</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-699"><a href="#ArticletovideoPlugin-699"><span class="linenos"> 699</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-700"><a href="#ArticletovideoPlugin-700"><span class="linenos"> 700</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin-701"><a href="#ArticletovideoPlugin-701"><span class="linenos"> 701</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="ArticletovideoPlugin-702"><a href="#ArticletovideoPlugin-702"><span class="linenos"> 702</span></a>
</span><span id="ArticletovideoPlugin-703"><a href="#ArticletovideoPlugin-703"><span class="linenos"> 703</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-704"><a href="#ArticletovideoPlugin-704"><span class="linenos"> 704</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-705"><a href="#ArticletovideoPlugin-705"><span class="linenos"> 705</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-706"><a href="#ArticletovideoPlugin-706"><span class="linenos"> 706</span></a><span class="sd">        plugin.regenerate_images(prompts, config)</span>
</span><span id="ArticletovideoPlugin-707"><a href="#ArticletovideoPlugin-707"><span class="linenos"> 707</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-708"><a href="#ArticletovideoPlugin-708"><span class="linenos"> 708</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin-709"><a href="#ArticletovideoPlugin-709"><span class="linenos"> 709</span></a>
</span><span id="ArticletovideoPlugin-710"><a href="#ArticletovideoPlugin-710"><span class="linenos"> 710</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerating_images&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin-711"><a href="#ArticletovideoPlugin-711"><span class="linenos"> 711</span></a>            <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-712"><a href="#ArticletovideoPlugin-712"><span class="linenos"> 712</span></a>            <span class="n">image_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin-713"><a href="#ArticletovideoPlugin-713"><span class="linenos"> 713</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">prompt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">prompts</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-714"><a href="#ArticletovideoPlugin-714"><span class="linenos"> 714</span></a>                <span class="n">image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.png&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-715"><a href="#ArticletovideoPlugin-715"><span class="linenos"> 715</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_image</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-716"><a href="#ArticletovideoPlugin-716"><span class="linenos"> 716</span></a>                <span class="n">image_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-717"><a href="#ArticletovideoPlugin-717"><span class="linenos"> 717</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">prompts</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-718"><a href="#ArticletovideoPlugin-718"><span class="linenos"> 718</span></a>
</span><span id="ArticletovideoPlugin-719"><a href="#ArticletovideoPlugin-719"><span class="linenos"> 719</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span> <span class="o">=</span> <span class="n">image_paths</span>
</span><span id="ArticletovideoPlugin-720"><a href="#ArticletovideoPlugin-720"><span class="linenos"> 720</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;images_regenerated&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-721"><a href="#ArticletovideoPlugin-721"><span class="linenos"> 721</span></a>
</span><span id="ArticletovideoPlugin-722"><a href="#ArticletovideoPlugin-722"><span class="linenos"> 722</span></a>    <span class="k">def</span> <span class="nf">convert_numbers_to_words_llm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-723"><a href="#ArticletovideoPlugin-723"><span class="linenos"> 723</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-724"><a href="#ArticletovideoPlugin-724"><span class="linenos"> 724</span></a><span class="sd">        Converts numbers to words in the provided text using a language model.</span>
</span><span id="ArticletovideoPlugin-725"><a href="#ArticletovideoPlugin-725"><span class="linenos"> 725</span></a>
</span><span id="ArticletovideoPlugin-726"><a href="#ArticletovideoPlugin-726"><span class="linenos"> 726</span></a><span class="sd">        This method leverages an LLM (Language Model) to convert numbers,</span>
</span><span id="ArticletovideoPlugin-727"><a href="#ArticletovideoPlugin-727"><span class="linenos"> 727</span></a><span class="sd">        including percentages and dates, into words in the specified language.</span>
</span><span id="ArticletovideoPlugin-728"><a href="#ArticletovideoPlugin-728"><span class="linenos"> 728</span></a>
</span><span id="ArticletovideoPlugin-729"><a href="#ArticletovideoPlugin-729"><span class="linenos"> 729</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-730"><a href="#ArticletovideoPlugin-730"><span class="linenos"> 730</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-731"><a href="#ArticletovideoPlugin-731"><span class="linenos"> 731</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin-732"><a href="#ArticletovideoPlugin-732"><span class="linenos"> 732</span></a><span class="sd">            The text containing numbers to be converted to words.</span>
</span><span id="ArticletovideoPlugin-733"><a href="#ArticletovideoPlugin-733"><span class="linenos"> 733</span></a><span class="sd">        lang : str</span>
</span><span id="ArticletovideoPlugin-734"><a href="#ArticletovideoPlugin-734"><span class="linenos"> 734</span></a><span class="sd">            The language code indicating the target language for conversion (e.g., &#39;en&#39; for English, &#39;fr&#39; for French).</span>
</span><span id="ArticletovideoPlugin-735"><a href="#ArticletovideoPlugin-735"><span class="linenos"> 735</span></a>
</span><span id="ArticletovideoPlugin-736"><a href="#ArticletovideoPlugin-736"><span class="linenos"> 736</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin-737"><a href="#ArticletovideoPlugin-737"><span class="linenos"> 737</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin-738"><a href="#ArticletovideoPlugin-738"><span class="linenos"> 738</span></a><span class="sd">        str</span>
</span><span id="ArticletovideoPlugin-739"><a href="#ArticletovideoPlugin-739"><span class="linenos"> 739</span></a><span class="sd">            The text with all numbers converted to words by the LLM.</span>
</span><span id="ArticletovideoPlugin-740"><a href="#ArticletovideoPlugin-740"><span class="linenos"> 740</span></a>
</span><span id="ArticletovideoPlugin-741"><a href="#ArticletovideoPlugin-741"><span class="linenos"> 741</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-742"><a href="#ArticletovideoPlugin-742"><span class="linenos"> 742</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-743"><a href="#ArticletovideoPlugin-743"><span class="linenos"> 743</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-744"><a href="#ArticletovideoPlugin-744"><span class="linenos"> 744</span></a><span class="sd">        result = plugin.convert_numbers_to_words_llm(&quot;Le prix est 20,5 %.&quot;, &quot;fr&quot;)</span>
</span><span id="ArticletovideoPlugin-745"><a href="#ArticletovideoPlugin-745"><span class="linenos"> 745</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-746"><a href="#ArticletovideoPlugin-746"><span class="linenos"> 746</span></a>        <span class="n">sysprompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;You are an AI assistant that converts numbers including real numbers and percentages to words in </span><span class="si">{</span><span class="n">lang</span><span class="si">}</span><span class="s2">. Maintain the original sentence structure and only convert the numbers and real numbers and percentages. DO NOT ADD COMMENTS&quot;</span>
</span><span id="ArticletovideoPlugin-747"><a href="#ArticletovideoPlugin-747"><span class="linenos"> 747</span></a>        <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Without adding any comment, convert all numbers and real numbers and percentages in the following text to words in </span><span class="si">{</span><span class="n">lang</span><span class="si">}</span><span class="s2">:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin-748"><a href="#ArticletovideoPlugin-748"><span class="linenos"> 748</span></a>        <span class="n">ragllm_plugin</span> <span class="o">=</span> <span class="n">RagllmPlugin</span><span class="p">(</span><span class="s2">&quot;ragllm&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-749"><a href="#ArticletovideoPlugin-749"><span class="linenos"> 749</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">ragllm_plugin</span><span class="o">.</span><span class="n">call_llm</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-750"><a href="#ArticletovideoPlugin-750"><span class="linenos"> 750</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="ArticletovideoPlugin-751"><a href="#ArticletovideoPlugin-751"><span class="linenos"> 751</span></a>
</span><span id="ArticletovideoPlugin-752"><a href="#ArticletovideoPlugin-752"><span class="linenos"> 752</span></a>    <span class="k">def</span> <span class="nf">convert_numbers_to_words</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-753"><a href="#ArticletovideoPlugin-753"><span class="linenos"> 753</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-754"><a href="#ArticletovideoPlugin-754"><span class="linenos"> 754</span></a><span class="sd">        Converts all numbers in the provided text to words in the specified language.</span>
</span><span id="ArticletovideoPlugin-755"><a href="#ArticletovideoPlugin-755"><span class="linenos"> 755</span></a>
</span><span id="ArticletovideoPlugin-756"><a href="#ArticletovideoPlugin-756"><span class="linenos"> 756</span></a><span class="sd">        This method handles the conversion of integers, decimal numbers, percentages,</span>
</span><span id="ArticletovideoPlugin-757"><a href="#ArticletovideoPlugin-757"><span class="linenos"> 757</span></a><span class="sd">        and dates to their word equivalents in the target language.</span>
</span><span id="ArticletovideoPlugin-758"><a href="#ArticletovideoPlugin-758"><span class="linenos"> 758</span></a>
</span><span id="ArticletovideoPlugin-759"><a href="#ArticletovideoPlugin-759"><span class="linenos"> 759</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-760"><a href="#ArticletovideoPlugin-760"><span class="linenos"> 760</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-761"><a href="#ArticletovideoPlugin-761"><span class="linenos"> 761</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin-762"><a href="#ArticletovideoPlugin-762"><span class="linenos"> 762</span></a><span class="sd">            The text containing numbers to be converted to words.</span>
</span><span id="ArticletovideoPlugin-763"><a href="#ArticletovideoPlugin-763"><span class="linenos"> 763</span></a><span class="sd">        lang : str</span>
</span><span id="ArticletovideoPlugin-764"><a href="#ArticletovideoPlugin-764"><span class="linenos"> 764</span></a><span class="sd">            The language code indicating the target language for conversion (e.g., &#39;en&#39; for English, &#39;fr&#39; for French).</span>
</span><span id="ArticletovideoPlugin-765"><a href="#ArticletovideoPlugin-765"><span class="linenos"> 765</span></a>
</span><span id="ArticletovideoPlugin-766"><a href="#ArticletovideoPlugin-766"><span class="linenos"> 766</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin-767"><a href="#ArticletovideoPlugin-767"><span class="linenos"> 767</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin-768"><a href="#ArticletovideoPlugin-768"><span class="linenos"> 768</span></a><span class="sd">        str</span>
</span><span id="ArticletovideoPlugin-769"><a href="#ArticletovideoPlugin-769"><span class="linenos"> 769</span></a><span class="sd">            The text with all numbers converted to words.</span>
</span><span id="ArticletovideoPlugin-770"><a href="#ArticletovideoPlugin-770"><span class="linenos"> 770</span></a>
</span><span id="ArticletovideoPlugin-771"><a href="#ArticletovideoPlugin-771"><span class="linenos"> 771</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-772"><a href="#ArticletovideoPlugin-772"><span class="linenos"> 772</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-773"><a href="#ArticletovideoPlugin-773"><span class="linenos"> 773</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-774"><a href="#ArticletovideoPlugin-774"><span class="linenos"> 774</span></a><span class="sd">        result = plugin.convert_numbers_to_words(&quot;The temperature is 25.5 degrees.&quot;, &quot;en&quot;)</span>
</span><span id="ArticletovideoPlugin-775"><a href="#ArticletovideoPlugin-775"><span class="linenos"> 775</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-776"><a href="#ArticletovideoPlugin-776"><span class="linenos"> 776</span></a>
</span><span id="ArticletovideoPlugin-777"><a href="#ArticletovideoPlugin-777"><span class="linenos"> 777</span></a>        <span class="k">def</span> <span class="nf">convert_number</span><span class="p">(</span><span class="n">match</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-778"><a href="#ArticletovideoPlugin-778"><span class="linenos"> 778</span></a>            <span class="n">number</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-779"><a href="#ArticletovideoPlugin-779"><span class="linenos"> 779</span></a>
</span><span id="ArticletovideoPlugin-780"><a href="#ArticletovideoPlugin-780"><span class="linenos"> 780</span></a>            <span class="c1"># Convert percentages</span>
</span><span id="ArticletovideoPlugin-781"><a href="#ArticletovideoPlugin-781"><span class="linenos"> 781</span></a>            <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="s2">&quot;%&quot;</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-782"><a href="#ArticletovideoPlugin-782"><span class="linenos"> 782</span></a>                <span class="k">return</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;percent&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-783"><a href="#ArticletovideoPlugin-783"><span class="linenos"> 783</span></a>
</span><span id="ArticletovideoPlugin-784"><a href="#ArticletovideoPlugin-784"><span class="linenos"> 784</span></a>            <span class="k">if</span> <span class="s2">&quot;%&quot;</span> <span class="ow">in</span> <span class="n">number</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-785"><a href="#ArticletovideoPlugin-785"><span class="linenos"> 785</span></a>                <span class="n">num</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">number</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-786"><a href="#ArticletovideoPlugin-786"><span class="linenos"> 786</span></a>                <span class="k">return</span> <span class="n">num2words</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;percent&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-787"><a href="#ArticletovideoPlugin-787"><span class="linenos"> 787</span></a>
</span><span id="ArticletovideoPlugin-788"><a href="#ArticletovideoPlugin-788"><span class="linenos"> 788</span></a>            <span class="c1"># Convert dates</span>
</span><span id="ArticletovideoPlugin-789"><a href="#ArticletovideoPlugin-789"><span class="linenos"> 789</span></a>            <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d{1,2}/\d{1,2}/\d</span><span class="si">{4}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-790"><a href="#ArticletovideoPlugin-790"><span class="linenos"> 790</span></a>                <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-791"><a href="#ArticletovideoPlugin-791"><span class="linenos"> 791</span></a>                <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_TIME</span><span class="p">,</span> <span class="n">lang</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-792"><a href="#ArticletovideoPlugin-792"><span class="linenos"> 792</span></a>                <span class="k">return</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> %B %Y&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin-793"><a href="#ArticletovideoPlugin-793"><span class="linenos"> 793</span></a>
</span><span id="ArticletovideoPlugin-794"><a href="#ArticletovideoPlugin-794"><span class="linenos"> 794</span></a>            <span class="c1"># Convert decimal numbers</span>
</span><span id="ArticletovideoPlugin-795"><a href="#ArticletovideoPlugin-795"><span class="linenos"> 795</span></a>            <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">number</span> <span class="ow">or</span> <span class="s2">&quot;,&quot;</span> <span class="ow">in</span> <span class="n">number</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-796"><a href="#ArticletovideoPlugin-796"><span class="linenos"> 796</span></a>                <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-797"><a href="#ArticletovideoPlugin-797"><span class="linenos"> 797</span></a>                    <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span>
</span><span id="ArticletovideoPlugin-798"><a href="#ArticletovideoPlugin-798"><span class="linenos"> 798</span></a>                <span class="p">)</span>  <span class="c1"># Normalize to dot as decimal separator</span>
</span><span id="ArticletovideoPlugin-799"><a href="#ArticletovideoPlugin-799"><span class="linenos"> 799</span></a>                <span class="n">integer_part</span><span class="p">,</span> <span class="n">decimal_part</span> <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-800"><a href="#ArticletovideoPlugin-800"><span class="linenos"> 800</span></a>                <span class="n">integer_words</span> <span class="o">=</span> <span class="n">num2words</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">integer_part</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-801"><a href="#ArticletovideoPlugin-801"><span class="linenos"> 801</span></a>                <span class="n">decimal_words</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-802"><a href="#ArticletovideoPlugin-802"><span class="linenos"> 802</span></a>                    <span class="n">num2words</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">digit</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span> <span class="k">for</span> <span class="n">digit</span> <span class="ow">in</span> <span class="n">decimal_part</span>
</span><span id="ArticletovideoPlugin-803"><a href="#ArticletovideoPlugin-803"><span class="linenos"> 803</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin-804"><a href="#ArticletovideoPlugin-804"><span class="linenos"> 804</span></a>                <span class="n">decimal_separator</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ArticletovideoPlugin-805"><a href="#ArticletovideoPlugin-805"><span class="linenos"> 805</span></a>                    <span class="n">t</span><span class="p">(</span><span class="s2">&quot;decimal_point&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">lang</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;en&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;decimal_comma&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-806"><a href="#ArticletovideoPlugin-806"><span class="linenos"> 806</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin-807"><a href="#ArticletovideoPlugin-807"><span class="linenos"> 807</span></a>                <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">integer_words</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">decimal_separator</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">decimal_words</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin-808"><a href="#ArticletovideoPlugin-808"><span class="linenos"> 808</span></a>
</span><span id="ArticletovideoPlugin-809"><a href="#ArticletovideoPlugin-809"><span class="linenos"> 809</span></a>            <span class="c1"># Convert integers</span>
</span><span id="ArticletovideoPlugin-810"><a href="#ArticletovideoPlugin-810"><span class="linenos"> 810</span></a>            <span class="k">return</span> <span class="n">num2words</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-811"><a href="#ArticletovideoPlugin-811"><span class="linenos"> 811</span></a>
</span><span id="ArticletovideoPlugin-812"><a href="#ArticletovideoPlugin-812"><span class="linenos"> 812</span></a>        <span class="c1"># Regular expression to match numbers, percentages, and dates</span>
</span><span id="ArticletovideoPlugin-813"><a href="#ArticletovideoPlugin-813"><span class="linenos"> 813</span></a>        <span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\b\d+(?:[.,]\d+)?%?|%|\b\d{1,2}/\d{1,2}/\d</span><span class="si">{4}</span><span class="s2">\b&quot;</span>
</span><span id="ArticletovideoPlugin-814"><a href="#ArticletovideoPlugin-814"><span class="linenos"> 814</span></a>
</span><span id="ArticletovideoPlugin-815"><a href="#ArticletovideoPlugin-815"><span class="linenos"> 815</span></a>        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">convert_number</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-816"><a href="#ArticletovideoPlugin-816"><span class="linenos"> 816</span></a>
</span><span id="ArticletovideoPlugin-817"><a href="#ArticletovideoPlugin-817"><span class="linenos"> 817</span></a>        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">convert_number</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-818"><a href="#ArticletovideoPlugin-818"><span class="linenos"> 818</span></a>
</span><span id="ArticletovideoPlugin-819"><a href="#ArticletovideoPlugin-819"><span class="linenos"> 819</span></a>    <span class="k">def</span> <span class="nf">retrieve_article</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-820"><a href="#ArticletovideoPlugin-820"><span class="linenos"> 820</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-821"><a href="#ArticletovideoPlugin-821"><span class="linenos"> 821</span></a><span class="sd">        Retrieves and extracts the text content of an article from a given URL.</span>
</span><span id="ArticletovideoPlugin-822"><a href="#ArticletovideoPlugin-822"><span class="linenos"> 822</span></a>
</span><span id="ArticletovideoPlugin-823"><a href="#ArticletovideoPlugin-823"><span class="linenos"> 823</span></a><span class="sd">        This method fetches the web page at the provided URL and extracts the</span>
</span><span id="ArticletovideoPlugin-824"><a href="#ArticletovideoPlugin-824"><span class="linenos"> 824</span></a><span class="sd">        text from the paragraph (`&lt;p&gt;`) tags.</span>
</span><span id="ArticletovideoPlugin-825"><a href="#ArticletovideoPlugin-825"><span class="linenos"> 825</span></a>
</span><span id="ArticletovideoPlugin-826"><a href="#ArticletovideoPlugin-826"><span class="linenos"> 826</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-827"><a href="#ArticletovideoPlugin-827"><span class="linenos"> 827</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-828"><a href="#ArticletovideoPlugin-828"><span class="linenos"> 828</span></a><span class="sd">        url : str</span>
</span><span id="ArticletovideoPlugin-829"><a href="#ArticletovideoPlugin-829"><span class="linenos"> 829</span></a><span class="sd">            The URL of the article to retrieve.</span>
</span><span id="ArticletovideoPlugin-830"><a href="#ArticletovideoPlugin-830"><span class="linenos"> 830</span></a>
</span><span id="ArticletovideoPlugin-831"><a href="#ArticletovideoPlugin-831"><span class="linenos"> 831</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin-832"><a href="#ArticletovideoPlugin-832"><span class="linenos"> 832</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin-833"><a href="#ArticletovideoPlugin-833"><span class="linenos"> 833</span></a><span class="sd">        str</span>
</span><span id="ArticletovideoPlugin-834"><a href="#ArticletovideoPlugin-834"><span class="linenos"> 834</span></a><span class="sd">            The extracted text content of the article.</span>
</span><span id="ArticletovideoPlugin-835"><a href="#ArticletovideoPlugin-835"><span class="linenos"> 835</span></a>
</span><span id="ArticletovideoPlugin-836"><a href="#ArticletovideoPlugin-836"><span class="linenos"> 836</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-837"><a href="#ArticletovideoPlugin-837"><span class="linenos"> 837</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-838"><a href="#ArticletovideoPlugin-838"><span class="linenos"> 838</span></a><span class="sd">        requests.exceptions.RequestException</span>
</span><span id="ArticletovideoPlugin-839"><a href="#ArticletovideoPlugin-839"><span class="linenos"> 839</span></a><span class="sd">            If there is an issue with the HTTP request.</span>
</span><span id="ArticletovideoPlugin-840"><a href="#ArticletovideoPlugin-840"><span class="linenos"> 840</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin-841"><a href="#ArticletovideoPlugin-841"><span class="linenos"> 841</span></a><span class="sd">            If the URL is invalid or the article content cannot be retrieved.</span>
</span><span id="ArticletovideoPlugin-842"><a href="#ArticletovideoPlugin-842"><span class="linenos"> 842</span></a>
</span><span id="ArticletovideoPlugin-843"><a href="#ArticletovideoPlugin-843"><span class="linenos"> 843</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-844"><a href="#ArticletovideoPlugin-844"><span class="linenos"> 844</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-845"><a href="#ArticletovideoPlugin-845"><span class="linenos"> 845</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-846"><a href="#ArticletovideoPlugin-846"><span class="linenos"> 846</span></a><span class="sd">        text = plugin.retrieve_article(&quot;https://example.com/article&quot;)</span>
</span><span id="ArticletovideoPlugin-847"><a href="#ArticletovideoPlugin-847"><span class="linenos"> 847</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-848"><a href="#ArticletovideoPlugin-848"><span class="linenos"> 848</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-849"><a href="#ArticletovideoPlugin-849"><span class="linenos"> 849</span></a>        <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-850"><a href="#ArticletovideoPlugin-850"><span class="linenos"> 850</span></a>        <span class="n">paragraphs</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-851"><a href="#ArticletovideoPlugin-851"><span class="linenos"> 851</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">paragraphs</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin-852"><a href="#ArticletovideoPlugin-852"><span class="linenos"> 852</span></a>
</span><span id="ArticletovideoPlugin-853"><a href="#ArticletovideoPlugin-853"><span class="linenos"> 853</span></a>    <span class="k">def</span> <span class="nf">translate_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">target_lang</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-854"><a href="#ArticletovideoPlugin-854"><span class="linenos"> 854</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-855"><a href="#ArticletovideoPlugin-855"><span class="linenos"> 855</span></a><span class="sd">        Translates the given text into the target language using a MarianMT model.</span>
</span><span id="ArticletovideoPlugin-856"><a href="#ArticletovideoPlugin-856"><span class="linenos"> 856</span></a>
</span><span id="ArticletovideoPlugin-857"><a href="#ArticletovideoPlugin-857"><span class="linenos"> 857</span></a><span class="sd">        This method translates text by splitting it into paragraphs and sentences,</span>
</span><span id="ArticletovideoPlugin-858"><a href="#ArticletovideoPlugin-858"><span class="linenos"> 858</span></a><span class="sd">        processing each individually, and then reassembling the translated text.</span>
</span><span id="ArticletovideoPlugin-859"><a href="#ArticletovideoPlugin-859"><span class="linenos"> 859</span></a><span class="sd">        Optionally, numbers in the text can be converted to words.</span>
</span><span id="ArticletovideoPlugin-860"><a href="#ArticletovideoPlugin-860"><span class="linenos"> 860</span></a>
</span><span id="ArticletovideoPlugin-861"><a href="#ArticletovideoPlugin-861"><span class="linenos"> 861</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-862"><a href="#ArticletovideoPlugin-862"><span class="linenos"> 862</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-863"><a href="#ArticletovideoPlugin-863"><span class="linenos"> 863</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin-864"><a href="#ArticletovideoPlugin-864"><span class="linenos"> 864</span></a><span class="sd">            The text to translate.</span>
</span><span id="ArticletovideoPlugin-865"><a href="#ArticletovideoPlugin-865"><span class="linenos"> 865</span></a><span class="sd">        target_lang : str</span>
</span><span id="ArticletovideoPlugin-866"><a href="#ArticletovideoPlugin-866"><span class="linenos"> 866</span></a><span class="sd">            The target language code (e.g., &#39;fr-fr&#39; for French).</span>
</span><span id="ArticletovideoPlugin-867"><a href="#ArticletovideoPlugin-867"><span class="linenos"> 867</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin-868"><a href="#ArticletovideoPlugin-868"><span class="linenos"> 868</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin-869"><a href="#ArticletovideoPlugin-869"><span class="linenos"> 869</span></a><span class="sd">            the plugin, such as whether to convert numbers to words.</span>
</span><span id="ArticletovideoPlugin-870"><a href="#ArticletovideoPlugin-870"><span class="linenos"> 870</span></a>
</span><span id="ArticletovideoPlugin-871"><a href="#ArticletovideoPlugin-871"><span class="linenos"> 871</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin-872"><a href="#ArticletovideoPlugin-872"><span class="linenos"> 872</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin-873"><a href="#ArticletovideoPlugin-873"><span class="linenos"> 873</span></a><span class="sd">        str</span>
</span><span id="ArticletovideoPlugin-874"><a href="#ArticletovideoPlugin-874"><span class="linenos"> 874</span></a><span class="sd">            The translated text.</span>
</span><span id="ArticletovideoPlugin-875"><a href="#ArticletovideoPlugin-875"><span class="linenos"> 875</span></a>
</span><span id="ArticletovideoPlugin-876"><a href="#ArticletovideoPlugin-876"><span class="linenos"> 876</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-877"><a href="#ArticletovideoPlugin-877"><span class="linenos"> 877</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-878"><a href="#ArticletovideoPlugin-878"><span class="linenos"> 878</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin-879"><a href="#ArticletovideoPlugin-879"><span class="linenos"> 879</span></a><span class="sd">            If the target language is not supported or translation fails.</span>
</span><span id="ArticletovideoPlugin-880"><a href="#ArticletovideoPlugin-880"><span class="linenos"> 880</span></a>
</span><span id="ArticletovideoPlugin-881"><a href="#ArticletovideoPlugin-881"><span class="linenos"> 881</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-882"><a href="#ArticletovideoPlugin-882"><span class="linenos"> 882</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-883"><a href="#ArticletovideoPlugin-883"><span class="linenos"> 883</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-884"><a href="#ArticletovideoPlugin-884"><span class="linenos"> 884</span></a><span class="sd">        translated_text = plugin.translate_text(&quot;Hello, world!&quot;, &quot;fr-fr&quot;, config)</span>
</span><span id="ArticletovideoPlugin-885"><a href="#ArticletovideoPlugin-885"><span class="linenos"> 885</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-886"><a href="#ArticletovideoPlugin-886"><span class="linenos"> 886</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">translator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-887"><a href="#ArticletovideoPlugin-887"><span class="linenos"> 887</span></a>            <span class="n">model_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Helsinki-NLP/opus-mt-en-</span><span class="si">{</span><span class="n">target_lang</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin-888"><a href="#ArticletovideoPlugin-888"><span class="linenos"> 888</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">translator</span> <span class="o">=</span> <span class="n">MarianMTModel</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-889"><a href="#ArticletovideoPlugin-889"><span class="linenos"> 889</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tokenizer</span> <span class="o">=</span> <span class="n">MarianTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-890"><a href="#ArticletovideoPlugin-890"><span class="linenos"> 890</span></a>
</span><span id="ArticletovideoPlugin-891"><a href="#ArticletovideoPlugin-891"><span class="linenos"> 891</span></a>        <span class="n">paragraphs</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-892"><a href="#ArticletovideoPlugin-892"><span class="linenos"> 892</span></a>        <span class="n">translated_paragraphs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin-893"><a href="#ArticletovideoPlugin-893"><span class="linenos"> 893</span></a>        <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-894"><a href="#ArticletovideoPlugin-894"><span class="linenos"> 894</span></a>
</span><span id="ArticletovideoPlugin-895"><a href="#ArticletovideoPlugin-895"><span class="linenos"> 895</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Traductions&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-896"><a href="#ArticletovideoPlugin-896"><span class="linenos"> 896</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;processing&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin-897"><a href="#ArticletovideoPlugin-897"><span class="linenos"> 897</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">paragraph</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-898"><a href="#ArticletovideoPlugin-898"><span class="linenos"> 898</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-899"><a href="#ArticletovideoPlugin-899"><span class="linenos"> 899</span></a>                <span class="n">sentences</span> <span class="o">=</span> <span class="n">paragraph</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;. &quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-900"><a href="#ArticletovideoPlugin-900"><span class="linenos"> 900</span></a>                <span class="n">translated_sentences</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin-901"><a href="#ArticletovideoPlugin-901"><span class="linenos"> 901</span></a>
</span><span id="ArticletovideoPlugin-902"><a href="#ArticletovideoPlugin-902"><span class="linenos"> 902</span></a>                <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-903"><a href="#ArticletovideoPlugin-903"><span class="linenos"> 903</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">sentence</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
</span><span id="ArticletovideoPlugin-904"><a href="#ArticletovideoPlugin-904"><span class="linenos"> 904</span></a>                        <span class="k">continue</span>
</span><span id="ArticletovideoPlugin-905"><a href="#ArticletovideoPlugin-905"><span class="linenos"> 905</span></a>
</span><span id="ArticletovideoPlugin-906"><a href="#ArticletovideoPlugin-906"><span class="linenos"> 906</span></a>                    <span class="n">inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenizer</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-907"><a href="#ArticletovideoPlugin-907"><span class="linenos"> 907</span></a>                        <span class="n">sentence</span><span class="p">,</span> <span class="n">return_tensors</span><span class="o">=</span><span class="s2">&quot;pt&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">truncation</span><span class="o">=</span><span class="kc">True</span>
</span><span id="ArticletovideoPlugin-908"><a href="#ArticletovideoPlugin-908"><span class="linenos"> 908</span></a>                    <span class="p">)</span>
</span><span id="ArticletovideoPlugin-909"><a href="#ArticletovideoPlugin-909"><span class="linenos"> 909</span></a>                    <span class="n">translated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-910"><a href="#ArticletovideoPlugin-910"><span class="linenos"> 910</span></a>                    <span class="n">translated_sentence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenizer</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-911"><a href="#ArticletovideoPlugin-911"><span class="linenos"> 911</span></a>                        <span class="n">translated</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">skip_special_tokens</span><span class="o">=</span><span class="kc">True</span>
</span><span id="ArticletovideoPlugin-912"><a href="#ArticletovideoPlugin-912"><span class="linenos"> 912</span></a>                    <span class="p">)</span>
</span><span id="ArticletovideoPlugin-913"><a href="#ArticletovideoPlugin-913"><span class="linenos"> 913</span></a>                    <span class="c1"># Convert numbers to words after translation</span>
</span><span id="ArticletovideoPlugin-914"><a href="#ArticletovideoPlugin-914"><span class="linenos"> 914</span></a>                    <span class="k">if</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;convert_numbers&quot;</span><span class="p">]:</span>
</span><span id="ArticletovideoPlugin-915"><a href="#ArticletovideoPlugin-915"><span class="linenos"> 915</span></a>                        <span class="n">translated_sentence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_numbers_to_words</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-916"><a href="#ArticletovideoPlugin-916"><span class="linenos"> 916</span></a>                            <span class="n">translated_sentence</span><span class="p">,</span> <span class="n">target_lang</span>
</span><span id="ArticletovideoPlugin-917"><a href="#ArticletovideoPlugin-917"><span class="linenos"> 917</span></a>                        <span class="p">)</span>
</span><span id="ArticletovideoPlugin-918"><a href="#ArticletovideoPlugin-918"><span class="linenos"> 918</span></a>                    <span class="n">truncated_sentence</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-919"><a href="#ArticletovideoPlugin-919"><span class="linenos"> 919</span></a>                        <span class="sa">r</span><span class="s2">&quot;[.\n]&quot;</span><span class="p">,</span> <span class="n">translated_sentence</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span>
</span><span id="ArticletovideoPlugin-920"><a href="#ArticletovideoPlugin-920"><span class="linenos"> 920</span></a>                    <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin-921"><a href="#ArticletovideoPlugin-921"><span class="linenos"> 921</span></a>                    <span class="n">translated_sentences</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">truncated_sentence</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-922"><a href="#ArticletovideoPlugin-922"><span class="linenos"> 922</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[1m</span><span class="se">\033</span><span class="s2">[31m</span><span class="si">{</span><span class="n">sentence</span><span class="si">}</span><span class="se">\033</span><span class="s2">[0m&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-923"><a href="#ArticletovideoPlugin-923"><span class="linenos"> 923</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="n">translated_sentence</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-924"><a href="#ArticletovideoPlugin-924"><span class="linenos"> 924</span></a>
</span><span id="ArticletovideoPlugin-925"><a href="#ArticletovideoPlugin-925"><span class="linenos"> 925</span></a>                <span class="n">translated_paragraph</span> <span class="o">=</span> <span class="s2">&quot;. &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">translated_sentences</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-926"><a href="#ArticletovideoPlugin-926"><span class="linenos"> 926</span></a>                <span class="n">translated_paragraphs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">translated_paragraph</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-927"><a href="#ArticletovideoPlugin-927"><span class="linenos"> 927</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-928"><a href="#ArticletovideoPlugin-928"><span class="linenos"> 928</span></a>
</span><span id="ArticletovideoPlugin-929"><a href="#ArticletovideoPlugin-929"><span class="linenos"> 929</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">translated_paragraphs</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-930"><a href="#ArticletovideoPlugin-930"><span class="linenos"> 930</span></a>
</span><span id="ArticletovideoPlugin-931"><a href="#ArticletovideoPlugin-931"><span class="linenos"> 931</span></a>    <span class="k">def</span> <span class="nf">translate_text_withllm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">target_lang</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-932"><a href="#ArticletovideoPlugin-932"><span class="linenos"> 932</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-933"><a href="#ArticletovideoPlugin-933"><span class="linenos"> 933</span></a><span class="sd">        Translates text into the target language using a language model (LLM).</span>
</span><span id="ArticletovideoPlugin-934"><a href="#ArticletovideoPlugin-934"><span class="linenos"> 934</span></a>
</span><span id="ArticletovideoPlugin-935"><a href="#ArticletovideoPlugin-935"><span class="linenos"> 935</span></a><span class="sd">        This method translates the given text into the specified target language</span>
</span><span id="ArticletovideoPlugin-936"><a href="#ArticletovideoPlugin-936"><span class="linenos"> 936</span></a><span class="sd">        by leveraging a language model (LLM). The translation includes converting</span>
</span><span id="ArticletovideoPlugin-937"><a href="#ArticletovideoPlugin-937"><span class="linenos"> 937</span></a><span class="sd">        numbers and percentages to words in the target language. The text is</span>
</span><span id="ArticletovideoPlugin-938"><a href="#ArticletovideoPlugin-938"><span class="linenos"> 938</span></a><span class="sd">        split into paragraphs, each translated separately, and the resulting</span>
</span><span id="ArticletovideoPlugin-939"><a href="#ArticletovideoPlugin-939"><span class="linenos"> 939</span></a><span class="sd">        translated paragraphs are then combined.</span>
</span><span id="ArticletovideoPlugin-940"><a href="#ArticletovideoPlugin-940"><span class="linenos"> 940</span></a>
</span><span id="ArticletovideoPlugin-941"><a href="#ArticletovideoPlugin-941"><span class="linenos"> 941</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-942"><a href="#ArticletovideoPlugin-942"><span class="linenos"> 942</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-943"><a href="#ArticletovideoPlugin-943"><span class="linenos"> 943</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin-944"><a href="#ArticletovideoPlugin-944"><span class="linenos"> 944</span></a><span class="sd">            The text to be translated.</span>
</span><span id="ArticletovideoPlugin-945"><a href="#ArticletovideoPlugin-945"><span class="linenos"> 945</span></a><span class="sd">        target_lang : str</span>
</span><span id="ArticletovideoPlugin-946"><a href="#ArticletovideoPlugin-946"><span class="linenos"> 946</span></a><span class="sd">            The target language code (e.g., &#39;fr&#39; for French, &#39;en&#39; for English).</span>
</span><span id="ArticletovideoPlugin-947"><a href="#ArticletovideoPlugin-947"><span class="linenos"> 947</span></a>
</span><span id="ArticletovideoPlugin-948"><a href="#ArticletovideoPlugin-948"><span class="linenos"> 948</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin-949"><a href="#ArticletovideoPlugin-949"><span class="linenos"> 949</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin-950"><a href="#ArticletovideoPlugin-950"><span class="linenos"> 950</span></a><span class="sd">        str</span>
</span><span id="ArticletovideoPlugin-951"><a href="#ArticletovideoPlugin-951"><span class="linenos"> 951</span></a><span class="sd">            The translated text, with numbers and percentages converted to words</span>
</span><span id="ArticletovideoPlugin-952"><a href="#ArticletovideoPlugin-952"><span class="linenos"> 952</span></a><span class="sd">            in the target language.</span>
</span><span id="ArticletovideoPlugin-953"><a href="#ArticletovideoPlugin-953"><span class="linenos"> 953</span></a>
</span><span id="ArticletovideoPlugin-954"><a href="#ArticletovideoPlugin-954"><span class="linenos"> 954</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-955"><a href="#ArticletovideoPlugin-955"><span class="linenos"> 955</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-956"><a href="#ArticletovideoPlugin-956"><span class="linenos"> 956</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin-957"><a href="#ArticletovideoPlugin-957"><span class="linenos"> 957</span></a><span class="sd">            If the translation fails or the language model returns an invalid response.</span>
</span><span id="ArticletovideoPlugin-958"><a href="#ArticletovideoPlugin-958"><span class="linenos"> 958</span></a>
</span><span id="ArticletovideoPlugin-959"><a href="#ArticletovideoPlugin-959"><span class="linenos"> 959</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-960"><a href="#ArticletovideoPlugin-960"><span class="linenos"> 960</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-961"><a href="#ArticletovideoPlugin-961"><span class="linenos"> 961</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-962"><a href="#ArticletovideoPlugin-962"><span class="linenos"> 962</span></a><span class="sd">        translated_text = plugin.translate_text_withllm(&quot;The price is 25.5%.&quot;, &quot;fr&quot;)</span>
</span><span id="ArticletovideoPlugin-963"><a href="#ArticletovideoPlugin-963"><span class="linenos"> 963</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-964"><a href="#ArticletovideoPlugin-964"><span class="linenos"> 964</span></a>        <span class="n">paragraphs</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-965"><a href="#ArticletovideoPlugin-965"><span class="linenos"> 965</span></a>        <span class="n">translated_paragraphs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin-966"><a href="#ArticletovideoPlugin-966"><span class="linenos"> 966</span></a>        <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-967"><a href="#ArticletovideoPlugin-967"><span class="linenos"> 967</span></a>
</span><span id="ArticletovideoPlugin-968"><a href="#ArticletovideoPlugin-968"><span class="linenos"> 968</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;translating&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin-969"><a href="#ArticletovideoPlugin-969"><span class="linenos"> 969</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">paragraph</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-970"><a href="#ArticletovideoPlugin-970"><span class="linenos"> 970</span></a>                <span class="n">sysprompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;You are a professional translator. Translate the given text from English to </span><span class="si">{</span><span class="n">target_lang</span><span class="si">}</span><span class="s2">. Maintain the original tone and style. Convert all numbers, including real numbers and percentages, to words in the target language. DO NOT ADD COMMENTS OR EXPLANATIONS.&quot;</span>
</span><span id="ArticletovideoPlugin-971"><a href="#ArticletovideoPlugin-971"><span class="linenos"> 971</span></a>                <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Translate the following text to </span><span class="si">{</span><span class="n">target_lang</span><span class="si">}</span><span class="s2">, converting all numbers and real numbers and percent sign to words, do not add any comment:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">paragraph</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin-972"><a href="#ArticletovideoPlugin-972"><span class="linenos"> 972</span></a>
</span><span id="ArticletovideoPlugin-973"><a href="#ArticletovideoPlugin-973"><span class="linenos"> 973</span></a>                <span class="n">ragllm_plugin</span> <span class="o">=</span> <span class="n">RagllmPlugin</span><span class="p">(</span><span class="s2">&quot;ragllm&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-974"><a href="#ArticletovideoPlugin-974"><span class="linenos"> 974</span></a>                <span class="n">translated_paragraph</span> <span class="o">=</span> <span class="n">ragllm_plugin</span><span class="o">.</span><span class="n">call_llm</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-975"><a href="#ArticletovideoPlugin-975"><span class="linenos"> 975</span></a>
</span><span id="ArticletovideoPlugin-976"><a href="#ArticletovideoPlugin-976"><span class="linenos"> 976</span></a>                <span class="n">truncated_paragraph</span> <span class="o">=</span> <span class="n">translated_paragraph</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin-977"><a href="#ArticletovideoPlugin-977"><span class="linenos"> 977</span></a>                <span class="n">translated_paragraphs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">truncated_paragraph</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-978"><a href="#ArticletovideoPlugin-978"><span class="linenos"> 978</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-979"><a href="#ArticletovideoPlugin-979"><span class="linenos"> 979</span></a>
</span><span id="ArticletovideoPlugin-980"><a href="#ArticletovideoPlugin-980"><span class="linenos"> 980</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">translated_paragraphs</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-981"><a href="#ArticletovideoPlugin-981"><span class="linenos"> 981</span></a>
</span><span id="ArticletovideoPlugin-982"><a href="#ArticletovideoPlugin-982"><span class="linenos"> 982</span></a>    <span class="k">def</span> <span class="nf">generate_and_edit_prompts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-983"><a href="#ArticletovideoPlugin-983"><span class="linenos"> 983</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-984"><a href="#ArticletovideoPlugin-984"><span class="linenos"> 984</span></a><span class="sd">        Generates and optionally edits image prompts based on the translated text.</span>
</span><span id="ArticletovideoPlugin-985"><a href="#ArticletovideoPlugin-985"><span class="linenos"> 985</span></a>
</span><span id="ArticletovideoPlugin-986"><a href="#ArticletovideoPlugin-986"><span class="linenos"> 986</span></a><span class="sd">        This method splits the text into segments, generates image prompts for</span>
</span><span id="ArticletovideoPlugin-987"><a href="#ArticletovideoPlugin-987"><span class="linenos"> 987</span></a><span class="sd">        each segment, and allows the user to edit these prompts.</span>
</span><span id="ArticletovideoPlugin-988"><a href="#ArticletovideoPlugin-988"><span class="linenos"> 988</span></a>
</span><span id="ArticletovideoPlugin-989"><a href="#ArticletovideoPlugin-989"><span class="linenos"> 989</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-990"><a href="#ArticletovideoPlugin-990"><span class="linenos"> 990</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-991"><a href="#ArticletovideoPlugin-991"><span class="linenos"> 991</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin-992"><a href="#ArticletovideoPlugin-992"><span class="linenos"> 992</span></a><span class="sd">            The translated text for which to generate image prompts.</span>
</span><span id="ArticletovideoPlugin-993"><a href="#ArticletovideoPlugin-993"><span class="linenos"> 993</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin-994"><a href="#ArticletovideoPlugin-994"><span class="linenos"> 994</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin-995"><a href="#ArticletovideoPlugin-995"><span class="linenos"> 995</span></a><span class="sd">            the plugin, such as the system prompt for generating image prompts.</span>
</span><span id="ArticletovideoPlugin-996"><a href="#ArticletovideoPlugin-996"><span class="linenos"> 996</span></a>
</span><span id="ArticletovideoPlugin-997"><a href="#ArticletovideoPlugin-997"><span class="linenos"> 997</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin-998"><a href="#ArticletovideoPlugin-998"><span class="linenos"> 998</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin-999"><a href="#ArticletovideoPlugin-999"><span class="linenos"> 999</span></a><span class="sd">        list of str</span>
</span><span id="ArticletovideoPlugin-1000"><a href="#ArticletovideoPlugin-1000"><span class="linenos">1000</span></a><span class="sd">            A list of generated (and possibly edited) image prompts.</span>
</span><span id="ArticletovideoPlugin-1001"><a href="#ArticletovideoPlugin-1001"><span class="linenos">1001</span></a>
</span><span id="ArticletovideoPlugin-1002"><a href="#ArticletovideoPlugin-1002"><span class="linenos">1002</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-1003"><a href="#ArticletovideoPlugin-1003"><span class="linenos">1003</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-1004"><a href="#ArticletovideoPlugin-1004"><span class="linenos">1004</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-1005"><a href="#ArticletovideoPlugin-1005"><span class="linenos">1005</span></a><span class="sd">        prompts = plugin.generate_and_edit_prompts(translated_text, config)</span>
</span><span id="ArticletovideoPlugin-1006"><a href="#ArticletovideoPlugin-1006"><span class="linenos">1006</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1007"><a href="#ArticletovideoPlugin-1007"><span class="linenos">1007</span></a>        <span class="n">split_by</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;split_by&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin-1008"><a href="#ArticletovideoPlugin-1008"><span class="linenos">1008</span></a>        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_segments</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1009"><a href="#ArticletovideoPlugin-1009"><span class="linenos">1009</span></a>
</span><span id="ArticletovideoPlugin-1010"><a href="#ArticletovideoPlugin-1010"><span class="linenos">1010</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generating_prompts&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin-1011"><a href="#ArticletovideoPlugin-1011"><span class="linenos">1011</span></a>            <span class="n">prompts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_all_image_prompts</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1012"><a href="#ArticletovideoPlugin-1012"><span class="linenos">1012</span></a>                <span class="n">segments</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;image_sysprompt&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin-1013"><a href="#ArticletovideoPlugin-1013"><span class="linenos">1013</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin-1014"><a href="#ArticletovideoPlugin-1014"><span class="linenos">1014</span></a>            <span class="k">return</span> <span class="n">prompts</span>
</span><span id="ArticletovideoPlugin-1015"><a href="#ArticletovideoPlugin-1015"><span class="linenos">1015</span></a>
</span><span id="ArticletovideoPlugin-1016"><a href="#ArticletovideoPlugin-1016"><span class="linenos">1016</span></a>    <span class="k">def</span> <span class="nf">display_prompts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompts</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1017"><a href="#ArticletovideoPlugin-1017"><span class="linenos">1017</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1018"><a href="#ArticletovideoPlugin-1018"><span class="linenos">1018</span></a><span class="sd">        Displays and allows editing of image prompts in the Streamlit interface.</span>
</span><span id="ArticletovideoPlugin-1019"><a href="#ArticletovideoPlugin-1019"><span class="linenos">1019</span></a>
</span><span id="ArticletovideoPlugin-1020"><a href="#ArticletovideoPlugin-1020"><span class="linenos">1020</span></a><span class="sd">        This method takes a list of image prompts, displays them in a text area</span>
</span><span id="ArticletovideoPlugin-1021"><a href="#ArticletovideoPlugin-1021"><span class="linenos">1021</span></a><span class="sd">        within the Streamlit interface, and allows the user to edit the prompts.</span>
</span><span id="ArticletovideoPlugin-1022"><a href="#ArticletovideoPlugin-1022"><span class="linenos">1022</span></a><span class="sd">        The edited prompts are then saved back into the session state for further</span>
</span><span id="ArticletovideoPlugin-1023"><a href="#ArticletovideoPlugin-1023"><span class="linenos">1023</span></a><span class="sd">        processing.</span>
</span><span id="ArticletovideoPlugin-1024"><a href="#ArticletovideoPlugin-1024"><span class="linenos">1024</span></a>
</span><span id="ArticletovideoPlugin-1025"><a href="#ArticletovideoPlugin-1025"><span class="linenos">1025</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-1026"><a href="#ArticletovideoPlugin-1026"><span class="linenos">1026</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-1027"><a href="#ArticletovideoPlugin-1027"><span class="linenos">1027</span></a><span class="sd">        prompts : list of str</span>
</span><span id="ArticletovideoPlugin-1028"><a href="#ArticletovideoPlugin-1028"><span class="linenos">1028</span></a><span class="sd">            A list of image prompts to be displayed and edited. Each prompt corresponds</span>
</span><span id="ArticletovideoPlugin-1029"><a href="#ArticletovideoPlugin-1029"><span class="linenos">1029</span></a><span class="sd">            to a specific segment of the text and is intended to guide the generation</span>
</span><span id="ArticletovideoPlugin-1030"><a href="#ArticletovideoPlugin-1030"><span class="linenos">1030</span></a><span class="sd">            of an image.</span>
</span><span id="ArticletovideoPlugin-1031"><a href="#ArticletovideoPlugin-1031"><span class="linenos">1031</span></a>
</span><span id="ArticletovideoPlugin-1032"><a href="#ArticletovideoPlugin-1032"><span class="linenos">1032</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-1033"><a href="#ArticletovideoPlugin-1033"><span class="linenos">1033</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-1034"><a href="#ArticletovideoPlugin-1034"><span class="linenos">1034</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-1035"><a href="#ArticletovideoPlugin-1035"><span class="linenos">1035</span></a><span class="sd">        prompts = [&quot;A sunny day at the beach.&quot;, &quot;A crowded market in the city.&quot;]</span>
</span><span id="ArticletovideoPlugin-1036"><a href="#ArticletovideoPlugin-1036"><span class="linenos">1036</span></a><span class="sd">        plugin.display_prompts(prompts)</span>
</span><span id="ArticletovideoPlugin-1037"><a href="#ArticletovideoPlugin-1037"><span class="linenos">1037</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1038"><a href="#ArticletovideoPlugin-1038"><span class="linenos">1038</span></a>        <span class="n">prompts_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prompts</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1039"><a href="#ArticletovideoPlugin-1039"><span class="linenos">1039</span></a>        <span class="n">edited_prompts</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_area</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1040"><a href="#ArticletovideoPlugin-1040"><span class="linenos">1040</span></a>            <span class="n">t</span><span class="p">(</span><span class="s2">&quot;edit_prompts&quot;</span><span class="p">),</span> <span class="n">prompts_text</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;edit_prompts_text_area&quot;</span>
</span><span id="ArticletovideoPlugin-1041"><a href="#ArticletovideoPlugin-1041"><span class="linenos">1041</span></a>        <span class="p">)</span>
</span><span id="ArticletovideoPlugin-1042"><a href="#ArticletovideoPlugin-1042"><span class="linenos">1042</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span> <span class="o">=</span> <span class="n">edited_prompts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1043"><a href="#ArticletovideoPlugin-1043"><span class="linenos">1043</span></a>
</span><span id="ArticletovideoPlugin-1044"><a href="#ArticletovideoPlugin-1044"><span class="linenos">1044</span></a>    <span class="k">def</span> <span class="nf">generate_all_images</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">prompts</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1045"><a href="#ArticletovideoPlugin-1045"><span class="linenos">1045</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1046"><a href="#ArticletovideoPlugin-1046"><span class="linenos">1046</span></a><span class="sd">        Generates all images and audio files for the provided text and prompts.</span>
</span><span id="ArticletovideoPlugin-1047"><a href="#ArticletovideoPlugin-1047"><span class="linenos">1047</span></a>
</span><span id="ArticletovideoPlugin-1048"><a href="#ArticletovideoPlugin-1048"><span class="linenos">1048</span></a><span class="sd">        This method processes the text by splitting it into segments, generates</span>
</span><span id="ArticletovideoPlugin-1049"><a href="#ArticletovideoPlugin-1049"><span class="linenos">1049</span></a><span class="sd">        corresponding audio files using the configured TTS model, and creates</span>
</span><span id="ArticletovideoPlugin-1050"><a href="#ArticletovideoPlugin-1050"><span class="linenos">1050</span></a><span class="sd">        images based on the provided prompts.</span>
</span><span id="ArticletovideoPlugin-1051"><a href="#ArticletovideoPlugin-1051"><span class="linenos">1051</span></a>
</span><span id="ArticletovideoPlugin-1052"><a href="#ArticletovideoPlugin-1052"><span class="linenos">1052</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-1053"><a href="#ArticletovideoPlugin-1053"><span class="linenos">1053</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-1054"><a href="#ArticletovideoPlugin-1054"><span class="linenos">1054</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin-1055"><a href="#ArticletovideoPlugin-1055"><span class="linenos">1055</span></a><span class="sd">            The text to be used for generating audio and images.</span>
</span><span id="ArticletovideoPlugin-1056"><a href="#ArticletovideoPlugin-1056"><span class="linenos">1056</span></a><span class="sd">        prompts : list of str</span>
</span><span id="ArticletovideoPlugin-1057"><a href="#ArticletovideoPlugin-1057"><span class="linenos">1057</span></a><span class="sd">            The prompts to be used for generating images.</span>
</span><span id="ArticletovideoPlugin-1058"><a href="#ArticletovideoPlugin-1058"><span class="linenos">1058</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin-1059"><a href="#ArticletovideoPlugin-1059"><span class="linenos">1059</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin-1060"><a href="#ArticletovideoPlugin-1060"><span class="linenos">1060</span></a><span class="sd">            the plugin, such as the output directory, TTS model, and other parameters.</span>
</span><span id="ArticletovideoPlugin-1061"><a href="#ArticletovideoPlugin-1061"><span class="linenos">1061</span></a>
</span><span id="ArticletovideoPlugin-1062"><a href="#ArticletovideoPlugin-1062"><span class="linenos">1062</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-1063"><a href="#ArticletovideoPlugin-1063"><span class="linenos">1063</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-1064"><a href="#ArticletovideoPlugin-1064"><span class="linenos">1064</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin-1065"><a href="#ArticletovideoPlugin-1065"><span class="linenos">1065</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="ArticletovideoPlugin-1066"><a href="#ArticletovideoPlugin-1066"><span class="linenos">1066</span></a>
</span><span id="ArticletovideoPlugin-1067"><a href="#ArticletovideoPlugin-1067"><span class="linenos">1067</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-1068"><a href="#ArticletovideoPlugin-1068"><span class="linenos">1068</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-1069"><a href="#ArticletovideoPlugin-1069"><span class="linenos">1069</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-1070"><a href="#ArticletovideoPlugin-1070"><span class="linenos">1070</span></a><span class="sd">        plugin.generate_all_images(translated_text, prompts, config)</span>
</span><span id="ArticletovideoPlugin-1071"><a href="#ArticletovideoPlugin-1071"><span class="linenos">1071</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1072"><a href="#ArticletovideoPlugin-1072"><span class="linenos">1072</span></a>        <span class="n">split_by</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;split_by&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin-1073"><a href="#ArticletovideoPlugin-1073"><span class="linenos">1073</span></a>        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_segments</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1074"><a href="#ArticletovideoPlugin-1074"><span class="linenos">1074</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin-1075"><a href="#ArticletovideoPlugin-1075"><span class="linenos">1075</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1076"><a href="#ArticletovideoPlugin-1076"><span class="linenos">1076</span></a>
</span><span id="ArticletovideoPlugin-1077"><a href="#ArticletovideoPlugin-1077"><span class="linenos">1077</span></a>        <span class="c1"># Generate audio</span>
</span><span id="ArticletovideoPlugin-1078"><a href="#ArticletovideoPlugin-1078"><span class="linenos">1078</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generating_audio&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin-1079"><a href="#ArticletovideoPlugin-1079"><span class="linenos">1079</span></a>            <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1080"><a href="#ArticletovideoPlugin-1080"><span class="linenos">1080</span></a>            <span class="n">audio_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin-1081"><a href="#ArticletovideoPlugin-1081"><span class="linenos">1081</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">segment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">segments</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1082"><a href="#ArticletovideoPlugin-1082"><span class="linenos">1082</span></a>                <span class="n">audio_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;audio_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.wav&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1083"><a href="#ArticletovideoPlugin-1083"><span class="linenos">1083</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_one_audio</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">audio_path</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1084"><a href="#ArticletovideoPlugin-1084"><span class="linenos">1084</span></a>                <span class="n">audio_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">audio_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1085"><a href="#ArticletovideoPlugin-1085"><span class="linenos">1085</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-1086"><a href="#ArticletovideoPlugin-1086"><span class="linenos">1086</span></a>
</span><span id="ArticletovideoPlugin-1087"><a href="#ArticletovideoPlugin-1087"><span class="linenos">1087</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unload_ollama_model</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin-1088"><a href="#ArticletovideoPlugin-1088"><span class="linenos">1088</span></a>        <span class="c1"># Generate images</span>
</span><span id="ArticletovideoPlugin-1089"><a href="#ArticletovideoPlugin-1089"><span class="linenos">1089</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generating_images&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin-1090"><a href="#ArticletovideoPlugin-1090"><span class="linenos">1090</span></a>            <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1091"><a href="#ArticletovideoPlugin-1091"><span class="linenos">1091</span></a>            <span class="n">image_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin-1092"><a href="#ArticletovideoPlugin-1092"><span class="linenos">1092</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">prompt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">prompts</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1093"><a href="#ArticletovideoPlugin-1093"><span class="linenos">1093</span></a>                <span class="n">image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.png&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1094"><a href="#ArticletovideoPlugin-1094"><span class="linenos">1094</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_image</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1095"><a href="#ArticletovideoPlugin-1095"><span class="linenos">1095</span></a>                <span class="n">image_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1096"><a href="#ArticletovideoPlugin-1096"><span class="linenos">1096</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">prompts</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-1097"><a href="#ArticletovideoPlugin-1097"><span class="linenos">1097</span></a>
</span><span id="ArticletovideoPlugin-1098"><a href="#ArticletovideoPlugin-1098"><span class="linenos">1098</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span> <span class="o">=</span> <span class="n">audio_paths</span>
</span><span id="ArticletovideoPlugin-1099"><a href="#ArticletovideoPlugin-1099"><span class="linenos">1099</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span> <span class="o">=</span> <span class="n">image_paths</span>
</span><span id="ArticletovideoPlugin-1100"><a href="#ArticletovideoPlugin-1100"><span class="linenos">1100</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">prompts</span> <span class="o">=</span> <span class="n">prompts</span>
</span><span id="ArticletovideoPlugin-1101"><a href="#ArticletovideoPlugin-1101"><span class="linenos">1101</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">segments</span> <span class="o">=</span> <span class="n">segments</span>
</span><span id="ArticletovideoPlugin-1102"><a href="#ArticletovideoPlugin-1102"><span class="linenos">1102</span></a>
</span><span id="ArticletovideoPlugin-1103"><a href="#ArticletovideoPlugin-1103"><span class="linenos">1103</span></a>    <span class="k">def</span> <span class="nf">generate_one_audio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">output_path</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1104"><a href="#ArticletovideoPlugin-1104"><span class="linenos">1104</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1105"><a href="#ArticletovideoPlugin-1105"><span class="linenos">1105</span></a><span class="sd">        Generates an audio file from the provided text using the configured TTS model.</span>
</span><span id="ArticletovideoPlugin-1106"><a href="#ArticletovideoPlugin-1106"><span class="linenos">1106</span></a>
</span><span id="ArticletovideoPlugin-1107"><a href="#ArticletovideoPlugin-1107"><span class="linenos">1107</span></a><span class="sd">        This method converts the provided text into speech and saves the audio file</span>
</span><span id="ArticletovideoPlugin-1108"><a href="#ArticletovideoPlugin-1108"><span class="linenos">1108</span></a><span class="sd">        at the specified output path.</span>
</span><span id="ArticletovideoPlugin-1109"><a href="#ArticletovideoPlugin-1109"><span class="linenos">1109</span></a>
</span><span id="ArticletovideoPlugin-1110"><a href="#ArticletovideoPlugin-1110"><span class="linenos">1110</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-1111"><a href="#ArticletovideoPlugin-1111"><span class="linenos">1111</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-1112"><a href="#ArticletovideoPlugin-1112"><span class="linenos">1112</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin-1113"><a href="#ArticletovideoPlugin-1113"><span class="linenos">1113</span></a><span class="sd">            The text to convert into speech.</span>
</span><span id="ArticletovideoPlugin-1114"><a href="#ArticletovideoPlugin-1114"><span class="linenos">1114</span></a><span class="sd">        output_path : str</span>
</span><span id="ArticletovideoPlugin-1115"><a href="#ArticletovideoPlugin-1115"><span class="linenos">1115</span></a><span class="sd">            The file path where the generated audio file will be saved.</span>
</span><span id="ArticletovideoPlugin-1116"><a href="#ArticletovideoPlugin-1116"><span class="linenos">1116</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin-1117"><a href="#ArticletovideoPlugin-1117"><span class="linenos">1117</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin-1118"><a href="#ArticletovideoPlugin-1118"><span class="linenos">1118</span></a><span class="sd">            the plugin, such as the TTS model and other parameters.</span>
</span><span id="ArticletovideoPlugin-1119"><a href="#ArticletovideoPlugin-1119"><span class="linenos">1119</span></a>
</span><span id="ArticletovideoPlugin-1120"><a href="#ArticletovideoPlugin-1120"><span class="linenos">1120</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-1121"><a href="#ArticletovideoPlugin-1121"><span class="linenos">1121</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-1122"><a href="#ArticletovideoPlugin-1122"><span class="linenos">1122</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin-1123"><a href="#ArticletovideoPlugin-1123"><span class="linenos">1123</span></a><span class="sd">            If the specified TTS model is not supported.</span>
</span><span id="ArticletovideoPlugin-1124"><a href="#ArticletovideoPlugin-1124"><span class="linenos">1124</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin-1125"><a href="#ArticletovideoPlugin-1125"><span class="linenos">1125</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="ArticletovideoPlugin-1126"><a href="#ArticletovideoPlugin-1126"><span class="linenos">1126</span></a>
</span><span id="ArticletovideoPlugin-1127"><a href="#ArticletovideoPlugin-1127"><span class="linenos">1127</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-1128"><a href="#ArticletovideoPlugin-1128"><span class="linenos">1128</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-1129"><a href="#ArticletovideoPlugin-1129"><span class="linenos">1129</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-1130"><a href="#ArticletovideoPlugin-1130"><span class="linenos">1130</span></a><span class="sd">        plugin.generate_one_audio(&quot;Bonjour tout le monde.&quot;, &quot;~/output/audio_0.wav&quot;, config)</span>
</span><span id="ArticletovideoPlugin-1131"><a href="#ArticletovideoPlugin-1131"><span class="linenos">1131</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1132"><a href="#ArticletovideoPlugin-1132"><span class="linenos">1132</span></a>        <span class="c1"># https://theroamingworkshop.cloud/b/en/2425/%F0%9F%90%B8coqui-ai-tts-ultra-fast-voice-generation-and-cloning-from-multilingual-text/</span>
</span><span id="ArticletovideoPlugin-1133"><a href="#ArticletovideoPlugin-1133"><span class="linenos">1133</span></a>        <span class="n">tts_model</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_model&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin-1134"><a href="#ArticletovideoPlugin-1134"><span class="linenos">1134</span></a>        <span class="n">target_lang</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;target_language&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin-1135"><a href="#ArticletovideoPlugin-1135"><span class="linenos">1135</span></a>
</span><span id="ArticletovideoPlugin-1136"><a href="#ArticletovideoPlugin-1136"><span class="linenos">1136</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;COQUI_TTS_CACHE_DIR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1137"><a href="#ArticletovideoPlugin-1137"><span class="linenos">1137</span></a>            <span class="s2">&quot;~/.cache/coqui&quot;</span>
</span><span id="ArticletovideoPlugin-1138"><a href="#ArticletovideoPlugin-1138"><span class="linenos">1138</span></a>        <span class="p">)</span>  <span class="c1"># https://github.com/coqui-ai/TTS/issues/3608</span>
</span><span id="ArticletovideoPlugin-1139"><a href="#ArticletovideoPlugin-1139"><span class="linenos">1139</span></a>
</span><span id="ArticletovideoPlugin-1140"><a href="#ArticletovideoPlugin-1140"><span class="linenos">1140</span></a>        <span class="k">if</span> <span class="n">tts_model</span> <span class="o">==</span> <span class="s2">&quot;your_tts&quot;</span><span class="p">:</span>  <span class="c1"># fast but not best quality</span>
</span><span id="ArticletovideoPlugin-1141"><a href="#ArticletovideoPlugin-1141"><span class="linenos">1141</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1142"><a href="#ArticletovideoPlugin-1142"><span class="linenos">1142</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="n">TTS</span><span class="p">(</span><span class="s2">&quot;tts_models/multilingual/multi-dataset/your_tts&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1143"><a href="#ArticletovideoPlugin-1143"><span class="linenos">1143</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span><span class="o">.</span><span class="n">tts_to_file</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1144"><a href="#ArticletovideoPlugin-1144"><span class="linenos">1144</span></a>                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1145"><a href="#ArticletovideoPlugin-1145"><span class="linenos">1145</span></a>                <span class="n">file_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1146"><a href="#ArticletovideoPlugin-1146"><span class="linenos">1146</span></a>                <span class="n">speaker_wav</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">]),</span>
</span><span id="ArticletovideoPlugin-1147"><a href="#ArticletovideoPlugin-1147"><span class="linenos">1147</span></a>                <span class="n">language</span><span class="o">=</span><span class="n">target_lang</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1148"><a href="#ArticletovideoPlugin-1148"><span class="linenos">1148</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin-1149"><a href="#ArticletovideoPlugin-1149"><span class="linenos">1149</span></a>        <span class="k">elif</span> <span class="n">tts_model</span> <span class="o">==</span> <span class="s2">&quot;xtts_v2&quot;</span><span class="p">:</span>  <span class="c1"># best quality but very slow</span>
</span><span id="ArticletovideoPlugin-1150"><a href="#ArticletovideoPlugin-1150"><span class="linenos">1150</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1151"><a href="#ArticletovideoPlugin-1151"><span class="linenos">1151</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="n">TTS</span><span class="p">(</span><span class="s2">&quot;tts_models/multilingual/multi-dataset/xtts_v2&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1152"><a href="#ArticletovideoPlugin-1152"><span class="linenos">1152</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span><span class="o">.</span><span class="n">tts_to_file</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1153"><a href="#ArticletovideoPlugin-1153"><span class="linenos">1153</span></a>                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1154"><a href="#ArticletovideoPlugin-1154"><span class="linenos">1154</span></a>                <span class="n">file_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1155"><a href="#ArticletovideoPlugin-1155"><span class="linenos">1155</span></a>                <span class="n">speaker_wav</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">]),</span>
</span><span id="ArticletovideoPlugin-1156"><a href="#ArticletovideoPlugin-1156"><span class="linenos">1156</span></a>                <span class="n">language</span><span class="o">=</span><span class="n">target_lang</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span>
</span><span id="ArticletovideoPlugin-1157"><a href="#ArticletovideoPlugin-1157"><span class="linenos">1157</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin-1158"><a href="#ArticletovideoPlugin-1158"><span class="linenos">1158</span></a>        <span class="k">elif</span> <span class="n">tts_model</span> <span class="o">==</span> <span class="s2">&quot;tacotron&quot;</span><span class="p">:</span>  <span class="c1"># not very good quality and predermined voice</span>
</span><span id="ArticletovideoPlugin-1159"><a href="#ArticletovideoPlugin-1159"><span class="linenos">1159</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1160"><a href="#ArticletovideoPlugin-1160"><span class="linenos">1160</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="n">TTS</span><span class="p">(</span><span class="s2">&quot;tts_models/fr/mai/tacotron2-DDC&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1161"><a href="#ArticletovideoPlugin-1161"><span class="linenos">1161</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span><span class="o">.</span><span class="n">tts_to_file</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1162"><a href="#ArticletovideoPlugin-1162"><span class="linenos">1162</span></a>                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1163"><a href="#ArticletovideoPlugin-1163"><span class="linenos">1163</span></a>                <span class="n">file_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1164"><a href="#ArticletovideoPlugin-1164"><span class="linenos">1164</span></a>                <span class="n">speaker_wav</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">]),</span>
</span><span id="ArticletovideoPlugin-1165"><a href="#ArticletovideoPlugin-1165"><span class="linenos">1165</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin-1166"><a href="#ArticletovideoPlugin-1166"><span class="linenos">1166</span></a>        <span class="k">elif</span> <span class="n">tts_model</span> <span class="o">==</span> <span class="s2">&quot;bark&quot;</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1167"><a href="#ArticletovideoPlugin-1167"><span class="linenos">1167</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1168"><a href="#ArticletovideoPlugin-1168"><span class="linenos">1168</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="n">TTS</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1169"><a href="#ArticletovideoPlugin-1169"><span class="linenos">1169</span></a>                    <span class="s2">&quot;tts_models/multilingual/multi-dataset/bark&quot;</span>
</span><span id="ArticletovideoPlugin-1170"><a href="#ArticletovideoPlugin-1170"><span class="linenos">1170</span></a>                <span class="p">)</span>  <span class="c1"># https://github.com/coqui-ai/TTS/issues/3567</span>
</span><span id="ArticletovideoPlugin-1171"><a href="#ArticletovideoPlugin-1171"><span class="linenos">1171</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span><span class="o">.</span><span class="n">tts_to_file</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1172"><a href="#ArticletovideoPlugin-1172"><span class="linenos">1172</span></a>                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1173"><a href="#ArticletovideoPlugin-1173"><span class="linenos">1173</span></a>                <span class="n">file_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1174"><a href="#ArticletovideoPlugin-1174"><span class="linenos">1174</span></a>                <span class="n">speaker_wav</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">]),</span>
</span><span id="ArticletovideoPlugin-1175"><a href="#ArticletovideoPlugin-1175"><span class="linenos">1175</span></a>                <span class="n">language</span><span class="o">=</span><span class="n">target_lang</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1176"><a href="#ArticletovideoPlugin-1176"><span class="linenos">1176</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin-1177"><a href="#ArticletovideoPlugin-1177"><span class="linenos">1177</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1178"><a href="#ArticletovideoPlugin-1178"><span class="linenos">1178</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported TTS model: </span><span class="si">{</span><span class="n">tts_model</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1179"><a href="#ArticletovideoPlugin-1179"><span class="linenos">1179</span></a>
</span><span id="ArticletovideoPlugin-1180"><a href="#ArticletovideoPlugin-1180"><span class="linenos">1180</span></a>    <span class="k">def</span> <span class="nf">split_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1181"><a href="#ArticletovideoPlugin-1181"><span class="linenos">1181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1182"><a href="#ArticletovideoPlugin-1182"><span class="linenos">1182</span></a><span class="sd">        Generates image prompts for each paragraph in the provided list.</span>
</span><span id="ArticletovideoPlugin-1183"><a href="#ArticletovideoPlugin-1183"><span class="linenos">1183</span></a>
</span><span id="ArticletovideoPlugin-1184"><a href="#ArticletovideoPlugin-1184"><span class="linenos">1184</span></a><span class="sd">        This method creates an image prompt for each paragraph by using a</span>
</span><span id="ArticletovideoPlugin-1185"><a href="#ArticletovideoPlugin-1185"><span class="linenos">1185</span></a><span class="sd">        language model and a system prompt to guide the generation process.</span>
</span><span id="ArticletovideoPlugin-1186"><a href="#ArticletovideoPlugin-1186"><span class="linenos">1186</span></a>
</span><span id="ArticletovideoPlugin-1187"><a href="#ArticletovideoPlugin-1187"><span class="linenos">1187</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-1188"><a href="#ArticletovideoPlugin-1188"><span class="linenos">1188</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-1189"><a href="#ArticletovideoPlugin-1189"><span class="linenos">1189</span></a><span class="sd">        paragraphs : list of str</span>
</span><span id="ArticletovideoPlugin-1190"><a href="#ArticletovideoPlugin-1190"><span class="linenos">1190</span></a><span class="sd">            A list of paragraphs for which to generate image prompts.</span>
</span><span id="ArticletovideoPlugin-1191"><a href="#ArticletovideoPlugin-1191"><span class="linenos">1191</span></a><span class="sd">        sysprompt : str</span>
</span><span id="ArticletovideoPlugin-1192"><a href="#ArticletovideoPlugin-1192"><span class="linenos">1192</span></a><span class="sd">            The system prompt guiding the generation of the image prompts.</span>
</span><span id="ArticletovideoPlugin-1193"><a href="#ArticletovideoPlugin-1193"><span class="linenos">1193</span></a>
</span><span id="ArticletovideoPlugin-1194"><a href="#ArticletovideoPlugin-1194"><span class="linenos">1194</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin-1195"><a href="#ArticletovideoPlugin-1195"><span class="linenos">1195</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin-1196"><a href="#ArticletovideoPlugin-1196"><span class="linenos">1196</span></a><span class="sd">        list of str</span>
</span><span id="ArticletovideoPlugin-1197"><a href="#ArticletovideoPlugin-1197"><span class="linenos">1197</span></a><span class="sd">            A list of generated image prompts corresponding to each paragraph.</span>
</span><span id="ArticletovideoPlugin-1198"><a href="#ArticletovideoPlugin-1198"><span class="linenos">1198</span></a>
</span><span id="ArticletovideoPlugin-1199"><a href="#ArticletovideoPlugin-1199"><span class="linenos">1199</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-1200"><a href="#ArticletovideoPlugin-1200"><span class="linenos">1200</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-1201"><a href="#ArticletovideoPlugin-1201"><span class="linenos">1201</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-1202"><a href="#ArticletovideoPlugin-1202"><span class="linenos">1202</span></a><span class="sd">        prompts = plugin.generate_all_image_prompts(paragraphs, sysprompt)</span>
</span><span id="ArticletovideoPlugin-1203"><a href="#ArticletovideoPlugin-1203"><span class="linenos">1203</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1204"><a href="#ArticletovideoPlugin-1204"><span class="linenos">1204</span></a>        <span class="k">if</span> <span class="n">split_by</span> <span class="o">==</span> <span class="s2">&quot;sentence&quot;</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1205"><a href="#ArticletovideoPlugin-1205"><span class="linenos">1205</span></a>            <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;. &quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1206"><a href="#ArticletovideoPlugin-1206"><span class="linenos">1206</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1207"><a href="#ArticletovideoPlugin-1207"><span class="linenos">1207</span></a>            <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1208"><a href="#ArticletovideoPlugin-1208"><span class="linenos">1208</span></a>
</span><span id="ArticletovideoPlugin-1209"><a href="#ArticletovideoPlugin-1209"><span class="linenos">1209</span></a>    <span class="k">def</span> <span class="nf">generate_all_image_prompts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paragraphs</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1210"><a href="#ArticletovideoPlugin-1210"><span class="linenos">1210</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1211"><a href="#ArticletovideoPlugin-1211"><span class="linenos">1211</span></a><span class="sd">        Generates image prompts for each paragraph in the provided list.</span>
</span><span id="ArticletovideoPlugin-1212"><a href="#ArticletovideoPlugin-1212"><span class="linenos">1212</span></a>
</span><span id="ArticletovideoPlugin-1213"><a href="#ArticletovideoPlugin-1213"><span class="linenos">1213</span></a><span class="sd">        This method iterates through a list of paragraphs and generates an image</span>
</span><span id="ArticletovideoPlugin-1214"><a href="#ArticletovideoPlugin-1214"><span class="linenos">1214</span></a><span class="sd">        prompt for each one using a specified system prompt. The prompts are</span>
</span><span id="ArticletovideoPlugin-1215"><a href="#ArticletovideoPlugin-1215"><span class="linenos">1215</span></a><span class="sd">        generated by calling a language model via the `RagllmPlugin`.</span>
</span><span id="ArticletovideoPlugin-1216"><a href="#ArticletovideoPlugin-1216"><span class="linenos">1216</span></a>
</span><span id="ArticletovideoPlugin-1217"><a href="#ArticletovideoPlugin-1217"><span class="linenos">1217</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-1218"><a href="#ArticletovideoPlugin-1218"><span class="linenos">1218</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-1219"><a href="#ArticletovideoPlugin-1219"><span class="linenos">1219</span></a><span class="sd">        paragraphs : list of str</span>
</span><span id="ArticletovideoPlugin-1220"><a href="#ArticletovideoPlugin-1220"><span class="linenos">1220</span></a><span class="sd">            A list of paragraphs for which to generate image prompts. Each paragraph</span>
</span><span id="ArticletovideoPlugin-1221"><a href="#ArticletovideoPlugin-1221"><span class="linenos">1221</span></a><span class="sd">            represents a segment of the translated text.</span>
</span><span id="ArticletovideoPlugin-1222"><a href="#ArticletovideoPlugin-1222"><span class="linenos">1222</span></a><span class="sd">        sysprompt : str</span>
</span><span id="ArticletovideoPlugin-1223"><a href="#ArticletovideoPlugin-1223"><span class="linenos">1223</span></a><span class="sd">            The system prompt guiding the generation of the image prompts. This prompt</span>
</span><span id="ArticletovideoPlugin-1224"><a href="#ArticletovideoPlugin-1224"><span class="linenos">1224</span></a><span class="sd">            provides context or instructions for the language model to produce relevant</span>
</span><span id="ArticletovideoPlugin-1225"><a href="#ArticletovideoPlugin-1225"><span class="linenos">1225</span></a><span class="sd">            and descriptive image prompts.</span>
</span><span id="ArticletovideoPlugin-1226"><a href="#ArticletovideoPlugin-1226"><span class="linenos">1226</span></a>
</span><span id="ArticletovideoPlugin-1227"><a href="#ArticletovideoPlugin-1227"><span class="linenos">1227</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin-1228"><a href="#ArticletovideoPlugin-1228"><span class="linenos">1228</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin-1229"><a href="#ArticletovideoPlugin-1229"><span class="linenos">1229</span></a><span class="sd">        list of str</span>
</span><span id="ArticletovideoPlugin-1230"><a href="#ArticletovideoPlugin-1230"><span class="linenos">1230</span></a><span class="sd">            A list of generated image prompts corresponding to each paragraph in the</span>
</span><span id="ArticletovideoPlugin-1231"><a href="#ArticletovideoPlugin-1231"><span class="linenos">1231</span></a><span class="sd">            provided list. Each prompt is a textual description intended for generating</span>
</span><span id="ArticletovideoPlugin-1232"><a href="#ArticletovideoPlugin-1232"><span class="linenos">1232</span></a><span class="sd">            an image that visually represents the content of the paragraph.</span>
</span><span id="ArticletovideoPlugin-1233"><a href="#ArticletovideoPlugin-1233"><span class="linenos">1233</span></a>
</span><span id="ArticletovideoPlugin-1234"><a href="#ArticletovideoPlugin-1234"><span class="linenos">1234</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-1235"><a href="#ArticletovideoPlugin-1235"><span class="linenos">1235</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-1236"><a href="#ArticletovideoPlugin-1236"><span class="linenos">1236</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin-1237"><a href="#ArticletovideoPlugin-1237"><span class="linenos">1237</span></a><span class="sd">            If the `paragraphs` list is empty or if an error occurs during prompt generation.</span>
</span><span id="ArticletovideoPlugin-1238"><a href="#ArticletovideoPlugin-1238"><span class="linenos">1238</span></a>
</span><span id="ArticletovideoPlugin-1239"><a href="#ArticletovideoPlugin-1239"><span class="linenos">1239</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-1240"><a href="#ArticletovideoPlugin-1240"><span class="linenos">1240</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-1241"><a href="#ArticletovideoPlugin-1241"><span class="linenos">1241</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-1242"><a href="#ArticletovideoPlugin-1242"><span class="linenos">1242</span></a><span class="sd">        paragraphs = [&quot;The sun rises over a tranquil beach.&quot;, &quot;A bustling city street at night.&quot;]</span>
</span><span id="ArticletovideoPlugin-1243"><a href="#ArticletovideoPlugin-1243"><span class="linenos">1243</span></a><span class="sd">        sysprompt = &quot;You are an AI tasked with generating image prompts. Each prompt should vividly describe a scene.&quot;</span>
</span><span id="ArticletovideoPlugin-1244"><a href="#ArticletovideoPlugin-1244"><span class="linenos">1244</span></a><span class="sd">        prompts = plugin.generate_all_image_prompts(paragraphs, sysprompt)</span>
</span><span id="ArticletovideoPlugin-1245"><a href="#ArticletovideoPlugin-1245"><span class="linenos">1245</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1246"><a href="#ArticletovideoPlugin-1246"><span class="linenos">1246</span></a>        <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1247"><a href="#ArticletovideoPlugin-1247"><span class="linenos">1247</span></a>        <span class="n">prompts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin-1248"><a href="#ArticletovideoPlugin-1248"><span class="linenos">1248</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">paragraph</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1249"><a href="#ArticletovideoPlugin-1249"><span class="linenos">1249</span></a>            <span class="n">prompt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_image_prompt</span><span class="p">(</span><span class="n">paragraph</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1250"><a href="#ArticletovideoPlugin-1250"><span class="linenos">1250</span></a>            <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1251"><a href="#ArticletovideoPlugin-1251"><span class="linenos">1251</span></a>            <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-1252"><a href="#ArticletovideoPlugin-1252"><span class="linenos">1252</span></a>        <span class="k">return</span> <span class="n">prompts</span>
</span><span id="ArticletovideoPlugin-1253"><a href="#ArticletovideoPlugin-1253"><span class="linenos">1253</span></a>
</span><span id="ArticletovideoPlugin-1254"><a href="#ArticletovideoPlugin-1254"><span class="linenos">1254</span></a>    <span class="k">def</span> <span class="nf">unload_ollama_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1255"><a href="#ArticletovideoPlugin-1255"><span class="linenos">1255</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1256"><a href="#ArticletovideoPlugin-1256"><span class="linenos">1256</span></a><span class="sd">        Unloads the currently loaded Ollama model to free resources.</span>
</span><span id="ArticletovideoPlugin-1257"><a href="#ArticletovideoPlugin-1257"><span class="linenos">1257</span></a>
</span><span id="ArticletovideoPlugin-1258"><a href="#ArticletovideoPlugin-1258"><span class="linenos">1258</span></a><span class="sd">        This method makes a dummy call to unload the model from memory,</span>
</span><span id="ArticletovideoPlugin-1259"><a href="#ArticletovideoPlugin-1259"><span class="linenos">1259</span></a><span class="sd">        preventing unnecessary resource consumption.</span>
</span><span id="ArticletovideoPlugin-1260"><a href="#ArticletovideoPlugin-1260"><span class="linenos">1260</span></a>
</span><span id="ArticletovideoPlugin-1261"><a href="#ArticletovideoPlugin-1261"><span class="linenos">1261</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-1262"><a href="#ArticletovideoPlugin-1262"><span class="linenos">1262</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-1263"><a href="#ArticletovideoPlugin-1263"><span class="linenos">1263</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-1264"><a href="#ArticletovideoPlugin-1264"><span class="linenos">1264</span></a><span class="sd">        plugin.unload_ollama_model()</span>
</span><span id="ArticletovideoPlugin-1265"><a href="#ArticletovideoPlugin-1265"><span class="linenos">1265</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1266"><a href="#ArticletovideoPlugin-1266"><span class="linenos">1266</span></a>        <span class="c1"># Effectuer un appel bidon à Ollama pour décharger le modèle</span>
</span><span id="ArticletovideoPlugin-1267"><a href="#ArticletovideoPlugin-1267"><span class="linenos">1267</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ragllm_plugin</span><span class="o">.</span><span class="n">free_llm</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin-1268"><a href="#ArticletovideoPlugin-1268"><span class="linenos">1268</span></a>
</span><span id="ArticletovideoPlugin-1269"><a href="#ArticletovideoPlugin-1269"><span class="linenos">1269</span></a>    <span class="k">def</span> <span class="nf">generate_image_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1270"><a href="#ArticletovideoPlugin-1270"><span class="linenos">1270</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1271"><a href="#ArticletovideoPlugin-1271"><span class="linenos">1271</span></a><span class="sd">        Generates an image prompt based on the provided text and system prompt.</span>
</span><span id="ArticletovideoPlugin-1272"><a href="#ArticletovideoPlugin-1272"><span class="linenos">1272</span></a>
</span><span id="ArticletovideoPlugin-1273"><a href="#ArticletovideoPlugin-1273"><span class="linenos">1273</span></a><span class="sd">        This method uses a language model to create an image prompt that describes</span>
</span><span id="ArticletovideoPlugin-1274"><a href="#ArticletovideoPlugin-1274"><span class="linenos">1274</span></a><span class="sd">        the visual content corresponding to the given text.</span>
</span><span id="ArticletovideoPlugin-1275"><a href="#ArticletovideoPlugin-1275"><span class="linenos">1275</span></a>
</span><span id="ArticletovideoPlugin-1276"><a href="#ArticletovideoPlugin-1276"><span class="linenos">1276</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-1277"><a href="#ArticletovideoPlugin-1277"><span class="linenos">1277</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-1278"><a href="#ArticletovideoPlugin-1278"><span class="linenos">1278</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin-1279"><a href="#ArticletovideoPlugin-1279"><span class="linenos">1279</span></a><span class="sd">            The text for which to generate an image prompt.</span>
</span><span id="ArticletovideoPlugin-1280"><a href="#ArticletovideoPlugin-1280"><span class="linenos">1280</span></a><span class="sd">        sysprompt : str</span>
</span><span id="ArticletovideoPlugin-1281"><a href="#ArticletovideoPlugin-1281"><span class="linenos">1281</span></a><span class="sd">            The system prompt guiding the generation of the image prompt.</span>
</span><span id="ArticletovideoPlugin-1282"><a href="#ArticletovideoPlugin-1282"><span class="linenos">1282</span></a>
</span><span id="ArticletovideoPlugin-1283"><a href="#ArticletovideoPlugin-1283"><span class="linenos">1283</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin-1284"><a href="#ArticletovideoPlugin-1284"><span class="linenos">1284</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin-1285"><a href="#ArticletovideoPlugin-1285"><span class="linenos">1285</span></a><span class="sd">        str</span>
</span><span id="ArticletovideoPlugin-1286"><a href="#ArticletovideoPlugin-1286"><span class="linenos">1286</span></a><span class="sd">            The generated image prompt.</span>
</span><span id="ArticletovideoPlugin-1287"><a href="#ArticletovideoPlugin-1287"><span class="linenos">1287</span></a>
</span><span id="ArticletovideoPlugin-1288"><a href="#ArticletovideoPlugin-1288"><span class="linenos">1288</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-1289"><a href="#ArticletovideoPlugin-1289"><span class="linenos">1289</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-1290"><a href="#ArticletovideoPlugin-1290"><span class="linenos">1290</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-1291"><a href="#ArticletovideoPlugin-1291"><span class="linenos">1291</span></a><span class="sd">        prompt = plugin.generate_image_prompt(&quot;A beautiful sunset over the ocean.&quot;, sysprompt)</span>
</span><span id="ArticletovideoPlugin-1292"><a href="#ArticletovideoPlugin-1292"><span class="linenos">1292</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1293"><a href="#ArticletovideoPlugin-1293"><span class="linenos">1293</span></a>        <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Create an image prompt, 77 word max. Describe, without commenting, just give the prompt for a scene that illustrate the following situation : </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin-1294"><a href="#ArticletovideoPlugin-1294"><span class="linenos">1294</span></a>        <span class="n">ragllm_plugin</span> <span class="o">=</span> <span class="n">RagllmPlugin</span><span class="p">(</span><span class="s2">&quot;ragllm&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1295"><a href="#ArticletovideoPlugin-1295"><span class="linenos">1295</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">ragllm_plugin</span><span class="o">.</span><span class="n">call_llm</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1296"><a href="#ArticletovideoPlugin-1296"><span class="linenos">1296</span></a>        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1297"><a href="#ArticletovideoPlugin-1297"><span class="linenos">1297</span></a>
</span><span id="ArticletovideoPlugin-1298"><a href="#ArticletovideoPlugin-1298"><span class="linenos">1298</span></a>    <span class="k">def</span> <span class="nf">generate_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompt</span><span class="p">,</span> <span class="n">output_path</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1299"><a href="#ArticletovideoPlugin-1299"><span class="linenos">1299</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1300"><a href="#ArticletovideoPlugin-1300"><span class="linenos">1300</span></a><span class="sd">        Generates an image from the provided prompt and saves it to the specified output path.</span>
</span><span id="ArticletovideoPlugin-1301"><a href="#ArticletovideoPlugin-1301"><span class="linenos">1301</span></a>
</span><span id="ArticletovideoPlugin-1302"><a href="#ArticletovideoPlugin-1302"><span class="linenos">1302</span></a><span class="sd">        This method uses the `ImggenPlugin` to create an image based on the given</span>
</span><span id="ArticletovideoPlugin-1303"><a href="#ArticletovideoPlugin-1303"><span class="linenos">1303</span></a><span class="sd">        textual prompt. The generated image is saved as a PNG file at the specified path.</span>
</span><span id="ArticletovideoPlugin-1304"><a href="#ArticletovideoPlugin-1304"><span class="linenos">1304</span></a>
</span><span id="ArticletovideoPlugin-1305"><a href="#ArticletovideoPlugin-1305"><span class="linenos">1305</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-1306"><a href="#ArticletovideoPlugin-1306"><span class="linenos">1306</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-1307"><a href="#ArticletovideoPlugin-1307"><span class="linenos">1307</span></a><span class="sd">        prompt : str</span>
</span><span id="ArticletovideoPlugin-1308"><a href="#ArticletovideoPlugin-1308"><span class="linenos">1308</span></a><span class="sd">            The prompt describing the content of the image to generate.</span>
</span><span id="ArticletovideoPlugin-1309"><a href="#ArticletovideoPlugin-1309"><span class="linenos">1309</span></a><span class="sd">        output_path : str</span>
</span><span id="ArticletovideoPlugin-1310"><a href="#ArticletovideoPlugin-1310"><span class="linenos">1310</span></a><span class="sd">            The file path where the generated image will be saved, typically ending in `.png`.</span>
</span><span id="ArticletovideoPlugin-1311"><a href="#ArticletovideoPlugin-1311"><span class="linenos">1311</span></a>
</span><span id="ArticletovideoPlugin-1312"><a href="#ArticletovideoPlugin-1312"><span class="linenos">1312</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-1313"><a href="#ArticletovideoPlugin-1313"><span class="linenos">1313</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-1314"><a href="#ArticletovideoPlugin-1314"><span class="linenos">1314</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin-1315"><a href="#ArticletovideoPlugin-1315"><span class="linenos">1315</span></a><span class="sd">            If the specified directory in `output_path` does not exist.</span>
</span><span id="ArticletovideoPlugin-1316"><a href="#ArticletovideoPlugin-1316"><span class="linenos">1316</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin-1317"><a href="#ArticletovideoPlugin-1317"><span class="linenos">1317</span></a><span class="sd">            If the image generation process fails or returns an invalid result.</span>
</span><span id="ArticletovideoPlugin-1318"><a href="#ArticletovideoPlugin-1318"><span class="linenos">1318</span></a>
</span><span id="ArticletovideoPlugin-1319"><a href="#ArticletovideoPlugin-1319"><span class="linenos">1319</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-1320"><a href="#ArticletovideoPlugin-1320"><span class="linenos">1320</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-1321"><a href="#ArticletovideoPlugin-1321"><span class="linenos">1321</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-1322"><a href="#ArticletovideoPlugin-1322"><span class="linenos">1322</span></a><span class="sd">        plugin.generate_image(&quot;A beautiful sunrise over the mountains&quot;, &quot;~/output/image_1.png&quot;)</span>
</span><span id="ArticletovideoPlugin-1323"><a href="#ArticletovideoPlugin-1323"><span class="linenos">1323</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1324"><a href="#ArticletovideoPlugin-1324"><span class="linenos">1324</span></a>        <span class="n">image</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">imggen_plugin</span><span class="o">.</span><span class="n">generate_image</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1325"><a href="#ArticletovideoPlugin-1325"><span class="linenos">1325</span></a>            <span class="kc">None</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1326"><a href="#ArticletovideoPlugin-1326"><span class="linenos">1326</span></a>            <span class="n">prompt</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1327"><a href="#ArticletovideoPlugin-1327"><span class="linenos">1327</span></a>            <span class="n">aspect_ratio</span><span class="o">=</span><span class="s2">&quot;16:9&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1328"><a href="#ArticletovideoPlugin-1328"><span class="linenos">1328</span></a>            <span class="n">remove_background</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1329"><a href="#ArticletovideoPlugin-1329"><span class="linenos">1329</span></a>            <span class="n">background_removal_method</span><span class="o">=</span><span class="s2">&quot;ai&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1330"><a href="#ArticletovideoPlugin-1330"><span class="linenos">1330</span></a>            <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1331"><a href="#ArticletovideoPlugin-1331"><span class="linenos">1331</span></a>            <span class="n">face</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1332"><a href="#ArticletovideoPlugin-1332"><span class="linenos">1332</span></a>            <span class="n">steps</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1333"><a href="#ArticletovideoPlugin-1333"><span class="linenos">1333</span></a>        <span class="p">)</span>
</span><span id="ArticletovideoPlugin-1334"><a href="#ArticletovideoPlugin-1334"><span class="linenos">1334</span></a>        <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1335"><a href="#ArticletovideoPlugin-1335"><span class="linenos">1335</span></a>
</span><span id="ArticletovideoPlugin-1336"><a href="#ArticletovideoPlugin-1336"><span class="linenos">1336</span></a>    <span class="k">def</span> <span class="nf">display_image_gallery</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1337"><a href="#ArticletovideoPlugin-1337"><span class="linenos">1337</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1338"><a href="#ArticletovideoPlugin-1338"><span class="linenos">1338</span></a><span class="sd">        Displays an image gallery in the Streamlit interface for editing and</span>
</span><span id="ArticletovideoPlugin-1339"><a href="#ArticletovideoPlugin-1339"><span class="linenos">1339</span></a><span class="sd">        replacing images.</span>
</span><span id="ArticletovideoPlugin-1340"><a href="#ArticletovideoPlugin-1340"><span class="linenos">1340</span></a>
</span><span id="ArticletovideoPlugin-1341"><a href="#ArticletovideoPlugin-1341"><span class="linenos">1341</span></a><span class="sd">        This method allows users to view generated images, edit the associated</span>
</span><span id="ArticletovideoPlugin-1342"><a href="#ArticletovideoPlugin-1342"><span class="linenos">1342</span></a><span class="sd">        prompts, and upload new images to replace the existing ones.</span>
</span><span id="ArticletovideoPlugin-1343"><a href="#ArticletovideoPlugin-1343"><span class="linenos">1343</span></a>
</span><span id="ArticletovideoPlugin-1344"><a href="#ArticletovideoPlugin-1344"><span class="linenos">1344</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-1345"><a href="#ArticletovideoPlugin-1345"><span class="linenos">1345</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-1346"><a href="#ArticletovideoPlugin-1346"><span class="linenos">1346</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-1347"><a href="#ArticletovideoPlugin-1347"><span class="linenos">1347</span></a><span class="sd">        plugin.display_image_gallery()</span>
</span><span id="ArticletovideoPlugin-1348"><a href="#ArticletovideoPlugin-1348"><span class="linenos">1348</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1349"><a href="#ArticletovideoPlugin-1349"><span class="linenos">1349</span></a>        <span class="n">image_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span>
</span><span id="ArticletovideoPlugin-1350"><a href="#ArticletovideoPlugin-1350"><span class="linenos">1350</span></a>        <span class="n">prompts</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">prompts</span>
</span><span id="ArticletovideoPlugin-1351"><a href="#ArticletovideoPlugin-1351"><span class="linenos">1351</span></a>        <span class="n">segments</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">segments</span>
</span><span id="ArticletovideoPlugin-1352"><a href="#ArticletovideoPlugin-1352"><span class="linenos">1352</span></a>
</span><span id="ArticletovideoPlugin-1353"><a href="#ArticletovideoPlugin-1353"><span class="linenos">1353</span></a>        <span class="n">cols</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1354"><a href="#ArticletovideoPlugin-1354"><span class="linenos">1354</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="n">prompt</span><span class="p">,</span> <span class="n">segment</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1355"><a href="#ArticletovideoPlugin-1355"><span class="linenos">1355</span></a>            <span class="nb">zip</span><span class="p">(</span><span class="n">image_paths</span><span class="p">,</span> <span class="n">prompts</span><span class="p">,</span> <span class="n">segments</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1356"><a href="#ArticletovideoPlugin-1356"><span class="linenos">1356</span></a>        <span class="p">):</span>
</span><span id="ArticletovideoPlugin-1357"><a href="#ArticletovideoPlugin-1357"><span class="linenos">1357</span></a>            <span class="k">with</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="mi">3</span><span class="p">]:</span>
</span><span id="ArticletovideoPlugin-1358"><a href="#ArticletovideoPlugin-1358"><span class="linenos">1358</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1359"><a href="#ArticletovideoPlugin-1359"><span class="linenos">1359</span></a>                <span class="n">new_prompt</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_area</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1360"><a href="#ArticletovideoPlugin-1360"><span class="linenos">1360</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">t</span><span class="p">(</span><span class="s1">&#39;image_prompt&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">prompt</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;prompt_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin-1361"><a href="#ArticletovideoPlugin-1361"><span class="linenos">1361</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin-1362"><a href="#ArticletovideoPlugin-1362"><span class="linenos">1362</span></a>                <span class="c1"># st.text_area(f&quot;{t(&#39;translated_text&#39;)} {i+1}&quot;, segment, key=f&quot;segment_{i}&quot;)</span>
</span><span id="ArticletovideoPlugin-1363"><a href="#ArticletovideoPlugin-1363"><span class="linenos">1363</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1364"><a href="#ArticletovideoPlugin-1364"><span class="linenos">1364</span></a>                    <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1365"><a href="#ArticletovideoPlugin-1365"><span class="linenos">1365</span></a><span class="s2">                    &lt;div style=&quot;border: 1px solid #e6e6e6; padding: 10px; width: 100%; height: 100px; overflow-y: scroll;&quot;&gt;</span>
</span><span id="ArticletovideoPlugin-1366"><a href="#ArticletovideoPlugin-1366"><span class="linenos">1366</span></a><span class="s2">                        </span><span class="si">{</span><span class="n">segment</span><span class="si">}</span>
</span><span id="ArticletovideoPlugin-1367"><a href="#ArticletovideoPlugin-1367"><span class="linenos">1367</span></a><span class="s2">                    &lt;/div&gt;</span>
</span><span id="ArticletovideoPlugin-1368"><a href="#ArticletovideoPlugin-1368"><span class="linenos">1368</span></a><span class="s2">                    &quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1369"><a href="#ArticletovideoPlugin-1369"><span class="linenos">1369</span></a>                    <span class="n">unsafe_allow_html</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1370"><a href="#ArticletovideoPlugin-1370"><span class="linenos">1370</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin-1371"><a href="#ArticletovideoPlugin-1371"><span class="linenos">1371</span></a>
</span><span id="ArticletovideoPlugin-1372"><a href="#ArticletovideoPlugin-1372"><span class="linenos">1372</span></a>                <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerate_image&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;regenerate_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1373"><a href="#ArticletovideoPlugin-1373"><span class="linenos">1373</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">regenerate_image</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">new_prompt</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1374"><a href="#ArticletovideoPlugin-1374"><span class="linenos">1374</span></a>                    <span class="n">st</span><span class="o">.</span><span class="n">rerun</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin-1375"><a href="#ArticletovideoPlugin-1375"><span class="linenos">1375</span></a>
</span><span id="ArticletovideoPlugin-1376"><a href="#ArticletovideoPlugin-1376"><span class="linenos">1376</span></a>                <span class="n">uploaded_file</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">file_uploader</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1377"><a href="#ArticletovideoPlugin-1377"><span class="linenos">1377</span></a>                    <span class="n">t</span><span class="p">(</span><span class="s2">&quot;upload_image&quot;</span><span class="p">),</span> <span class="nb">type</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="s2">&quot;jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;jpeg&quot;</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;upload_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin-1378"><a href="#ArticletovideoPlugin-1378"><span class="linenos">1378</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin-1379"><a href="#ArticletovideoPlugin-1379"><span class="linenos">1379</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="ArticletovideoPlugin-1380"><a href="#ArticletovideoPlugin-1380"><span class="linenos">1380</span></a>                    <span class="n">uploaded_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="ArticletovideoPlugin-1381"><a href="#ArticletovideoPlugin-1381"><span class="linenos">1381</span></a>                    <span class="ow">and</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">uploaded_file</span><span class="o">.</span><span class="n">name</span>
</span><span id="ArticletovideoPlugin-1382"><a href="#ArticletovideoPlugin-1382"><span class="linenos">1382</span></a>                <span class="p">):</span>
</span><span id="ArticletovideoPlugin-1383"><a href="#ArticletovideoPlugin-1383"><span class="linenos">1383</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">replace_image</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">uploaded_file</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1384"><a href="#ArticletovideoPlugin-1384"><span class="linenos">1384</span></a>                    <span class="n">st</span><span class="o">.</span><span class="n">rerun</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin-1385"><a href="#ArticletovideoPlugin-1385"><span class="linenos">1385</span></a>
</span><span id="ArticletovideoPlugin-1386"><a href="#ArticletovideoPlugin-1386"><span class="linenos">1386</span></a>    <span class="k">def</span> <span class="nf">regenerate_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">new_prompt</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1387"><a href="#ArticletovideoPlugin-1387"><span class="linenos">1387</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1388"><a href="#ArticletovideoPlugin-1388"><span class="linenos">1388</span></a><span class="sd">        Regenerates a single image based on a new prompt provided by the user.</span>
</span><span id="ArticletovideoPlugin-1389"><a href="#ArticletovideoPlugin-1389"><span class="linenos">1389</span></a>
</span><span id="ArticletovideoPlugin-1390"><a href="#ArticletovideoPlugin-1390"><span class="linenos">1390</span></a><span class="sd">        This method generates a new image using the updated prompt and</span>
</span><span id="ArticletovideoPlugin-1391"><a href="#ArticletovideoPlugin-1391"><span class="linenos">1391</span></a><span class="sd">        replaces the existing image with the new one.</span>
</span><span id="ArticletovideoPlugin-1392"><a href="#ArticletovideoPlugin-1392"><span class="linenos">1392</span></a>
</span><span id="ArticletovideoPlugin-1393"><a href="#ArticletovideoPlugin-1393"><span class="linenos">1393</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-1394"><a href="#ArticletovideoPlugin-1394"><span class="linenos">1394</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-1395"><a href="#ArticletovideoPlugin-1395"><span class="linenos">1395</span></a><span class="sd">        index : int</span>
</span><span id="ArticletovideoPlugin-1396"><a href="#ArticletovideoPlugin-1396"><span class="linenos">1396</span></a><span class="sd">            The index of the image to be regenerated in the list of image paths.</span>
</span><span id="ArticletovideoPlugin-1397"><a href="#ArticletovideoPlugin-1397"><span class="linenos">1397</span></a><span class="sd">        new_prompt : str</span>
</span><span id="ArticletovideoPlugin-1398"><a href="#ArticletovideoPlugin-1398"><span class="linenos">1398</span></a><span class="sd">            The new prompt to use for generating the image.</span>
</span><span id="ArticletovideoPlugin-1399"><a href="#ArticletovideoPlugin-1399"><span class="linenos">1399</span></a>
</span><span id="ArticletovideoPlugin-1400"><a href="#ArticletovideoPlugin-1400"><span class="linenos">1400</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-1401"><a href="#ArticletovideoPlugin-1401"><span class="linenos">1401</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-1402"><a href="#ArticletovideoPlugin-1402"><span class="linenos">1402</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin-1403"><a href="#ArticletovideoPlugin-1403"><span class="linenos">1403</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="ArticletovideoPlugin-1404"><a href="#ArticletovideoPlugin-1404"><span class="linenos">1404</span></a>
</span><span id="ArticletovideoPlugin-1405"><a href="#ArticletovideoPlugin-1405"><span class="linenos">1405</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-1406"><a href="#ArticletovideoPlugin-1406"><span class="linenos">1406</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-1407"><a href="#ArticletovideoPlugin-1407"><span class="linenos">1407</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-1408"><a href="#ArticletovideoPlugin-1408"><span class="linenos">1408</span></a><span class="sd">        plugin.regenerate_image(1, &quot;A serene beach at sunset.&quot;)</span>
</span><span id="ArticletovideoPlugin-1409"><a href="#ArticletovideoPlugin-1409"><span class="linenos">1409</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1410"><a href="#ArticletovideoPlugin-1410"><span class="linenos">1410</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin-1411"><a href="#ArticletovideoPlugin-1411"><span class="linenos">1411</span></a>        <span class="n">new_image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">_new.png&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1412"><a href="#ArticletovideoPlugin-1412"><span class="linenos">1412</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generate_image</span><span class="p">(</span><span class="n">new_prompt</span><span class="p">,</span> <span class="n">new_image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1413"><a href="#ArticletovideoPlugin-1413"><span class="linenos">1413</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_image_path</span>
</span><span id="ArticletovideoPlugin-1414"><a href="#ArticletovideoPlugin-1414"><span class="linenos">1414</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">prompts</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_prompt</span>
</span><span id="ArticletovideoPlugin-1415"><a href="#ArticletovideoPlugin-1415"><span class="linenos">1415</span></a>
</span><span id="ArticletovideoPlugin-1416"><a href="#ArticletovideoPlugin-1416"><span class="linenos">1416</span></a>    <span class="k">def</span> <span class="nf">replace_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">uploaded_file</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1417"><a href="#ArticletovideoPlugin-1417"><span class="linenos">1417</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1418"><a href="#ArticletovideoPlugin-1418"><span class="linenos">1418</span></a><span class="sd">        Replaces an existing image with a new one uploaded by the user.</span>
</span><span id="ArticletovideoPlugin-1419"><a href="#ArticletovideoPlugin-1419"><span class="linenos">1419</span></a>
</span><span id="ArticletovideoPlugin-1420"><a href="#ArticletovideoPlugin-1420"><span class="linenos">1420</span></a><span class="sd">        This method resizes the uploaded image to match the aspect ratio</span>
</span><span id="ArticletovideoPlugin-1421"><a href="#ArticletovideoPlugin-1421"><span class="linenos">1421</span></a><span class="sd">        of 16:9, converts it to RGB, and saves it as a PNG file.</span>
</span><span id="ArticletovideoPlugin-1422"><a href="#ArticletovideoPlugin-1422"><span class="linenos">1422</span></a>
</span><span id="ArticletovideoPlugin-1423"><a href="#ArticletovideoPlugin-1423"><span class="linenos">1423</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-1424"><a href="#ArticletovideoPlugin-1424"><span class="linenos">1424</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-1425"><a href="#ArticletovideoPlugin-1425"><span class="linenos">1425</span></a><span class="sd">        index : int</span>
</span><span id="ArticletovideoPlugin-1426"><a href="#ArticletovideoPlugin-1426"><span class="linenos">1426</span></a><span class="sd">            The index of the image to be replaced in the list of image paths.</span>
</span><span id="ArticletovideoPlugin-1427"><a href="#ArticletovideoPlugin-1427"><span class="linenos">1427</span></a><span class="sd">        uploaded_file : UploadedFile</span>
</span><span id="ArticletovideoPlugin-1428"><a href="#ArticletovideoPlugin-1428"><span class="linenos">1428</span></a><span class="sd">            The new image file uploaded by the user.</span>
</span><span id="ArticletovideoPlugin-1429"><a href="#ArticletovideoPlugin-1429"><span class="linenos">1429</span></a>
</span><span id="ArticletovideoPlugin-1430"><a href="#ArticletovideoPlugin-1430"><span class="linenos">1430</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-1431"><a href="#ArticletovideoPlugin-1431"><span class="linenos">1431</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-1432"><a href="#ArticletovideoPlugin-1432"><span class="linenos">1432</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin-1433"><a href="#ArticletovideoPlugin-1433"><span class="linenos">1433</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="ArticletovideoPlugin-1434"><a href="#ArticletovideoPlugin-1434"><span class="linenos">1434</span></a>
</span><span id="ArticletovideoPlugin-1435"><a href="#ArticletovideoPlugin-1435"><span class="linenos">1435</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-1436"><a href="#ArticletovideoPlugin-1436"><span class="linenos">1436</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-1437"><a href="#ArticletovideoPlugin-1437"><span class="linenos">1437</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-1438"><a href="#ArticletovideoPlugin-1438"><span class="linenos">1438</span></a><span class="sd">        plugin.replace_image(2, uploaded_file)</span>
</span><span id="ArticletovideoPlugin-1439"><a href="#ArticletovideoPlugin-1439"><span class="linenos">1439</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1440"><a href="#ArticletovideoPlugin-1440"><span class="linenos">1440</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">uploaded_file</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1441"><a href="#ArticletovideoPlugin-1441"><span class="linenos">1441</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;RGB&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1442"><a href="#ArticletovideoPlugin-1442"><span class="linenos">1442</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">1280</span><span class="p">,</span> <span class="mi">720</span><span class="p">),</span> <span class="n">Image</span><span class="o">.</span><span class="n">LANCZOS</span><span class="p">)</span>  <span class="c1"># Resize to 16:9 aspect ratio</span>
</span><span id="ArticletovideoPlugin-1443"><a href="#ArticletovideoPlugin-1443"><span class="linenos">1443</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin-1444"><a href="#ArticletovideoPlugin-1444"><span class="linenos">1444</span></a>        <span class="n">new_image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">_uploaded.png&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1445"><a href="#ArticletovideoPlugin-1445"><span class="linenos">1445</span></a>        <span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">new_image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1446"><a href="#ArticletovideoPlugin-1446"><span class="linenos">1446</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_image_path</span>
</span><span id="ArticletovideoPlugin-1447"><a href="#ArticletovideoPlugin-1447"><span class="linenos">1447</span></a>
</span><span id="ArticletovideoPlugin-1448"><a href="#ArticletovideoPlugin-1448"><span class="linenos">1448</span></a>    <span class="k">def</span> <span class="nf">assemble_final_video</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1449"><a href="#ArticletovideoPlugin-1449"><span class="linenos">1449</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">use_zoom_and_transitions</span><span class="p">,</span> <span class="n">audio_paths</span><span class="p">,</span> <span class="n">image_paths</span><span class="p">,</span> <span class="n">output_path</span>
</span><span id="ArticletovideoPlugin-1450"><a href="#ArticletovideoPlugin-1450"><span class="linenos">1450</span></a>    <span class="p">):</span>
</span><span id="ArticletovideoPlugin-1451"><a href="#ArticletovideoPlugin-1451"><span class="linenos">1451</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1452"><a href="#ArticletovideoPlugin-1452"><span class="linenos">1452</span></a><span class="sd">        Assembles the final video from the generated audio and image files.</span>
</span><span id="ArticletovideoPlugin-1453"><a href="#ArticletovideoPlugin-1453"><span class="linenos">1453</span></a>
</span><span id="ArticletovideoPlugin-1454"><a href="#ArticletovideoPlugin-1454"><span class="linenos">1454</span></a><span class="sd">        This method combines the audio and image files into a video, optionally</span>
</span><span id="ArticletovideoPlugin-1455"><a href="#ArticletovideoPlugin-1455"><span class="linenos">1455</span></a><span class="sd">        adding zoom and transition effects.</span>
</span><span id="ArticletovideoPlugin-1456"><a href="#ArticletovideoPlugin-1456"><span class="linenos">1456</span></a>
</span><span id="ArticletovideoPlugin-1457"><a href="#ArticletovideoPlugin-1457"><span class="linenos">1457</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin-1458"><a href="#ArticletovideoPlugin-1458"><span class="linenos">1458</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin-1459"><a href="#ArticletovideoPlugin-1459"><span class="linenos">1459</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin-1460"><a href="#ArticletovideoPlugin-1460"><span class="linenos">1460</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin-1461"><a href="#ArticletovideoPlugin-1461"><span class="linenos">1461</span></a><span class="sd">            the plugin, such as zoom factor, speed factor, etc.</span>
</span><span id="ArticletovideoPlugin-1462"><a href="#ArticletovideoPlugin-1462"><span class="linenos">1462</span></a><span class="sd">        use_zoom_and_transitions : bool</span>
</span><span id="ArticletovideoPlugin-1463"><a href="#ArticletovideoPlugin-1463"><span class="linenos">1463</span></a><span class="sd">            Whether to apply zoom and transition effects to the video.</span>
</span><span id="ArticletovideoPlugin-1464"><a href="#ArticletovideoPlugin-1464"><span class="linenos">1464</span></a><span class="sd">        audio_paths : list of str</span>
</span><span id="ArticletovideoPlugin-1465"><a href="#ArticletovideoPlugin-1465"><span class="linenos">1465</span></a><span class="sd">            A list of file paths to the generated audio files.</span>
</span><span id="ArticletovideoPlugin-1466"><a href="#ArticletovideoPlugin-1466"><span class="linenos">1466</span></a><span class="sd">        image_paths : list of str</span>
</span><span id="ArticletovideoPlugin-1467"><a href="#ArticletovideoPlugin-1467"><span class="linenos">1467</span></a><span class="sd">            A list of file paths to the generated image files.</span>
</span><span id="ArticletovideoPlugin-1468"><a href="#ArticletovideoPlugin-1468"><span class="linenos">1468</span></a><span class="sd">        output_path : str</span>
</span><span id="ArticletovideoPlugin-1469"><a href="#ArticletovideoPlugin-1469"><span class="linenos">1469</span></a><span class="sd">            The file path where the final video will be saved.</span>
</span><span id="ArticletovideoPlugin-1470"><a href="#ArticletovideoPlugin-1470"><span class="linenos">1470</span></a>
</span><span id="ArticletovideoPlugin-1471"><a href="#ArticletovideoPlugin-1471"><span class="linenos">1471</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin-1472"><a href="#ArticletovideoPlugin-1472"><span class="linenos">1472</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin-1473"><a href="#ArticletovideoPlugin-1473"><span class="linenos">1473</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin-1474"><a href="#ArticletovideoPlugin-1474"><span class="linenos">1474</span></a><span class="sd">            If the number of audio files does not match the number of image files.</span>
</span><span id="ArticletovideoPlugin-1475"><a href="#ArticletovideoPlugin-1475"><span class="linenos">1475</span></a>
</span><span id="ArticletovideoPlugin-1476"><a href="#ArticletovideoPlugin-1476"><span class="linenos">1476</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin-1477"><a href="#ArticletovideoPlugin-1477"><span class="linenos">1477</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin-1478"><a href="#ArticletovideoPlugin-1478"><span class="linenos">1478</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin-1479"><a href="#ArticletovideoPlugin-1479"><span class="linenos">1479</span></a><span class="sd">        config = plugin.get_config_fields()</span>
</span><span id="ArticletovideoPlugin-1480"><a href="#ArticletovideoPlugin-1480"><span class="linenos">1480</span></a><span class="sd">        plugin.assemble_final_video(config, True, audio_paths, image_paths, &quot;~/output/final_video.mp4&quot;)</span>
</span><span id="ArticletovideoPlugin-1481"><a href="#ArticletovideoPlugin-1481"><span class="linenos">1481</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin-1482"><a href="#ArticletovideoPlugin-1482"><span class="linenos">1482</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;creating_video&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin-1483"><a href="#ArticletovideoPlugin-1483"><span class="linenos">1483</span></a>            <span class="n">video_clips</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin-1484"><a href="#ArticletovideoPlugin-1484"><span class="linenos">1484</span></a>            <span class="k">for</span> <span class="n">audio_path</span><span class="p">,</span> <span class="n">image_path</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">audio_paths</span><span class="p">,</span> <span class="n">image_paths</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1485"><a href="#ArticletovideoPlugin-1485"><span class="linenos">1485</span></a>                <span class="n">audio_clip</span> <span class="o">=</span> <span class="n">AudioFileClip</span><span class="p">(</span><span class="n">audio_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1486"><a href="#ArticletovideoPlugin-1486"><span class="linenos">1486</span></a>                <span class="n">image_clip</span> <span class="o">=</span> <span class="n">ImageClip</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span><span class="o">.</span><span class="n">set_duration</span><span class="p">(</span><span class="n">audio_clip</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1487"><a href="#ArticletovideoPlugin-1487"><span class="linenos">1487</span></a>
</span><span id="ArticletovideoPlugin-1488"><a href="#ArticletovideoPlugin-1488"><span class="linenos">1488</span></a>                <span class="k">if</span> <span class="n">use_zoom_and_transitions</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1489"><a href="#ArticletovideoPlugin-1489"><span class="linenos">1489</span></a>                    <span class="n">zoom_factor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;zoom_factor&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin-1490"><a href="#ArticletovideoPlugin-1490"><span class="linenos">1490</span></a>                    <span class="n">speed_factor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;speed_factor&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin-1491"><a href="#ArticletovideoPlugin-1491"><span class="linenos">1491</span></a>
</span><span id="ArticletovideoPlugin-1492"><a href="#ArticletovideoPlugin-1492"><span class="linenos">1492</span></a>                    <span class="c1"># zoomed_clip = image_clip.resize(lambda t: 1 + zoom_factor * t) # simple zoom</span>
</span><span id="ArticletovideoPlugin-1493"><a href="#ArticletovideoPlugin-1493"><span class="linenos">1493</span></a>                    <span class="c1">#########</span>
</span><span id="ArticletovideoPlugin-1494"><a href="#ArticletovideoPlugin-1494"><span class="linenos">1494</span></a>                    <span class="k">def</span> <span class="nf">dynamic_zoom</span><span class="p">(</span><span class="n">get_frame</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1495"><a href="#ArticletovideoPlugin-1495"><span class="linenos">1495</span></a>                        <span class="c1"># Create a smooth, periodic motion for zoom</span>
</span><span id="ArticletovideoPlugin-1496"><a href="#ArticletovideoPlugin-1496"><span class="linenos">1496</span></a>                        <span class="n">zoom</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">zoom_factor</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">10</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="ArticletovideoPlugin-1497"><a href="#ArticletovideoPlugin-1497"><span class="linenos">1497</span></a>
</span><span id="ArticletovideoPlugin-1498"><a href="#ArticletovideoPlugin-1498"><span class="linenos">1498</span></a>                        <span class="c1"># Generate wandering motion</span>
</span><span id="ArticletovideoPlugin-1499"><a href="#ArticletovideoPlugin-1499"><span class="linenos">1499</span></a>                        <span class="n">x_shift</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="mf">3.0</span><span class="p">)</span> <span class="o">*</span> <span class="n">speed_factor</span>
</span><span id="ArticletovideoPlugin-1500"><a href="#ArticletovideoPlugin-1500"><span class="linenos">1500</span></a>                        <span class="n">y_shift</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="mf">2.4</span><span class="p">)</span> <span class="o">*</span> <span class="n">speed_factor</span>
</span><span id="ArticletovideoPlugin-1501"><a href="#ArticletovideoPlugin-1501"><span class="linenos">1501</span></a>
</span><span id="ArticletovideoPlugin-1502"><a href="#ArticletovideoPlugin-1502"><span class="linenos">1502</span></a>                        <span class="c1"># Create the transformation matrix</span>
</span><span id="ArticletovideoPlugin-1503"><a href="#ArticletovideoPlugin-1503"><span class="linenos">1503</span></a>                        <span class="n">center_x</span><span class="p">,</span> <span class="n">center_y</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">x_shift</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">y_shift</span>
</span><span id="ArticletovideoPlugin-1504"><a href="#ArticletovideoPlugin-1504"><span class="linenos">1504</span></a>                        <span class="n">matrix</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getRotationMatrix2D</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1505"><a href="#ArticletovideoPlugin-1505"><span class="linenos">1505</span></a>                            <span class="p">(</span><span class="n">center_x</span> <span class="o">*</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">w</span><span class="p">,</span> <span class="n">center_y</span> <span class="o">*</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">h</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">zoom</span>
</span><span id="ArticletovideoPlugin-1506"><a href="#ArticletovideoPlugin-1506"><span class="linenos">1506</span></a>                        <span class="p">)</span>
</span><span id="ArticletovideoPlugin-1507"><a href="#ArticletovideoPlugin-1507"><span class="linenos">1507</span></a>                        <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">-</span> <span class="n">center_x</span><span class="p">)</span> <span class="o">*</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">w</span>
</span><span id="ArticletovideoPlugin-1508"><a href="#ArticletovideoPlugin-1508"><span class="linenos">1508</span></a>                        <span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">-</span> <span class="n">center_y</span><span class="p">)</span> <span class="o">*</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">h</span>
</span><span id="ArticletovideoPlugin-1509"><a href="#ArticletovideoPlugin-1509"><span class="linenos">1509</span></a>
</span><span id="ArticletovideoPlugin-1510"><a href="#ArticletovideoPlugin-1510"><span class="linenos">1510</span></a>                        <span class="n">frame</span> <span class="o">=</span> <span class="n">get_frame</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1511"><a href="#ArticletovideoPlugin-1511"><span class="linenos">1511</span></a>                        <span class="k">return</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpAffine</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1512"><a href="#ArticletovideoPlugin-1512"><span class="linenos">1512</span></a>                            <span class="n">frame</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1513"><a href="#ArticletovideoPlugin-1513"><span class="linenos">1513</span></a>                            <span class="n">matrix</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1514"><a href="#ArticletovideoPlugin-1514"><span class="linenos">1514</span></a>                            <span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">frame</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="ArticletovideoPlugin-1515"><a href="#ArticletovideoPlugin-1515"><span class="linenos">1515</span></a>                            <span class="n">borderMode</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">BORDER_REFLECT_101</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1516"><a href="#ArticletovideoPlugin-1516"><span class="linenos">1516</span></a>                        <span class="p">)</span>
</span><span id="ArticletovideoPlugin-1517"><a href="#ArticletovideoPlugin-1517"><span class="linenos">1517</span></a>
</span><span id="ArticletovideoPlugin-1518"><a href="#ArticletovideoPlugin-1518"><span class="linenos">1518</span></a>                    <span class="n">zoomed_clip</span> <span class="o">=</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">fl</span><span class="p">(</span><span class="n">dynamic_zoom</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1519"><a href="#ArticletovideoPlugin-1519"><span class="linenos">1519</span></a>                    <span class="c1">#########</span>
</span><span id="ArticletovideoPlugin-1520"><a href="#ArticletovideoPlugin-1520"><span class="linenos">1520</span></a>                    <span class="n">video_clip</span> <span class="o">=</span> <span class="n">zoomed_clip</span><span class="o">.</span><span class="n">set_audio</span><span class="p">(</span><span class="n">audio_clip</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1521"><a href="#ArticletovideoPlugin-1521"><span class="linenos">1521</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1522"><a href="#ArticletovideoPlugin-1522"><span class="linenos">1522</span></a>                    <span class="n">video_clip</span> <span class="o">=</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">set_audio</span><span class="p">(</span><span class="n">audio_clip</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1523"><a href="#ArticletovideoPlugin-1523"><span class="linenos">1523</span></a>
</span><span id="ArticletovideoPlugin-1524"><a href="#ArticletovideoPlugin-1524"><span class="linenos">1524</span></a>                <span class="n">video_clips</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">video_clip</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1525"><a href="#ArticletovideoPlugin-1525"><span class="linenos">1525</span></a>
</span><span id="ArticletovideoPlugin-1526"><a href="#ArticletovideoPlugin-1526"><span class="linenos">1526</span></a>            <span class="k">if</span> <span class="n">use_zoom_and_transitions</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1527"><a href="#ArticletovideoPlugin-1527"><span class="linenos">1527</span></a>                <span class="n">final_clips</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin-1528"><a href="#ArticletovideoPlugin-1528"><span class="linenos">1528</span></a>                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">clip</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">video_clips</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin-1529"><a href="#ArticletovideoPlugin-1529"><span class="linenos">1529</span></a>                    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1530"><a href="#ArticletovideoPlugin-1530"><span class="linenos">1530</span></a>                        <span class="n">final_clips</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CompositeVideoClip</span><span class="p">([</span><span class="n">clip</span><span class="o">.</span><span class="n">crossfadein</span><span class="p">(</span><span class="mi">1</span><span class="p">)]))</span>
</span><span id="ArticletovideoPlugin-1531"><a href="#ArticletovideoPlugin-1531"><span class="linenos">1531</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1532"><a href="#ArticletovideoPlugin-1532"><span class="linenos">1532</span></a>                        <span class="n">final_clips</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clip</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1533"><a href="#ArticletovideoPlugin-1533"><span class="linenos">1533</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin-1534"><a href="#ArticletovideoPlugin-1534"><span class="linenos">1534</span></a>                <span class="n">final_clips</span> <span class="o">=</span> <span class="n">video_clips</span>
</span><span id="ArticletovideoPlugin-1535"><a href="#ArticletovideoPlugin-1535"><span class="linenos">1535</span></a>
</span><span id="ArticletovideoPlugin-1536"><a href="#ArticletovideoPlugin-1536"><span class="linenos">1536</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Concatenating video&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1537"><a href="#ArticletovideoPlugin-1537"><span class="linenos">1537</span></a>            <span class="n">final_video</span> <span class="o">=</span> <span class="n">concatenate_videoclips</span><span class="p">(</span><span class="n">final_clips</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;compose&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1538"><a href="#ArticletovideoPlugin-1538"><span class="linenos">1538</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Writing final video to file&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1539"><a href="#ArticletovideoPlugin-1539"><span class="linenos">1539</span></a>
</span><span id="ArticletovideoPlugin-1540"><a href="#ArticletovideoPlugin-1540"><span class="linenos">1540</span></a>            <span class="c1"># Create a progress container</span>
</span><span id="ArticletovideoPlugin-1541"><a href="#ArticletovideoPlugin-1541"><span class="linenos">1541</span></a>            <span class="n">progress_container</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin-1542"><a href="#ArticletovideoPlugin-1542"><span class="linenos">1542</span></a>
</span><span id="ArticletovideoPlugin-1543"><a href="#ArticletovideoPlugin-1543"><span class="linenos">1543</span></a>            <span class="c1"># Create a custom logger</span>
</span><span id="ArticletovideoPlugin-1544"><a href="#ArticletovideoPlugin-1544"><span class="linenos">1544</span></a>            <span class="n">logger</span> <span class="o">=</span> <span class="n">StreamlitProgressBarLogger</span><span class="p">(</span><span class="n">progress_container</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin-1545"><a href="#ArticletovideoPlugin-1545"><span class="linenos">1545</span></a>
</span><span id="ArticletovideoPlugin-1546"><a href="#ArticletovideoPlugin-1546"><span class="linenos">1546</span></a>            <span class="c1"># Write the video file with the custom logger</span>
</span><span id="ArticletovideoPlugin-1547"><a href="#ArticletovideoPlugin-1547"><span class="linenos">1547</span></a>            <span class="n">final_video</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin-1548"><a href="#ArticletovideoPlugin-1548"><span class="linenos">1548</span></a>                <span class="n">output_path</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1549"><a href="#ArticletovideoPlugin-1549"><span class="linenos">1549</span></a>                <span class="n">codec</span><span class="o">=</span><span class="s2">&quot;libx264&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1550"><a href="#ArticletovideoPlugin-1550"><span class="linenos">1550</span></a>                <span class="n">audio_codec</span><span class="o">=</span><span class="s2">&quot;aac&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1551"><a href="#ArticletovideoPlugin-1551"><span class="linenos">1551</span></a>                <span class="n">fps</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin-1552"><a href="#ArticletovideoPlugin-1552"><span class="linenos">1552</span></a>                <span class="c1"># logger=logger</span>
</span><span id="ArticletovideoPlugin-1553"><a href="#ArticletovideoPlugin-1553"><span class="linenos">1553</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin-1554"><a href="#ArticletovideoPlugin-1554"><span class="linenos">1554</span></a>
</span><span id="ArticletovideoPlugin-1555"><a href="#ArticletovideoPlugin-1555"><span class="linenos">1555</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;video_generated&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin-1556"><a href="#ArticletovideoPlugin-1556"><span class="linenos">1556</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">video</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A plugin that converts articles to videos, including translation,
text-to-speech (TTS), and image generation. The plugin supports both
detailed step-by-step processing and one-click video generation.</p>

<h2 id="parameters">Parameters</h2>

<p>name : str
    The name of the plugin.
plugin_manager : PluginManager
    The plugin manager that handles plugin lifecycle and dependencies.</p>

<h2 id="attributes">Attributes</h2>

<p>translator : MarianMTModel or None
    The machine translation model used to translate article text.
tts_model : TTS or None
    The text-to-speech model used to generate audio from text.
imggen_plugin : ImggenPlugin
    An instance of <code>ImggenPlugin</code> for generating images.
ragllm_plugin : RagllmPlugin
    An instance of <code>RagllmPlugin</code> for calling LLM (Language Models) for prompts.</p>

<h2 id="methods">Methods</h2>

<p>get_config_fields()
    Returns a dictionary defining the configurable fields for the plugin.</p>

<p>get_tabs()
    Returns the tabs for the plugin interface.</p>

<p>run(config)
    Main entry point for running the plugin within the Streamlit interface.</p>

<p>generate_video_one_click(url, config)
    Generates a video from an article URL using one-click mode.</p>

<p>scan_files(config)
    Scans the output directory for generated audio and image files.</p>

<p>assemble_final_video(config, use_zoom_and_transitions, audio_paths, image_paths, output_path)
    Assembles the final video from the generated audio and image files.</p>

<h2 id="examples">Examples</h2>

<h1 id="example-usage-within-a-streamlit-app">Example usage within a Streamlit app:</h1>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
config = plugin.get_config_fields()
plugin.run(config)</p>
</div>


                            <div id="ArticletovideoPlugin.__init__" class="classattr">
                                        <input id="ArticletovideoPlugin.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ArticletovideoPlugin</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">name</span>, </span><span class="param"><span class="n">plugin_manager</span></span>)</span>

                <label class="view-source-button" for="ArticletovideoPlugin.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.__init__-187"><a href="#ArticletovideoPlugin.__init__-187"><span class="linenos">187</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.__init__-188"><a href="#ArticletovideoPlugin.__init__-188"><span class="linenos">188</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.__init__-189"><a href="#ArticletovideoPlugin.__init__-189"><span class="linenos">189</span></a><span class="sd">        Initializes the ArticletovideoPlugin with a name and plugin manager.</span>
</span><span id="ArticletovideoPlugin.__init__-190"><a href="#ArticletovideoPlugin.__init__-190"><span class="linenos">190</span></a>
</span><span id="ArticletovideoPlugin.__init__-191"><a href="#ArticletovideoPlugin.__init__-191"><span class="linenos">191</span></a><span class="sd">        This constructor sets up the plugin by initializing its name and plugin manager,</span>
</span><span id="ArticletovideoPlugin.__init__-192"><a href="#ArticletovideoPlugin.__init__-192"><span class="linenos">192</span></a><span class="sd">        as well as creating instances of the `ImggenPlugin` and `RagllmPlugin` for</span>
</span><span id="ArticletovideoPlugin.__init__-193"><a href="#ArticletovideoPlugin.__init__-193"><span class="linenos">193</span></a><span class="sd">        image generation and language model interactions, respectively.</span>
</span><span id="ArticletovideoPlugin.__init__-194"><a href="#ArticletovideoPlugin.__init__-194"><span class="linenos">194</span></a>
</span><span id="ArticletovideoPlugin.__init__-195"><a href="#ArticletovideoPlugin.__init__-195"><span class="linenos">195</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.__init__-196"><a href="#ArticletovideoPlugin.__init__-196"><span class="linenos">196</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.__init__-197"><a href="#ArticletovideoPlugin.__init__-197"><span class="linenos">197</span></a><span class="sd">        name : str</span>
</span><span id="ArticletovideoPlugin.__init__-198"><a href="#ArticletovideoPlugin.__init__-198"><span class="linenos">198</span></a><span class="sd">            The name of the plugin, used for identification within the application.</span>
</span><span id="ArticletovideoPlugin.__init__-199"><a href="#ArticletovideoPlugin.__init__-199"><span class="linenos">199</span></a><span class="sd">        plugin_manager : PluginManager</span>
</span><span id="ArticletovideoPlugin.__init__-200"><a href="#ArticletovideoPlugin.__init__-200"><span class="linenos">200</span></a><span class="sd">            The plugin manager responsible for managing the lifecycle and dependencies</span>
</span><span id="ArticletovideoPlugin.__init__-201"><a href="#ArticletovideoPlugin.__init__-201"><span class="linenos">201</span></a><span class="sd">            of the plugin within the application.</span>
</span><span id="ArticletovideoPlugin.__init__-202"><a href="#ArticletovideoPlugin.__init__-202"><span class="linenos">202</span></a>
</span><span id="ArticletovideoPlugin.__init__-203"><a href="#ArticletovideoPlugin.__init__-203"><span class="linenos">203</span></a><span class="sd">        Attributes</span>
</span><span id="ArticletovideoPlugin.__init__-204"><a href="#ArticletovideoPlugin.__init__-204"><span class="linenos">204</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.__init__-205"><a href="#ArticletovideoPlugin.__init__-205"><span class="linenos">205</span></a><span class="sd">        translator : MarianMTModel or None</span>
</span><span id="ArticletovideoPlugin.__init__-206"><a href="#ArticletovideoPlugin.__init__-206"><span class="linenos">206</span></a><span class="sd">            Initialized as `None`. This will hold the translation model used to translate</span>
</span><span id="ArticletovideoPlugin.__init__-207"><a href="#ArticletovideoPlugin.__init__-207"><span class="linenos">207</span></a><span class="sd">            article text when needed.</span>
</span><span id="ArticletovideoPlugin.__init__-208"><a href="#ArticletovideoPlugin.__init__-208"><span class="linenos">208</span></a><span class="sd">        tts_model : TTS or None</span>
</span><span id="ArticletovideoPlugin.__init__-209"><a href="#ArticletovideoPlugin.__init__-209"><span class="linenos">209</span></a><span class="sd">            Initialized as `None`. This will hold the text-to-speech (TTS) model used to</span>
</span><span id="ArticletovideoPlugin.__init__-210"><a href="#ArticletovideoPlugin.__init__-210"><span class="linenos">210</span></a><span class="sd">            generate audio from text.</span>
</span><span id="ArticletovideoPlugin.__init__-211"><a href="#ArticletovideoPlugin.__init__-211"><span class="linenos">211</span></a><span class="sd">        imggen_plugin : ImggenPlugin</span>
</span><span id="ArticletovideoPlugin.__init__-212"><a href="#ArticletovideoPlugin.__init__-212"><span class="linenos">212</span></a><span class="sd">            An instance of `ImggenPlugin`, used to generate images based on text prompts.</span>
</span><span id="ArticletovideoPlugin.__init__-213"><a href="#ArticletovideoPlugin.__init__-213"><span class="linenos">213</span></a><span class="sd">        ragllm_plugin : RagllmPlugin</span>
</span><span id="ArticletovideoPlugin.__init__-214"><a href="#ArticletovideoPlugin.__init__-214"><span class="linenos">214</span></a><span class="sd">            An instance of `RagllmPlugin`, used to interact with language models for</span>
</span><span id="ArticletovideoPlugin.__init__-215"><a href="#ArticletovideoPlugin.__init__-215"><span class="linenos">215</span></a><span class="sd">            generating text prompts and other LLM-related tasks.</span>
</span><span id="ArticletovideoPlugin.__init__-216"><a href="#ArticletovideoPlugin.__init__-216"><span class="linenos">216</span></a>
</span><span id="ArticletovideoPlugin.__init__-217"><a href="#ArticletovideoPlugin.__init__-217"><span class="linenos">217</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.__init__-218"><a href="#ArticletovideoPlugin.__init__-218"><span class="linenos">218</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.__init__-219"><a href="#ArticletovideoPlugin.__init__-219"><span class="linenos">219</span></a><span class="sd">        plugin_manager = PluginManager()</span>
</span><span id="ArticletovideoPlugin.__init__-220"><a href="#ArticletovideoPlugin.__init__-220"><span class="linenos">220</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.__init__-221"><a href="#ArticletovideoPlugin.__init__-221"><span class="linenos">221</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.__init__-222"><a href="#ArticletovideoPlugin.__init__-222"><span class="linenos">222</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.__init__-223"><a href="#ArticletovideoPlugin.__init__-223"><span class="linenos">223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">translator</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ArticletovideoPlugin.__init__-224"><a href="#ArticletovideoPlugin.__init__-224"><span class="linenos">224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ArticletovideoPlugin.__init__-225"><a href="#ArticletovideoPlugin.__init__-225"><span class="linenos">225</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imggen_plugin</span> <span class="o">=</span> <span class="n">ImggenPlugin</span><span class="p">(</span><span class="s2">&quot;imggen&quot;</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.__init__-226"><a href="#ArticletovideoPlugin.__init__-226"><span class="linenos">226</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ragllm_plugin</span> <span class="o">=</span> <span class="n">RagllmPlugin</span><span class="p">(</span><span class="s2">&quot;ragllm&quot;</span><span class="p">,</span> <span class="n">plugin_manager</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Initializes the ArticletovideoPlugin with a name and plugin manager.</p>

<p>This constructor sets up the plugin by initializing its name and plugin manager,
as well as creating instances of the <code>ImggenPlugin</code> and <code>RagllmPlugin</code> for
image generation and language model interactions, respectively.</p>

<h2 id="parameters">Parameters</h2>

<p>name : str
    The name of the plugin, used for identification within the application.
plugin_manager : PluginManager
    The plugin manager responsible for managing the lifecycle and dependencies
    of the plugin within the application.</p>

<h2 id="attributes">Attributes</h2>

<p>translator : MarianMTModel or None
    Initialized as <code>None</code>. This will hold the translation model used to translate
    article text when needed.
tts_model : TTS or None
    Initialized as <code>None</code>. This will hold the text-to-speech (TTS) model used to
    generate audio from text.
imggen_plugin : ImggenPlugin
    An instance of <code>ImggenPlugin</code>, used to generate images based on text prompts.
ragllm_plugin : RagllmPlugin
    An instance of <code>RagllmPlugin</code>, used to interact with language models for
    generating text prompts and other LLM-related tasks.</p>

<h2 id="examples">Examples</h2>

<p>plugin_manager = PluginManager()
plugin = ArticletovideoPlugin("article_to_video", plugin_manager)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.translator" class="classattr">
                                <div class="attr variable">
            <span class="name">translator</span>

        
    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.translator"></a>
    
    

                            </div>
                            <div id="ArticletovideoPlugin.tts_model" class="classattr">
                                <div class="attr variable">
            <span class="name">tts_model</span>

        
    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.tts_model"></a>
    
    

                            </div>
                            <div id="ArticletovideoPlugin.imggen_plugin" class="classattr">
                                <div class="attr variable">
            <span class="name">imggen_plugin</span>

        
    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.imggen_plugin"></a>
    
    

                            </div>
                            <div id="ArticletovideoPlugin.ragllm_plugin" class="classattr">
                                <div class="attr variable">
            <span class="name">ragllm_plugin</span>

        
    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.ragllm_plugin"></a>
    
    

                            </div>
                            <div id="ArticletovideoPlugin.get_config_fields" class="classattr">
                                        <input id="ArticletovideoPlugin.get_config_fields-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_config_fields</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.get_config_fields-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.get_config_fields"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.get_config_fields-228"><a href="#ArticletovideoPlugin.get_config_fields-228"><span class="linenos">228</span></a>    <span class="k">def</span> <span class="nf">get_config_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.get_config_fields-229"><a href="#ArticletovideoPlugin.get_config_fields-229"><span class="linenos">229</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.get_config_fields-230"><a href="#ArticletovideoPlugin.get_config_fields-230"><span class="linenos">230</span></a><span class="sd">        Returns a dictionary defining the configurable fields for the plugin.</span>
</span><span id="ArticletovideoPlugin.get_config_fields-231"><a href="#ArticletovideoPlugin.get_config_fields-231"><span class="linenos">231</span></a>
</span><span id="ArticletovideoPlugin.get_config_fields-232"><a href="#ArticletovideoPlugin.get_config_fields-232"><span class="linenos">232</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin.get_config_fields-233"><a href="#ArticletovideoPlugin.get_config_fields-233"><span class="linenos">233</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin.get_config_fields-234"><a href="#ArticletovideoPlugin.get_config_fields-234"><span class="linenos">234</span></a><span class="sd">        dict</span>
</span><span id="ArticletovideoPlugin.get_config_fields-235"><a href="#ArticletovideoPlugin.get_config_fields-235"><span class="linenos">235</span></a><span class="sd">            A dictionary where keys are field names and values are dictionaries</span>
</span><span id="ArticletovideoPlugin.get_config_fields-236"><a href="#ArticletovideoPlugin.get_config_fields-236"><span class="linenos">236</span></a><span class="sd">            specifying field type, label, default values, and other options.</span>
</span><span id="ArticletovideoPlugin.get_config_fields-237"><a href="#ArticletovideoPlugin.get_config_fields-237"><span class="linenos">237</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.get_config_fields-238"><a href="#ArticletovideoPlugin.get_config_fields-238"><span class="linenos">238</span></a>        <span class="k">return</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin.get_config_fields-239"><a href="#ArticletovideoPlugin.get_config_fields-239"><span class="linenos">239</span></a>            <span class="s2">&quot;output_dir&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin.get_config_fields-240"><a href="#ArticletovideoPlugin.get_config_fields-240"><span class="linenos">240</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-241"><a href="#ArticletovideoPlugin.get_config_fields-241"><span class="linenos">241</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;output_directory&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.get_config_fields-242"><a href="#ArticletovideoPlugin.get_config_fields-242"><span class="linenos">242</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;~/Videos/ArticleToVideo&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-243"><a href="#ArticletovideoPlugin.get_config_fields-243"><span class="linenos">243</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin.get_config_fields-244"><a href="#ArticletovideoPlugin.get_config_fields-244"><span class="linenos">244</span></a>            <span class="s2">&quot;target_language&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin.get_config_fields-245"><a href="#ArticletovideoPlugin.get_config_fields-245"><span class="linenos">245</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-246"><a href="#ArticletovideoPlugin.get_config_fields-246"><span class="linenos">246</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;target_language&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.get_config_fields-247"><a href="#ArticletovideoPlugin.get_config_fields-247"><span class="linenos">247</span></a>                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;fr-fr&quot;</span><span class="p">,</span> <span class="s2">&quot;Français&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="s2">&quot;English&quot;</span><span class="p">)],</span>
</span><span id="ArticletovideoPlugin.get_config_fields-248"><a href="#ArticletovideoPlugin.get_config_fields-248"><span class="linenos">248</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;fr-fr&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-249"><a href="#ArticletovideoPlugin.get_config_fields-249"><span class="linenos">249</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin.get_config_fields-250"><a href="#ArticletovideoPlugin.get_config_fields-250"><span class="linenos">250</span></a>            <span class="s2">&quot;tts_speaker&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin.get_config_fields-251"><a href="#ArticletovideoPlugin.get_config_fields-251"><span class="linenos">251</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-252"><a href="#ArticletovideoPlugin.get_config_fields-252"><span class="linenos">252</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.get_config_fields-253"><a href="#ArticletovideoPlugin.get_config_fields-253"><span class="linenos">253</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;p326&quot;</span><span class="p">,</span>  <span class="c1"># Default speaker for YourTTS</span>
</span><span id="ArticletovideoPlugin.get_config_fields-254"><a href="#ArticletovideoPlugin.get_config_fields-254"><span class="linenos">254</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin.get_config_fields-255"><a href="#ArticletovideoPlugin.get_config_fields-255"><span class="linenos">255</span></a>            <span class="s2">&quot;split_by&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin.get_config_fields-256"><a href="#ArticletovideoPlugin.get_config_fields-256"><span class="linenos">256</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-257"><a href="#ArticletovideoPlugin.get_config_fields-257"><span class="linenos">257</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;split_by&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.get_config_fields-258"><a href="#ArticletovideoPlugin.get_config_fields-258"><span class="linenos">258</span></a>                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="s2">&quot;sentence&quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;sentence&quot;</span><span class="p">)),</span> <span class="p">(</span><span class="s2">&quot;paragraph&quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;paragraph&quot;</span><span class="p">))],</span>
</span><span id="ArticletovideoPlugin.get_config_fields-259"><a href="#ArticletovideoPlugin.get_config_fields-259"><span class="linenos">259</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;paragraph&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-260"><a href="#ArticletovideoPlugin.get_config_fields-260"><span class="linenos">260</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin.get_config_fields-261"><a href="#ArticletovideoPlugin.get_config_fields-261"><span class="linenos">261</span></a>            <span class="s2">&quot;zoom_factor&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin.get_config_fields-262"><a href="#ArticletovideoPlugin.get_config_fields-262"><span class="linenos">262</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-263"><a href="#ArticletovideoPlugin.get_config_fields-263"><span class="linenos">263</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;zoom_factor&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.get_config_fields-264"><a href="#ArticletovideoPlugin.get_config_fields-264"><span class="linenos">264</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-265"><a href="#ArticletovideoPlugin.get_config_fields-265"><span class="linenos">265</span></a>                <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-266"><a href="#ArticletovideoPlugin.get_config_fields-266"><span class="linenos">266</span></a>                <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-267"><a href="#ArticletovideoPlugin.get_config_fields-267"><span class="linenos">267</span></a>                <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="mf">0.001</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-268"><a href="#ArticletovideoPlugin.get_config_fields-268"><span class="linenos">268</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin.get_config_fields-269"><a href="#ArticletovideoPlugin.get_config_fields-269"><span class="linenos">269</span></a>            <span class="s2">&quot;speed_factor&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin.get_config_fields-270"><a href="#ArticletovideoPlugin.get_config_fields-270"><span class="linenos">270</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-271"><a href="#ArticletovideoPlugin.get_config_fields-271"><span class="linenos">271</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;speed_factor&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.get_config_fields-272"><a href="#ArticletovideoPlugin.get_config_fields-272"><span class="linenos">272</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-273"><a href="#ArticletovideoPlugin.get_config_fields-273"><span class="linenos">273</span></a>                <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-274"><a href="#ArticletovideoPlugin.get_config_fields-274"><span class="linenos">274</span></a>                <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-275"><a href="#ArticletovideoPlugin.get_config_fields-275"><span class="linenos">275</span></a>                <span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="mf">0.001</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-276"><a href="#ArticletovideoPlugin.get_config_fields-276"><span class="linenos">276</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin.get_config_fields-277"><a href="#ArticletovideoPlugin.get_config_fields-277"><span class="linenos">277</span></a>            <span class="s2">&quot;tts_model&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin.get_config_fields-278"><a href="#ArticletovideoPlugin.get_config_fields-278"><span class="linenos">278</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;select&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-279"><a href="#ArticletovideoPlugin.get_config_fields-279"><span class="linenos">279</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;tts_model&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.get_config_fields-280"><a href="#ArticletovideoPlugin.get_config_fields-280"><span class="linenos">280</span></a>                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="ArticletovideoPlugin.get_config_fields-281"><a href="#ArticletovideoPlugin.get_config_fields-281"><span class="linenos">281</span></a>                    <span class="p">(</span><span class="s2">&quot;your_tts&quot;</span><span class="p">,</span> <span class="s2">&quot;YourTTS&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.get_config_fields-282"><a href="#ArticletovideoPlugin.get_config_fields-282"><span class="linenos">282</span></a>                    <span class="p">(</span><span class="s2">&quot;tacotron&quot;</span><span class="p">,</span> <span class="s2">&quot;Tacotron&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.get_config_fields-283"><a href="#ArticletovideoPlugin.get_config_fields-283"><span class="linenos">283</span></a>                    <span class="p">(</span><span class="s2">&quot;xtts_v2&quot;</span><span class="p">,</span> <span class="s2">&quot;XTTS2&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.get_config_fields-284"><a href="#ArticletovideoPlugin.get_config_fields-284"><span class="linenos">284</span></a>                    <span class="p">(</span><span class="s2">&quot;bark&quot;</span><span class="p">,</span> <span class="s2">&quot;Bark&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.get_config_fields-285"><a href="#ArticletovideoPlugin.get_config_fields-285"><span class="linenos">285</span></a>                <span class="p">],</span>
</span><span id="ArticletovideoPlugin.get_config_fields-286"><a href="#ArticletovideoPlugin.get_config_fields-286"><span class="linenos">286</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;your_tts&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-287"><a href="#ArticletovideoPlugin.get_config_fields-287"><span class="linenos">287</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin.get_config_fields-288"><a href="#ArticletovideoPlugin.get_config_fields-288"><span class="linenos">288</span></a>            <span class="s2">&quot;convert_numbers&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin.get_config_fields-289"><a href="#ArticletovideoPlugin.get_config_fields-289"><span class="linenos">289</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;checkbox&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-290"><a href="#ArticletovideoPlugin.get_config_fields-290"><span class="linenos">290</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;convert_numbers&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.get_config_fields-291"><a href="#ArticletovideoPlugin.get_config_fields-291"><span class="linenos">291</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-292"><a href="#ArticletovideoPlugin.get_config_fields-292"><span class="linenos">292</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin.get_config_fields-293"><a href="#ArticletovideoPlugin.get_config_fields-293"><span class="linenos">293</span></a>            <span class="s2">&quot;image_sysprompt&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="ArticletovideoPlugin.get_config_fields-294"><a href="#ArticletovideoPlugin.get_config_fields-294"><span class="linenos">294</span></a>                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-295"><a href="#ArticletovideoPlugin.get_config_fields-295"><span class="linenos">295</span></a>                <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;image_sysprompt&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.get_config_fields-296"><a href="#ArticletovideoPlugin.get_config_fields-296"><span class="linenos">296</span></a>                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;You are an AI assistant tasked with creating image prompts. The prompt should be vivid and descriptive, suitable for image generation. Reply only the prompt.&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.get_config_fields-297"><a href="#ArticletovideoPlugin.get_config_fields-297"><span class="linenos">297</span></a>            <span class="p">},</span>
</span><span id="ArticletovideoPlugin.get_config_fields-298"><a href="#ArticletovideoPlugin.get_config_fields-298"><span class="linenos">298</span></a>        <span class="p">}</span>
</span></pre></div>


            <div class="docstring"><p>Returns a dictionary defining the configurable fields for the plugin.</p>

<h2 id="returns">Returns</h2>

<p>dict
    A dictionary where keys are field names and values are dictionaries
    specifying field type, label, default values, and other options.</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.get_tabs" class="classattr">
                                        <input id="ArticletovideoPlugin.get_tabs-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_tabs</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.get_tabs-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.get_tabs"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.get_tabs-300"><a href="#ArticletovideoPlugin.get_tabs-300"><span class="linenos">300</span></a>    <span class="k">def</span> <span class="nf">get_tabs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.get_tabs-301"><a href="#ArticletovideoPlugin.get_tabs-301"><span class="linenos">301</span></a>        <span class="k">return</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;article_to_video&quot;</span><span class="p">),</span> <span class="s2">&quot;plugin&quot;</span><span class="p">:</span> <span class="s2">&quot;articletovideo&quot;</span><span class="p">}]</span>
</span></pre></div>


    

                            </div>
                            <div id="ArticletovideoPlugin.run" class="classattr">
                                        <input id="ArticletovideoPlugin.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">config</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.run-303"><a href="#ArticletovideoPlugin.run-303"><span class="linenos">303</span></a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.run-304"><a href="#ArticletovideoPlugin.run-304"><span class="linenos">304</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.run-305"><a href="#ArticletovideoPlugin.run-305"><span class="linenos">305</span></a><span class="sd">        Executes the main logic of the plugin within the Streamlit interface.</span>
</span><span id="ArticletovideoPlugin.run-306"><a href="#ArticletovideoPlugin.run-306"><span class="linenos">306</span></a>
</span><span id="ArticletovideoPlugin.run-307"><a href="#ArticletovideoPlugin.run-307"><span class="linenos">307</span></a><span class="sd">        This method serves as the entry point for the plugin&#39;s functionality</span>
</span><span id="ArticletovideoPlugin.run-308"><a href="#ArticletovideoPlugin.run-308"><span class="linenos">308</span></a><span class="sd">        when used in a Streamlit application. It displays the main interface</span>
</span><span id="ArticletovideoPlugin.run-309"><a href="#ArticletovideoPlugin.run-309"><span class="linenos">309</span></a><span class="sd">        for the user, allowing them to input an article URL, choose options</span>
</span><span id="ArticletovideoPlugin.run-310"><a href="#ArticletovideoPlugin.run-310"><span class="linenos">310</span></a><span class="sd">        for video generation, and either generate the video in one click or</span>
</span><span id="ArticletovideoPlugin.run-311"><a href="#ArticletovideoPlugin.run-311"><span class="linenos">311</span></a><span class="sd">        follow a detailed step-by-step process.</span>
</span><span id="ArticletovideoPlugin.run-312"><a href="#ArticletovideoPlugin.run-312"><span class="linenos">312</span></a>
</span><span id="ArticletovideoPlugin.run-313"><a href="#ArticletovideoPlugin.run-313"><span class="linenos">313</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.run-314"><a href="#ArticletovideoPlugin.run-314"><span class="linenos">314</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.run-315"><a href="#ArticletovideoPlugin.run-315"><span class="linenos">315</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin.run-316"><a href="#ArticletovideoPlugin.run-316"><span class="linenos">316</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin.run-317"><a href="#ArticletovideoPlugin.run-317"><span class="linenos">317</span></a><span class="sd">            the plugin. This includes settings like the output directory,</span>
</span><span id="ArticletovideoPlugin.run-318"><a href="#ArticletovideoPlugin.run-318"><span class="linenos">318</span></a><span class="sd">            target language, TTS model, zoom factor, and others.</span>
</span><span id="ArticletovideoPlugin.run-319"><a href="#ArticletovideoPlugin.run-319"><span class="linenos">319</span></a>
</span><span id="ArticletovideoPlugin.run-320"><a href="#ArticletovideoPlugin.run-320"><span class="linenos">320</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.run-321"><a href="#ArticletovideoPlugin.run-321"><span class="linenos">321</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.run-322"><a href="#ArticletovideoPlugin.run-322"><span class="linenos">322</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin.run-323"><a href="#ArticletovideoPlugin.run-323"><span class="linenos">323</span></a><span class="sd">            If the configuration is missing required fields or contains invalid values.</span>
</span><span id="ArticletovideoPlugin.run-324"><a href="#ArticletovideoPlugin.run-324"><span class="linenos">324</span></a><span class="sd">        requests.exceptions.RequestException</span>
</span><span id="ArticletovideoPlugin.run-325"><a href="#ArticletovideoPlugin.run-325"><span class="linenos">325</span></a><span class="sd">            If there is an issue retrieving the article from the provided URL.</span>
</span><span id="ArticletovideoPlugin.run-326"><a href="#ArticletovideoPlugin.run-326"><span class="linenos">326</span></a>
</span><span id="ArticletovideoPlugin.run-327"><a href="#ArticletovideoPlugin.run-327"><span class="linenos">327</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.run-328"><a href="#ArticletovideoPlugin.run-328"><span class="linenos">328</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.run-329"><a href="#ArticletovideoPlugin.run-329"><span class="linenos">329</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.run-330"><a href="#ArticletovideoPlugin.run-330"><span class="linenos">330</span></a><span class="sd">        config = plugin.get_config_fields()</span>
</span><span id="ArticletovideoPlugin.run-331"><a href="#ArticletovideoPlugin.run-331"><span class="linenos">331</span></a><span class="sd">        plugin.run(config)</span>
</span><span id="ArticletovideoPlugin.run-332"><a href="#ArticletovideoPlugin.run-332"><span class="linenos">332</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.run-333"><a href="#ArticletovideoPlugin.run-333"><span class="linenos">333</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;article_to_video&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.run-334"><a href="#ArticletovideoPlugin.run-334"><span class="linenos">334</span></a>        <span class="n">url</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_input</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;article_url&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.run-335"><a href="#ArticletovideoPlugin.run-335"><span class="linenos">335</span></a>
</span><span id="ArticletovideoPlugin.run-336"><a href="#ArticletovideoPlugin.run-336"><span class="linenos">336</span></a>        <span class="n">show_detailed_steps</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.run-337"><a href="#ArticletovideoPlugin.run-337"><span class="linenos">337</span></a>            <span class="n">t</span><span class="p">(</span><span class="s2">&quot;show_detailed_steps&quot;</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;show_detailed_steps_checkbox&quot;</span>
</span><span id="ArticletovideoPlugin.run-338"><a href="#ArticletovideoPlugin.run-338"><span class="linenos">338</span></a>        <span class="p">)</span>
</span><span id="ArticletovideoPlugin.run-339"><a href="#ArticletovideoPlugin.run-339"><span class="linenos">339</span></a>        <span class="k">if</span> <span class="n">show_detailed_steps</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.run-340"><a href="#ArticletovideoPlugin.run-340"><span class="linenos">340</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">show_detailed_interface</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.run-341"><a href="#ArticletovideoPlugin.run-341"><span class="linenos">341</span></a>
</span><span id="ArticletovideoPlugin.run-342"><a href="#ArticletovideoPlugin.run-342"><span class="linenos">342</span></a>        <span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col3</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.run-343"><a href="#ArticletovideoPlugin.run-343"><span class="linenos">343</span></a>
</span><span id="ArticletovideoPlugin.run-344"><a href="#ArticletovideoPlugin.run-344"><span class="linenos">344</span></a>        <span class="k">with</span> <span class="n">col1</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.run-345"><a href="#ArticletovideoPlugin.run-345"><span class="linenos">345</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generate_video_from_url&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;generate_video_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.run-346"><a href="#ArticletovideoPlugin.run-346"><span class="linenos">346</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_video_one_click</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.run-347"><a href="#ArticletovideoPlugin.run-347"><span class="linenos">347</span></a>
</span><span id="ArticletovideoPlugin.run-348"><a href="#ArticletovideoPlugin.run-348"><span class="linenos">348</span></a>        <span class="k">with</span> <span class="n">col2</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.run-349"><a href="#ArticletovideoPlugin.run-349"><span class="linenos">349</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;scan_files&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;scan_files_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.run-350"><a href="#ArticletovideoPlugin.run-350"><span class="linenos">350</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">scan_files</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.run-351"><a href="#ArticletovideoPlugin.run-351"><span class="linenos">351</span></a>
</span><span id="ArticletovideoPlugin.run-352"><a href="#ArticletovideoPlugin.run-352"><span class="linenos">352</span></a>        <span class="k">with</span> <span class="n">col3</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.run-353"><a href="#ArticletovideoPlugin.run-353"><span class="linenos">353</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;assemble_video&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;assemble_video_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.run-354"><a href="#ArticletovideoPlugin.run-354"><span class="linenos">354</span></a>                <span class="n">audio_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span>
</span><span id="ArticletovideoPlugin.run-355"><a href="#ArticletovideoPlugin.run-355"><span class="linenos">355</span></a>                <span class="n">image_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span>
</span><span id="ArticletovideoPlugin.run-356"><a href="#ArticletovideoPlugin.run-356"><span class="linenos">356</span></a>                <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin.run-357"><a href="#ArticletovideoPlugin.run-357"><span class="linenos">357</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">assemble_final_video</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.run-358"><a href="#ArticletovideoPlugin.run-358"><span class="linenos">358</span></a>                    <span class="n">config</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.run-359"><a href="#ArticletovideoPlugin.run-359"><span class="linenos">359</span></a>                    <span class="n">use_zoom_and_transitions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.run-360"><a href="#ArticletovideoPlugin.run-360"><span class="linenos">360</span></a>                    <span class="n">audio_paths</span><span class="o">=</span><span class="n">audio_paths</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.run-361"><a href="#ArticletovideoPlugin.run-361"><span class="linenos">361</span></a>                    <span class="n">image_paths</span><span class="o">=</span><span class="n">image_paths</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.run-362"><a href="#ArticletovideoPlugin.run-362"><span class="linenos">362</span></a>                    <span class="n">output_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="s2">&quot;final_video.mp4&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.run-363"><a href="#ArticletovideoPlugin.run-363"><span class="linenos">363</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin.run-364"><a href="#ArticletovideoPlugin.run-364"><span class="linenos">364</span></a>
</span><span id="ArticletovideoPlugin.run-365"><a href="#ArticletovideoPlugin.run-365"><span class="linenos">365</span></a>        <span class="n">use_zoom_and_transitions</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.run-366"><a href="#ArticletovideoPlugin.run-366"><span class="linenos">366</span></a>            <span class="n">t</span><span class="p">(</span><span class="s2">&quot;use_zoom_and_transitions&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.run-367"><a href="#ArticletovideoPlugin.run-367"><span class="linenos">367</span></a>            <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.run-368"><a href="#ArticletovideoPlugin.run-368"><span class="linenos">368</span></a>            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;use_zoom_transitions_checkbox&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.run-369"><a href="#ArticletovideoPlugin.run-369"><span class="linenos">369</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Executes the main logic of the plugin within the Streamlit interface.</p>

<p>This method serves as the entry point for the plugin's functionality
when used in a Streamlit application. It displays the main interface
for the user, allowing them to input an article URL, choose options
for video generation, and either generate the video in one click or
follow a detailed step-by-step process.</p>

<h2 id="parameters">Parameters</h2>

<p>config : dict
    The configuration dictionary containing user-defined settings for
    the plugin. This includes settings like the output directory,
    target language, TTS model, zoom factor, and others.</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If the configuration is missing required fields or contains invalid values.
requests.exceptions.RequestException
    If there is an issue retrieving the article from the provided URL.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
config = plugin.get_config_fields()
plugin.run(config)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.get_sorted_files" class="classattr">
                                        <input id="ArticletovideoPlugin.get_sorted_files-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_sorted_files</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">directory</span>, </span><span class="param"><span class="n">pattern</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.get_sorted_files-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.get_sorted_files"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.get_sorted_files-371"><a href="#ArticletovideoPlugin.get_sorted_files-371"><span class="linenos">371</span></a>    <span class="k">def</span> <span class="nf">get_sorted_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">pattern</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-372"><a href="#ArticletovideoPlugin.get_sorted_files-372"><span class="linenos">372</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-373"><a href="#ArticletovideoPlugin.get_sorted_files-373"><span class="linenos">373</span></a><span class="sd">        Retrieves and sorts files from a directory based on a specified pattern.</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-374"><a href="#ArticletovideoPlugin.get_sorted_files-374"><span class="linenos">374</span></a>
</span><span id="ArticletovideoPlugin.get_sorted_files-375"><a href="#ArticletovideoPlugin.get_sorted_files-375"><span class="linenos">375</span></a><span class="sd">        This method searches for files in the given directory that match the</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-376"><a href="#ArticletovideoPlugin.get_sorted_files-376"><span class="linenos">376</span></a><span class="sd">        provided regular expression pattern, sorts them by a numeric index,</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-377"><a href="#ArticletovideoPlugin.get_sorted_files-377"><span class="linenos">377</span></a><span class="sd">        and returns a list of file paths.</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-378"><a href="#ArticletovideoPlugin.get_sorted_files-378"><span class="linenos">378</span></a>
</span><span id="ArticletovideoPlugin.get_sorted_files-379"><a href="#ArticletovideoPlugin.get_sorted_files-379"><span class="linenos">379</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-380"><a href="#ArticletovideoPlugin.get_sorted_files-380"><span class="linenos">380</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-381"><a href="#ArticletovideoPlugin.get_sorted_files-381"><span class="linenos">381</span></a><span class="sd">        directory : str</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-382"><a href="#ArticletovideoPlugin.get_sorted_files-382"><span class="linenos">382</span></a><span class="sd">            The directory where files are located.</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-383"><a href="#ArticletovideoPlugin.get_sorted_files-383"><span class="linenos">383</span></a><span class="sd">        pattern : str</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-384"><a href="#ArticletovideoPlugin.get_sorted_files-384"><span class="linenos">384</span></a><span class="sd">            A regular expression pattern used to identify and extract numeric</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-385"><a href="#ArticletovideoPlugin.get_sorted_files-385"><span class="linenos">385</span></a><span class="sd">            indices from filenames.</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-386"><a href="#ArticletovideoPlugin.get_sorted_files-386"><span class="linenos">386</span></a>
</span><span id="ArticletovideoPlugin.get_sorted_files-387"><a href="#ArticletovideoPlugin.get_sorted_files-387"><span class="linenos">387</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-388"><a href="#ArticletovideoPlugin.get_sorted_files-388"><span class="linenos">388</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-389"><a href="#ArticletovideoPlugin.get_sorted_files-389"><span class="linenos">389</span></a><span class="sd">        list of str</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-390"><a href="#ArticletovideoPlugin.get_sorted_files-390"><span class="linenos">390</span></a><span class="sd">            A list of sorted file paths that match the specified pattern.</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-391"><a href="#ArticletovideoPlugin.get_sorted_files-391"><span class="linenos">391</span></a>
</span><span id="ArticletovideoPlugin.get_sorted_files-392"><a href="#ArticletovideoPlugin.get_sorted_files-392"><span class="linenos">392</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-393"><a href="#ArticletovideoPlugin.get_sorted_files-393"><span class="linenos">393</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-394"><a href="#ArticletovideoPlugin.get_sorted_files-394"><span class="linenos">394</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-395"><a href="#ArticletovideoPlugin.get_sorted_files-395"><span class="linenos">395</span></a><span class="sd">        files = plugin.get_sorted_files(&quot;~/output&quot;, r&quot;image_(\d+)\.png&quot;)</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-396"><a href="#ArticletovideoPlugin.get_sorted_files-396"><span class="linenos">396</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-397"><a href="#ArticletovideoPlugin.get_sorted_files-397"><span class="linenos">397</span></a>        <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-398"><a href="#ArticletovideoPlugin.get_sorted_files-398"><span class="linenos">398</span></a>        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-399"><a href="#ArticletovideoPlugin.get_sorted_files-399"><span class="linenos">399</span></a>            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-400"><a href="#ArticletovideoPlugin.get_sorted_files-400"><span class="linenos">400</span></a>            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-401"><a href="#ArticletovideoPlugin.get_sorted_files-401"><span class="linenos">401</span></a>                <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-402"><a href="#ArticletovideoPlugin.get_sorted_files-402"><span class="linenos">402</span></a>                <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">index</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">filename</span><span class="p">)))</span>
</span><span id="ArticletovideoPlugin.get_sorted_files-403"><a href="#ArticletovideoPlugin.get_sorted_files-403"><span class="linenos">403</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">file</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">files</span><span class="p">)]</span>
</span></pre></div>


            <div class="docstring"><p>Retrieves and sorts files from a directory based on a specified pattern.</p>

<p>This method searches for files in the given directory that match the
provided regular expression pattern, sorts them by a numeric index,
and returns a list of file paths.</p>

<h2 id="parameters">Parameters</h2>

<p>directory : str
    The directory where files are located.
pattern : str
    A regular expression pattern used to identify and extract numeric
    indices from filenames.</p>

<h2 id="returns">Returns</h2>

<p>list of str
    A list of sorted file paths that match the specified pattern.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
files = plugin.get_sorted_files("~/output", r"image_(\d+).png")</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.scan_files" class="classattr">
                                        <input id="ArticletovideoPlugin.scan_files-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">scan_files</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">config</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.scan_files-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.scan_files"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.scan_files-405"><a href="#ArticletovideoPlugin.scan_files-405"><span class="linenos">405</span></a>    <span class="k">def</span> <span class="nf">scan_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.scan_files-406"><a href="#ArticletovideoPlugin.scan_files-406"><span class="linenos">406</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.scan_files-407"><a href="#ArticletovideoPlugin.scan_files-407"><span class="linenos">407</span></a><span class="sd">        Scans the output directory for generated audio and image files.</span>
</span><span id="ArticletovideoPlugin.scan_files-408"><a href="#ArticletovideoPlugin.scan_files-408"><span class="linenos">408</span></a>
</span><span id="ArticletovideoPlugin.scan_files-409"><a href="#ArticletovideoPlugin.scan_files-409"><span class="linenos">409</span></a><span class="sd">        This method identifies and sorts the audio and image files based on</span>
</span><span id="ArticletovideoPlugin.scan_files-410"><a href="#ArticletovideoPlugin.scan_files-410"><span class="linenos">410</span></a><span class="sd">        their naming convention in the specified output directory.</span>
</span><span id="ArticletovideoPlugin.scan_files-411"><a href="#ArticletovideoPlugin.scan_files-411"><span class="linenos">411</span></a>
</span><span id="ArticletovideoPlugin.scan_files-412"><a href="#ArticletovideoPlugin.scan_files-412"><span class="linenos">412</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.scan_files-413"><a href="#ArticletovideoPlugin.scan_files-413"><span class="linenos">413</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.scan_files-414"><a href="#ArticletovideoPlugin.scan_files-414"><span class="linenos">414</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin.scan_files-415"><a href="#ArticletovideoPlugin.scan_files-415"><span class="linenos">415</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin.scan_files-416"><a href="#ArticletovideoPlugin.scan_files-416"><span class="linenos">416</span></a><span class="sd">            the plugin, including the output directory.</span>
</span><span id="ArticletovideoPlugin.scan_files-417"><a href="#ArticletovideoPlugin.scan_files-417"><span class="linenos">417</span></a>
</span><span id="ArticletovideoPlugin.scan_files-418"><a href="#ArticletovideoPlugin.scan_files-418"><span class="linenos">418</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.scan_files-419"><a href="#ArticletovideoPlugin.scan_files-419"><span class="linenos">419</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.scan_files-420"><a href="#ArticletovideoPlugin.scan_files-420"><span class="linenos">420</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin.scan_files-421"><a href="#ArticletovideoPlugin.scan_files-421"><span class="linenos">421</span></a><span class="sd">            If the specified output directory does not exist.</span>
</span><span id="ArticletovideoPlugin.scan_files-422"><a href="#ArticletovideoPlugin.scan_files-422"><span class="linenos">422</span></a><span class="sd">        Warning</span>
</span><span id="ArticletovideoPlugin.scan_files-423"><a href="#ArticletovideoPlugin.scan_files-423"><span class="linenos">423</span></a><span class="sd">            If no audio or image files are found in the output directory.</span>
</span><span id="ArticletovideoPlugin.scan_files-424"><a href="#ArticletovideoPlugin.scan_files-424"><span class="linenos">424</span></a>
</span><span id="ArticletovideoPlugin.scan_files-425"><a href="#ArticletovideoPlugin.scan_files-425"><span class="linenos">425</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.scan_files-426"><a href="#ArticletovideoPlugin.scan_files-426"><span class="linenos">426</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.scan_files-427"><a href="#ArticletovideoPlugin.scan_files-427"><span class="linenos">427</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.scan_files-428"><a href="#ArticletovideoPlugin.scan_files-428"><span class="linenos">428</span></a><span class="sd">        config = plugin.get_config_fields()</span>
</span><span id="ArticletovideoPlugin.scan_files-429"><a href="#ArticletovideoPlugin.scan_files-429"><span class="linenos">429</span></a><span class="sd">        plugin.scan_files(config)</span>
</span><span id="ArticletovideoPlugin.scan_files-430"><a href="#ArticletovideoPlugin.scan_files-430"><span class="linenos">430</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.scan_files-431"><a href="#ArticletovideoPlugin.scan_files-431"><span class="linenos">431</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin.scan_files-432"><a href="#ArticletovideoPlugin.scan_files-432"><span class="linenos">432</span></a>
</span><span id="ArticletovideoPlugin.scan_files-433"><a href="#ArticletovideoPlugin.scan_files-433"><span class="linenos">433</span></a>        <span class="c1"># Scan for audio files</span>
</span><span id="ArticletovideoPlugin.scan_files-434"><a href="#ArticletovideoPlugin.scan_files-434"><span class="linenos">434</span></a>        <span class="n">audio_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sorted_files</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;audio_(\d+)\.wav&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.scan_files-435"><a href="#ArticletovideoPlugin.scan_files-435"><span class="linenos">435</span></a>
</span><span id="ArticletovideoPlugin.scan_files-436"><a href="#ArticletovideoPlugin.scan_files-436"><span class="linenos">436</span></a>        <span class="c1"># Scan for image files</span>
</span><span id="ArticletovideoPlugin.scan_files-437"><a href="#ArticletovideoPlugin.scan_files-437"><span class="linenos">437</span></a>        <span class="n">image_files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sorted_files</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">r</span><span class="s2">&quot;image_(\d+)\.png&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.scan_files-438"><a href="#ArticletovideoPlugin.scan_files-438"><span class="linenos">438</span></a>
</span><span id="ArticletovideoPlugin.scan_files-439"><a href="#ArticletovideoPlugin.scan_files-439"><span class="linenos">439</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">audio_files</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">image_files</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.scan_files-440"><a href="#ArticletovideoPlugin.scan_files-440"><span class="linenos">440</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;no_files_found&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.scan_files-441"><a href="#ArticletovideoPlugin.scan_files-441"><span class="linenos">441</span></a>            <span class="k">return</span>
</span><span id="ArticletovideoPlugin.scan_files-442"><a href="#ArticletovideoPlugin.scan_files-442"><span class="linenos">442</span></a>
</span><span id="ArticletovideoPlugin.scan_files-443"><a href="#ArticletovideoPlugin.scan_files-443"><span class="linenos">443</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span> <span class="o">=</span> <span class="n">audio_files</span>
</span><span id="ArticletovideoPlugin.scan_files-444"><a href="#ArticletovideoPlugin.scan_files-444"><span class="linenos">444</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span> <span class="o">=</span> <span class="n">image_files</span>
</span><span id="ArticletovideoPlugin.scan_files-445"><a href="#ArticletovideoPlugin.scan_files-445"><span class="linenos">445</span></a>
</span><span id="ArticletovideoPlugin.scan_files-446"><a href="#ArticletovideoPlugin.scan_files-446"><span class="linenos">446</span></a>        <span class="c1"># Reconstruct segments and prompts based on file count</span>
</span><span id="ArticletovideoPlugin.scan_files-447"><a href="#ArticletovideoPlugin.scan_files-447"><span class="linenos">447</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">segments</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;Segment </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">audio_files</span><span class="p">))]</span>
</span><span id="ArticletovideoPlugin.scan_files-448"><a href="#ArticletovideoPlugin.scan_files-448"><span class="linenos">448</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">prompts</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="ArticletovideoPlugin.scan_files-449"><a href="#ArticletovideoPlugin.scan_files-449"><span class="linenos">449</span></a>            <span class="sa">f</span><span class="s2">&quot;Prompt for image </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">image_files</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.scan_files-450"><a href="#ArticletovideoPlugin.scan_files-450"><span class="linenos">450</span></a>        <span class="p">]</span>
</span><span id="ArticletovideoPlugin.scan_files-451"><a href="#ArticletovideoPlugin.scan_files-451"><span class="linenos">451</span></a>
</span><span id="ArticletovideoPlugin.scan_files-452"><a href="#ArticletovideoPlugin.scan_files-452"><span class="linenos">452</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;files_scanned_successfully&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.scan_files-453"><a href="#ArticletovideoPlugin.scan_files-453"><span class="linenos">453</span></a>
</span><span id="ArticletovideoPlugin.scan_files-454"><a href="#ArticletovideoPlugin.scan_files-454"><span class="linenos">454</span></a>        <span class="c1"># Display scanned files</span>
</span><span id="ArticletovideoPlugin.scan_files-455"><a href="#ArticletovideoPlugin.scan_files-455"><span class="linenos">455</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">subheader</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;scanned_files&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.scan_files-456"><a href="#ArticletovideoPlugin.scan_files-456"><span class="linenos">456</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Audio files: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">audio_files</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.scan_files-457"><a href="#ArticletovideoPlugin.scan_files-457"><span class="linenos">457</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Image files: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">image_files</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Scans the output directory for generated audio and image files.</p>

<p>This method identifies and sorts the audio and image files based on
their naming convention in the specified output directory.</p>

<h2 id="parameters">Parameters</h2>

<p>config : dict
    The configuration dictionary containing user-defined settings for
    the plugin, including the output directory.</p>

<h2 id="raises">Raises</h2>

<p>FileNotFoundError
    If the specified output directory does not exist.
Warning
    If no audio or image files are found in the output directory.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
config = plugin.get_config_fields()
plugin.scan_files(config)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.generate_video_one_click" class="classattr">
                                        <input id="ArticletovideoPlugin.generate_video_one_click-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generate_video_one_click</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">url</span>, </span><span class="param"><span class="n">config</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.generate_video_one_click-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.generate_video_one_click"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.generate_video_one_click-459"><a href="#ArticletovideoPlugin.generate_video_one_click-459"><span class="linenos">459</span></a>    <span class="k">def</span> <span class="nf">generate_video_one_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-460"><a href="#ArticletovideoPlugin.generate_video_one_click-460"><span class="linenos">460</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-461"><a href="#ArticletovideoPlugin.generate_video_one_click-461"><span class="linenos">461</span></a><span class="sd">        Generates a video from an article URL using one-click mode.</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-462"><a href="#ArticletovideoPlugin.generate_video_one_click-462"><span class="linenos">462</span></a>
</span><span id="ArticletovideoPlugin.generate_video_one_click-463"><a href="#ArticletovideoPlugin.generate_video_one_click-463"><span class="linenos">463</span></a><span class="sd">        This method retrieves the article, translates it, generates prompts,</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-464"><a href="#ArticletovideoPlugin.generate_video_one_click-464"><span class="linenos">464</span></a><span class="sd">        creates images, and assembles the final video.</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-465"><a href="#ArticletovideoPlugin.generate_video_one_click-465"><span class="linenos">465</span></a>
</span><span id="ArticletovideoPlugin.generate_video_one_click-466"><a href="#ArticletovideoPlugin.generate_video_one_click-466"><span class="linenos">466</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-467"><a href="#ArticletovideoPlugin.generate_video_one_click-467"><span class="linenos">467</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-468"><a href="#ArticletovideoPlugin.generate_video_one_click-468"><span class="linenos">468</span></a><span class="sd">        url : str</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-469"><a href="#ArticletovideoPlugin.generate_video_one_click-469"><span class="linenos">469</span></a><span class="sd">            The URL of the article to be converted into a video.</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-470"><a href="#ArticletovideoPlugin.generate_video_one_click-470"><span class="linenos">470</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-471"><a href="#ArticletovideoPlugin.generate_video_one_click-471"><span class="linenos">471</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-472"><a href="#ArticletovideoPlugin.generate_video_one_click-472"><span class="linenos">472</span></a><span class="sd">            the plugin, such as output directory, language, TTS model, etc.</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-473"><a href="#ArticletovideoPlugin.generate_video_one_click-473"><span class="linenos">473</span></a>
</span><span id="ArticletovideoPlugin.generate_video_one_click-474"><a href="#ArticletovideoPlugin.generate_video_one_click-474"><span class="linenos">474</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-475"><a href="#ArticletovideoPlugin.generate_video_one_click-475"><span class="linenos">475</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-476"><a href="#ArticletovideoPlugin.generate_video_one_click-476"><span class="linenos">476</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-477"><a href="#ArticletovideoPlugin.generate_video_one_click-477"><span class="linenos">477</span></a><span class="sd">            If the URL is invalid or the article cannot be retrieved.</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-478"><a href="#ArticletovideoPlugin.generate_video_one_click-478"><span class="linenos">478</span></a>
</span><span id="ArticletovideoPlugin.generate_video_one_click-479"><a href="#ArticletovideoPlugin.generate_video_one_click-479"><span class="linenos">479</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-480"><a href="#ArticletovideoPlugin.generate_video_one_click-480"><span class="linenos">480</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-481"><a href="#ArticletovideoPlugin.generate_video_one_click-481"><span class="linenos">481</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-482"><a href="#ArticletovideoPlugin.generate_video_one_click-482"><span class="linenos">482</span></a><span class="sd">        config = plugin.get_config_fields()</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-483"><a href="#ArticletovideoPlugin.generate_video_one_click-483"><span class="linenos">483</span></a><span class="sd">        plugin.generate_video_one_click(&quot;https://example.com/article&quot;, config)</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-484"><a href="#ArticletovideoPlugin.generate_video_one_click-484"><span class="linenos">484</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-485"><a href="#ArticletovideoPlugin.generate_video_one_click-485"><span class="linenos">485</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;processing_video&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-486"><a href="#ArticletovideoPlugin.generate_video_one_click-486"><span class="linenos">486</span></a>            <span class="c1"># Step 1: Retrieve article</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-487"><a href="#ArticletovideoPlugin.generate_video_one_click-487"><span class="linenos">487</span></a>            <span class="n">article_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_article</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-488"><a href="#ArticletovideoPlugin.generate_video_one_click-488"><span class="linenos">488</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">article_text</span> <span class="o">=</span> <span class="n">article_text</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-489"><a href="#ArticletovideoPlugin.generate_video_one_click-489"><span class="linenos">489</span></a>
</span><span id="ArticletovideoPlugin.generate_video_one_click-490"><a href="#ArticletovideoPlugin.generate_video_one_click-490"><span class="linenos">490</span></a>            <span class="c1"># Step 2: Translate text</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-491"><a href="#ArticletovideoPlugin.generate_video_one_click-491"><span class="linenos">491</span></a>            <span class="n">translated_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate_text</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-492"><a href="#ArticletovideoPlugin.generate_video_one_click-492"><span class="linenos">492</span></a>                <span class="n">article_text</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;target_language&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-493"><a href="#ArticletovideoPlugin.generate_video_one_click-493"><span class="linenos">493</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-494"><a href="#ArticletovideoPlugin.generate_video_one_click-494"><span class="linenos">494</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span> <span class="o">=</span> <span class="n">translated_text</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-495"><a href="#ArticletovideoPlugin.generate_video_one_click-495"><span class="linenos">495</span></a>
</span><span id="ArticletovideoPlugin.generate_video_one_click-496"><a href="#ArticletovideoPlugin.generate_video_one_click-496"><span class="linenos">496</span></a>            <span class="c1"># Step 3: Generate prompts</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-497"><a href="#ArticletovideoPlugin.generate_video_one_click-497"><span class="linenos">497</span></a>            <span class="n">split_by</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;split_by&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-498"><a href="#ArticletovideoPlugin.generate_video_one_click-498"><span class="linenos">498</span></a>            <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_segments</span><span class="p">(</span><span class="n">translated_text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-499"><a href="#ArticletovideoPlugin.generate_video_one_click-499"><span class="linenos">499</span></a>            <span class="n">prompts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_all_image_prompts</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-500"><a href="#ArticletovideoPlugin.generate_video_one_click-500"><span class="linenos">500</span></a>                <span class="n">segments</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;image_sysprompt&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-501"><a href="#ArticletovideoPlugin.generate_video_one_click-501"><span class="linenos">501</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-502"><a href="#ArticletovideoPlugin.generate_video_one_click-502"><span class="linenos">502</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span> <span class="o">=</span> <span class="n">prompts</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-503"><a href="#ArticletovideoPlugin.generate_video_one_click-503"><span class="linenos">503</span></a>
</span><span id="ArticletovideoPlugin.generate_video_one_click-504"><a href="#ArticletovideoPlugin.generate_video_one_click-504"><span class="linenos">504</span></a>            <span class="c1"># Step 4: Generate video</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-505"><a href="#ArticletovideoPlugin.generate_video_one_click-505"><span class="linenos">505</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">generate_all_images</span><span class="p">(</span><span class="n">translated_text</span><span class="p">,</span> <span class="n">prompts</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_video_one_click-506"><a href="#ArticletovideoPlugin.generate_video_one_click-506"><span class="linenos">506</span></a>
</span><span id="ArticletovideoPlugin.generate_video_one_click-507"><a href="#ArticletovideoPlugin.generate_video_one_click-507"><span class="linenos">507</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;video_files_generated&quot;</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Generates a video from an article URL using one-click mode.</p>

<p>This method retrieves the article, translates it, generates prompts,
creates images, and assembles the final video.</p>

<h2 id="parameters">Parameters</h2>

<p>url : str
    The URL of the article to be converted into a video.
config : dict
    The configuration dictionary containing user-defined settings for
    the plugin, such as output directory, language, TTS model, etc.</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If the URL is invalid or the article cannot be retrieved.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
config = plugin.get_config_fields()
plugin.generate_video_one_click("https://example.com/article", config)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.show_detailed_interface" class="classattr">
                                        <input id="ArticletovideoPlugin.show_detailed_interface-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">show_detailed_interface</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">config</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.show_detailed_interface-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.show_detailed_interface"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.show_detailed_interface-509"><a href="#ArticletovideoPlugin.show_detailed_interface-509"><span class="linenos">509</span></a>    <span class="k">def</span> <span class="nf">show_detailed_interface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-510"><a href="#ArticletovideoPlugin.show_detailed_interface-510"><span class="linenos">510</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-511"><a href="#ArticletovideoPlugin.show_detailed_interface-511"><span class="linenos">511</span></a><span class="sd">        Displays a detailed user interface for generating videos step by step.</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-512"><a href="#ArticletovideoPlugin.show_detailed_interface-512"><span class="linenos">512</span></a>
</span><span id="ArticletovideoPlugin.show_detailed_interface-513"><a href="#ArticletovideoPlugin.show_detailed_interface-513"><span class="linenos">513</span></a><span class="sd">        This method provides an interface in Streamlit that allows users to</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-514"><a href="#ArticletovideoPlugin.show_detailed_interface-514"><span class="linenos">514</span></a><span class="sd">        retrieve an article, translate it, generate image prompts, and</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-515"><a href="#ArticletovideoPlugin.show_detailed_interface-515"><span class="linenos">515</span></a><span class="sd">        assemble the final video in a detailed, step-by-step manner.</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-516"><a href="#ArticletovideoPlugin.show_detailed_interface-516"><span class="linenos">516</span></a>
</span><span id="ArticletovideoPlugin.show_detailed_interface-517"><a href="#ArticletovideoPlugin.show_detailed_interface-517"><span class="linenos">517</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-518"><a href="#ArticletovideoPlugin.show_detailed_interface-518"><span class="linenos">518</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-519"><a href="#ArticletovideoPlugin.show_detailed_interface-519"><span class="linenos">519</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-520"><a href="#ArticletovideoPlugin.show_detailed_interface-520"><span class="linenos">520</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-521"><a href="#ArticletovideoPlugin.show_detailed_interface-521"><span class="linenos">521</span></a><span class="sd">            the plugin.</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-522"><a href="#ArticletovideoPlugin.show_detailed_interface-522"><span class="linenos">522</span></a>
</span><span id="ArticletovideoPlugin.show_detailed_interface-523"><a href="#ArticletovideoPlugin.show_detailed_interface-523"><span class="linenos">523</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-524"><a href="#ArticletovideoPlugin.show_detailed_interface-524"><span class="linenos">524</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-525"><a href="#ArticletovideoPlugin.show_detailed_interface-525"><span class="linenos">525</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-526"><a href="#ArticletovideoPlugin.show_detailed_interface-526"><span class="linenos">526</span></a><span class="sd">        plugin.show_detailed_interface(config)</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-527"><a href="#ArticletovideoPlugin.show_detailed_interface-527"><span class="linenos">527</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-528"><a href="#ArticletovideoPlugin.show_detailed_interface-528"><span class="linenos">528</span></a>        <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;retrieve&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;retrieve_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-529"><a href="#ArticletovideoPlugin.show_detailed_interface-529"><span class="linenos">529</span></a>            <span class="n">article_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retrieve_article</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-530"><a href="#ArticletovideoPlugin.show_detailed_interface-530"><span class="linenos">530</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">article_text</span> <span class="o">=</span> <span class="n">article_text</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-531"><a href="#ArticletovideoPlugin.show_detailed_interface-531"><span class="linenos">531</span></a>
</span><span id="ArticletovideoPlugin.show_detailed_interface-532"><a href="#ArticletovideoPlugin.show_detailed_interface-532"><span class="linenos">532</span></a>        <span class="k">if</span> <span class="s2">&quot;article_text&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-533"><a href="#ArticletovideoPlugin.show_detailed_interface-533"><span class="linenos">533</span></a>            <span class="n">article_text</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_area</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-534"><a href="#ArticletovideoPlugin.show_detailed_interface-534"><span class="linenos">534</span></a>                <span class="n">t</span><span class="p">(</span><span class="s2">&quot;article_text&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-535"><a href="#ArticletovideoPlugin.show_detailed_interface-535"><span class="linenos">535</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">article_text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-536"><a href="#ArticletovideoPlugin.show_detailed_interface-536"><span class="linenos">536</span></a>                <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-537"><a href="#ArticletovideoPlugin.show_detailed_interface-537"><span class="linenos">537</span></a>                <span class="n">key</span><span class="o">=</span><span class="s2">&quot;article_text_area&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-538"><a href="#ArticletovideoPlugin.show_detailed_interface-538"><span class="linenos">538</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-539"><a href="#ArticletovideoPlugin.show_detailed_interface-539"><span class="linenos">539</span></a>
</span><span id="ArticletovideoPlugin.show_detailed_interface-540"><a href="#ArticletovideoPlugin.show_detailed_interface-540"><span class="linenos">540</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;translate&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;translate_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-541"><a href="#ArticletovideoPlugin.show_detailed_interface-541"><span class="linenos">541</span></a>                <span class="n">translated_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate_text</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-542"><a href="#ArticletovideoPlugin.show_detailed_interface-542"><span class="linenos">542</span></a>                    <span class="n">article_text</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;target_language&quot;</span><span class="p">],</span> <span class="n">config</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-543"><a href="#ArticletovideoPlugin.show_detailed_interface-543"><span class="linenos">543</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-544"><a href="#ArticletovideoPlugin.show_detailed_interface-544"><span class="linenos">544</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span> <span class="o">=</span> <span class="n">translated_text</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-545"><a href="#ArticletovideoPlugin.show_detailed_interface-545"><span class="linenos">545</span></a>
</span><span id="ArticletovideoPlugin.show_detailed_interface-546"><a href="#ArticletovideoPlugin.show_detailed_interface-546"><span class="linenos">546</span></a>        <span class="k">if</span> <span class="s2">&quot;translated_text&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-547"><a href="#ArticletovideoPlugin.show_detailed_interface-547"><span class="linenos">547</span></a>            <span class="n">translated_text</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_area</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-548"><a href="#ArticletovideoPlugin.show_detailed_interface-548"><span class="linenos">548</span></a>                <span class="n">t</span><span class="p">(</span><span class="s2">&quot;translated_text&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-549"><a href="#ArticletovideoPlugin.show_detailed_interface-549"><span class="linenos">549</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-550"><a href="#ArticletovideoPlugin.show_detailed_interface-550"><span class="linenos">550</span></a>                <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-551"><a href="#ArticletovideoPlugin.show_detailed_interface-551"><span class="linenos">551</span></a>                <span class="n">key</span><span class="o">=</span><span class="s2">&quot;translated_text_area&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-552"><a href="#ArticletovideoPlugin.show_detailed_interface-552"><span class="linenos">552</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-553"><a href="#ArticletovideoPlugin.show_detailed_interface-553"><span class="linenos">553</span></a>
</span><span id="ArticletovideoPlugin.show_detailed_interface-554"><a href="#ArticletovideoPlugin.show_detailed_interface-554"><span class="linenos">554</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;edit_prompts&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;edit_prompts_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-555"><a href="#ArticletovideoPlugin.show_detailed_interface-555"><span class="linenos">555</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_and_edit_prompts</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-556"><a href="#ArticletovideoPlugin.show_detailed_interface-556"><span class="linenos">556</span></a>                    <span class="n">translated_text</span><span class="p">,</span> <span class="n">config</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-557"><a href="#ArticletovideoPlugin.show_detailed_interface-557"><span class="linenos">557</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-558"><a href="#ArticletovideoPlugin.show_detailed_interface-558"><span class="linenos">558</span></a>
</span><span id="ArticletovideoPlugin.show_detailed_interface-559"><a href="#ArticletovideoPlugin.show_detailed_interface-559"><span class="linenos">559</span></a>        <span class="k">if</span> <span class="s2">&quot;edited_prompts&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-560"><a href="#ArticletovideoPlugin.show_detailed_interface-560"><span class="linenos">560</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">display_prompts</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-561"><a href="#ArticletovideoPlugin.show_detailed_interface-561"><span class="linenos">561</span></a>            <span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col3</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-562"><a href="#ArticletovideoPlugin.show_detailed_interface-562"><span class="linenos">562</span></a>            <span class="k">with</span> <span class="n">col1</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-563"><a href="#ArticletovideoPlugin.show_detailed_interface-563"><span class="linenos">563</span></a>                <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generate_video&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;generate_video_button_detailed&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-564"><a href="#ArticletovideoPlugin.show_detailed_interface-564"><span class="linenos">564</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">generate_all_images</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-565"><a href="#ArticletovideoPlugin.show_detailed_interface-565"><span class="linenos">565</span></a>                        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-566"><a href="#ArticletovideoPlugin.show_detailed_interface-566"><span class="linenos">566</span></a>                        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-567"><a href="#ArticletovideoPlugin.show_detailed_interface-567"><span class="linenos">567</span></a>                        <span class="n">config</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-568"><a href="#ArticletovideoPlugin.show_detailed_interface-568"><span class="linenos">568</span></a>                    <span class="p">)</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-569"><a href="#ArticletovideoPlugin.show_detailed_interface-569"><span class="linenos">569</span></a>            <span class="k">with</span> <span class="n">col2</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-570"><a href="#ArticletovideoPlugin.show_detailed_interface-570"><span class="linenos">570</span></a>                <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerate_audio&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;regenerate_audio_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-571"><a href="#ArticletovideoPlugin.show_detailed_interface-571"><span class="linenos">571</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">regenerate_audios</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">translated_text</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-572"><a href="#ArticletovideoPlugin.show_detailed_interface-572"><span class="linenos">572</span></a>            <span class="k">with</span> <span class="n">col3</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-573"><a href="#ArticletovideoPlugin.show_detailed_interface-573"><span class="linenos">573</span></a>                <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerate_images&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;regenerate_images_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-574"><a href="#ArticletovideoPlugin.show_detailed_interface-574"><span class="linenos">574</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">regenerate_images</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-575"><a href="#ArticletovideoPlugin.show_detailed_interface-575"><span class="linenos">575</span></a>
</span><span id="ArticletovideoPlugin.show_detailed_interface-576"><a href="#ArticletovideoPlugin.show_detailed_interface-576"><span class="linenos">576</span></a>        <span class="k">if</span> <span class="p">(</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-577"><a href="#ArticletovideoPlugin.show_detailed_interface-577"><span class="linenos">577</span></a>            <span class="s2">&quot;image_paths&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-578"><a href="#ArticletovideoPlugin.show_detailed_interface-578"><span class="linenos">578</span></a>            <span class="ow">and</span> <span class="s2">&quot;prompts&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-579"><a href="#ArticletovideoPlugin.show_detailed_interface-579"><span class="linenos">579</span></a>            <span class="ow">and</span> <span class="s2">&quot;segments&quot;</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-580"><a href="#ArticletovideoPlugin.show_detailed_interface-580"><span class="linenos">580</span></a>        <span class="p">):</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-581"><a href="#ArticletovideoPlugin.show_detailed_interface-581"><span class="linenos">581</span></a>            <span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;edit_images_and_prompts&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-582"><a href="#ArticletovideoPlugin.show_detailed_interface-582"><span class="linenos">582</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">display_image_gallery</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-583"><a href="#ArticletovideoPlugin.show_detailed_interface-583"><span class="linenos">583</span></a>
</span><span id="ArticletovideoPlugin.show_detailed_interface-584"><a href="#ArticletovideoPlugin.show_detailed_interface-584"><span class="linenos">584</span></a>            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;assemble_video&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;assemble_video_button&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-585"><a href="#ArticletovideoPlugin.show_detailed_interface-585"><span class="linenos">585</span></a>                <span class="n">audio_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-586"><a href="#ArticletovideoPlugin.show_detailed_interface-586"><span class="linenos">586</span></a>                <span class="n">image_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-587"><a href="#ArticletovideoPlugin.show_detailed_interface-587"><span class="linenos">587</span></a>                <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-588"><a href="#ArticletovideoPlugin.show_detailed_interface-588"><span class="linenos">588</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">assemble_final_video</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-589"><a href="#ArticletovideoPlugin.show_detailed_interface-589"><span class="linenos">589</span></a>                    <span class="n">config</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-590"><a href="#ArticletovideoPlugin.show_detailed_interface-590"><span class="linenos">590</span></a>                    <span class="n">use_zoom_and_transitions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-591"><a href="#ArticletovideoPlugin.show_detailed_interface-591"><span class="linenos">591</span></a>                    <span class="n">audio_paths</span><span class="o">=</span><span class="n">audio_paths</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-592"><a href="#ArticletovideoPlugin.show_detailed_interface-592"><span class="linenos">592</span></a>                    <span class="n">image_paths</span><span class="o">=</span><span class="n">image_paths</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-593"><a href="#ArticletovideoPlugin.show_detailed_interface-593"><span class="linenos">593</span></a>                    <span class="n">output_path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="s2">&quot;final_video.mp4&quot;</span><span class="p">),</span>
</span><span id="ArticletovideoPlugin.show_detailed_interface-594"><a href="#ArticletovideoPlugin.show_detailed_interface-594"><span class="linenos">594</span></a>                <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Displays a detailed user interface for generating videos step by step.</p>

<p>This method provides an interface in Streamlit that allows users to
retrieve an article, translate it, generate image prompts, and
assemble the final video in a detailed, step-by-step manner.</p>

<h2 id="parameters">Parameters</h2>

<p>config : dict
    The configuration dictionary containing user-defined settings for
    the plugin.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
plugin.show_detailed_interface(config)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.get_segments" class="classattr">
                                        <input id="ArticletovideoPlugin.get_segments-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_segments</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">text</span>, </span><span class="param"><span class="n">split_by</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.get_segments-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.get_segments"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.get_segments-596"><a href="#ArticletovideoPlugin.get_segments-596"><span class="linenos">596</span></a>    <span class="k">def</span> <span class="nf">get_segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.get_segments-597"><a href="#ArticletovideoPlugin.get_segments-597"><span class="linenos">597</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.get_segments-598"><a href="#ArticletovideoPlugin.get_segments-598"><span class="linenos">598</span></a><span class="sd">        Splits the provided text into segments based on the specified criterion.</span>
</span><span id="ArticletovideoPlugin.get_segments-599"><a href="#ArticletovideoPlugin.get_segments-599"><span class="linenos">599</span></a>
</span><span id="ArticletovideoPlugin.get_segments-600"><a href="#ArticletovideoPlugin.get_segments-600"><span class="linenos">600</span></a><span class="sd">        This method splits the text either by sentences or paragraphs, based on</span>
</span><span id="ArticletovideoPlugin.get_segments-601"><a href="#ArticletovideoPlugin.get_segments-601"><span class="linenos">601</span></a><span class="sd">        the `split_by` parameter, and filters out empty or invalid segments.</span>
</span><span id="ArticletovideoPlugin.get_segments-602"><a href="#ArticletovideoPlugin.get_segments-602"><span class="linenos">602</span></a>
</span><span id="ArticletovideoPlugin.get_segments-603"><a href="#ArticletovideoPlugin.get_segments-603"><span class="linenos">603</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.get_segments-604"><a href="#ArticletovideoPlugin.get_segments-604"><span class="linenos">604</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.get_segments-605"><a href="#ArticletovideoPlugin.get_segments-605"><span class="linenos">605</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin.get_segments-606"><a href="#ArticletovideoPlugin.get_segments-606"><span class="linenos">606</span></a><span class="sd">            The text to split into segments.</span>
</span><span id="ArticletovideoPlugin.get_segments-607"><a href="#ArticletovideoPlugin.get_segments-607"><span class="linenos">607</span></a><span class="sd">        split_by : str</span>
</span><span id="ArticletovideoPlugin.get_segments-608"><a href="#ArticletovideoPlugin.get_segments-608"><span class="linenos">608</span></a><span class="sd">            The criterion for splitting the text, either &quot;sentence&quot; or &quot;paragraph&quot;.</span>
</span><span id="ArticletovideoPlugin.get_segments-609"><a href="#ArticletovideoPlugin.get_segments-609"><span class="linenos">609</span></a>
</span><span id="ArticletovideoPlugin.get_segments-610"><a href="#ArticletovideoPlugin.get_segments-610"><span class="linenos">610</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin.get_segments-611"><a href="#ArticletovideoPlugin.get_segments-611"><span class="linenos">611</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin.get_segments-612"><a href="#ArticletovideoPlugin.get_segments-612"><span class="linenos">612</span></a><span class="sd">        list of str</span>
</span><span id="ArticletovideoPlugin.get_segments-613"><a href="#ArticletovideoPlugin.get_segments-613"><span class="linenos">613</span></a><span class="sd">            A list of text segments after splitting.</span>
</span><span id="ArticletovideoPlugin.get_segments-614"><a href="#ArticletovideoPlugin.get_segments-614"><span class="linenos">614</span></a>
</span><span id="ArticletovideoPlugin.get_segments-615"><a href="#ArticletovideoPlugin.get_segments-615"><span class="linenos">615</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.get_segments-616"><a href="#ArticletovideoPlugin.get_segments-616"><span class="linenos">616</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.get_segments-617"><a href="#ArticletovideoPlugin.get_segments-617"><span class="linenos">617</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin.get_segments-618"><a href="#ArticletovideoPlugin.get_segments-618"><span class="linenos">618</span></a><span class="sd">            If `split_by` is not &quot;sentence&quot; or &quot;paragraph&quot;.</span>
</span><span id="ArticletovideoPlugin.get_segments-619"><a href="#ArticletovideoPlugin.get_segments-619"><span class="linenos">619</span></a>
</span><span id="ArticletovideoPlugin.get_segments-620"><a href="#ArticletovideoPlugin.get_segments-620"><span class="linenos">620</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.get_segments-621"><a href="#ArticletovideoPlugin.get_segments-621"><span class="linenos">621</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.get_segments-622"><a href="#ArticletovideoPlugin.get_segments-622"><span class="linenos">622</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.get_segments-623"><a href="#ArticletovideoPlugin.get_segments-623"><span class="linenos">623</span></a><span class="sd">        segments = plugin.get_segments(&quot;This is the first sentence. This is the second.&quot;, &quot;sentence&quot;)</span>
</span><span id="ArticletovideoPlugin.get_segments-624"><a href="#ArticletovideoPlugin.get_segments-624"><span class="linenos">624</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.get_segments-625"><a href="#ArticletovideoPlugin.get_segments-625"><span class="linenos">625</span></a>        <span class="k">if</span> <span class="n">split_by</span> <span class="o">==</span> <span class="s2">&quot;sentence&quot;</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.get_segments-626"><a href="#ArticletovideoPlugin.get_segments-626"><span class="linenos">626</span></a>            <span class="n">segments</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;. &quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.get_segments-627"><a href="#ArticletovideoPlugin.get_segments-627"><span class="linenos">627</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.get_segments-628"><a href="#ArticletovideoPlugin.get_segments-628"><span class="linenos">628</span></a>            <span class="n">segments</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.get_segments-629"><a href="#ArticletovideoPlugin.get_segments-629"><span class="linenos">629</span></a>
</span><span id="ArticletovideoPlugin.get_segments-630"><a href="#ArticletovideoPlugin.get_segments-630"><span class="linenos">630</span></a>        <span class="c1"># Filtrer les segments</span>
</span><span id="ArticletovideoPlugin.get_segments-631"><a href="#ArticletovideoPlugin.get_segments-631"><span class="linenos">631</span></a>        <span class="n">filtered_segments</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin.get_segments-632"><a href="#ArticletovideoPlugin.get_segments-632"><span class="linenos">632</span></a>        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">segments</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.get_segments-633"><a href="#ArticletovideoPlugin.get_segments-633"><span class="linenos">633</span></a>            <span class="k">if</span> <span class="n">segment</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.get_segments-634"><a href="#ArticletovideoPlugin.get_segments-634"><span class="linenos">634</span></a>                <span class="k">continue</span>
</span><span id="ArticletovideoPlugin.get_segments-635"><a href="#ArticletovideoPlugin.get_segments-635"><span class="linenos">635</span></a>            <span class="n">segment</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin.get_segments-636"><a href="#ArticletovideoPlugin.get_segments-636"><span class="linenos">636</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">segment</span> <span class="ow">or</span> <span class="s2">&quot; &quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">segment</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.get_segments-637"><a href="#ArticletovideoPlugin.get_segments-637"><span class="linenos">637</span></a>                <span class="k">continue</span>
</span><span id="ArticletovideoPlugin.get_segments-638"><a href="#ArticletovideoPlugin.get_segments-638"><span class="linenos">638</span></a>            <span class="n">filtered_segments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">segment</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.get_segments-639"><a href="#ArticletovideoPlugin.get_segments-639"><span class="linenos">639</span></a>
</span><span id="ArticletovideoPlugin.get_segments-640"><a href="#ArticletovideoPlugin.get_segments-640"><span class="linenos">640</span></a>        <span class="k">return</span> <span class="n">filtered_segments</span>
</span></pre></div>


            <div class="docstring"><p>Splits the provided text into segments based on the specified criterion.</p>

<p>This method splits the text either by sentences or paragraphs, based on
the <code>split_by</code> parameter, and filters out empty or invalid segments.</p>

<h2 id="parameters">Parameters</h2>

<p>text : str
    The text to split into segments.
split_by : str
    The criterion for splitting the text, either "sentence" or "paragraph".</p>

<h2 id="returns">Returns</h2>

<p>list of str
    A list of text segments after splitting.</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If <code>split_by</code> is not "sentence" or "paragraph".</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
segments = plugin.get_segments("This is the first sentence. This is the second.", "sentence")</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.regenerate_audios" class="classattr">
                                        <input id="ArticletovideoPlugin.regenerate_audios-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">regenerate_audios</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">text</span>, </span><span class="param"><span class="n">config</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.regenerate_audios-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.regenerate_audios"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.regenerate_audios-642"><a href="#ArticletovideoPlugin.regenerate_audios-642"><span class="linenos">642</span></a>    <span class="k">def</span> <span class="nf">regenerate_audios</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-643"><a href="#ArticletovideoPlugin.regenerate_audios-643"><span class="linenos">643</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-644"><a href="#ArticletovideoPlugin.regenerate_audios-644"><span class="linenos">644</span></a><span class="sd">        Regenerates audio files from the given text using the configured TTS model.</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-645"><a href="#ArticletovideoPlugin.regenerate_audios-645"><span class="linenos">645</span></a>
</span><span id="ArticletovideoPlugin.regenerate_audios-646"><a href="#ArticletovideoPlugin.regenerate_audios-646"><span class="linenos">646</span></a><span class="sd">        This method splits the text into segments, generates audio for each</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-647"><a href="#ArticletovideoPlugin.regenerate_audios-647"><span class="linenos">647</span></a><span class="sd">        segment, and saves the audio files in the specified output directory.</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-648"><a href="#ArticletovideoPlugin.regenerate_audios-648"><span class="linenos">648</span></a>
</span><span id="ArticletovideoPlugin.regenerate_audios-649"><a href="#ArticletovideoPlugin.regenerate_audios-649"><span class="linenos">649</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-650"><a href="#ArticletovideoPlugin.regenerate_audios-650"><span class="linenos">650</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-651"><a href="#ArticletovideoPlugin.regenerate_audios-651"><span class="linenos">651</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-652"><a href="#ArticletovideoPlugin.regenerate_audios-652"><span class="linenos">652</span></a><span class="sd">            The text for which to regenerate audio.</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-653"><a href="#ArticletovideoPlugin.regenerate_audios-653"><span class="linenos">653</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-654"><a href="#ArticletovideoPlugin.regenerate_audios-654"><span class="linenos">654</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-655"><a href="#ArticletovideoPlugin.regenerate_audios-655"><span class="linenos">655</span></a><span class="sd">            the plugin, such as the TTS model and output directory.</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-656"><a href="#ArticletovideoPlugin.regenerate_audios-656"><span class="linenos">656</span></a>
</span><span id="ArticletovideoPlugin.regenerate_audios-657"><a href="#ArticletovideoPlugin.regenerate_audios-657"><span class="linenos">657</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-658"><a href="#ArticletovideoPlugin.regenerate_audios-658"><span class="linenos">658</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-659"><a href="#ArticletovideoPlugin.regenerate_audios-659"><span class="linenos">659</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-660"><a href="#ArticletovideoPlugin.regenerate_audios-660"><span class="linenos">660</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-661"><a href="#ArticletovideoPlugin.regenerate_audios-661"><span class="linenos">661</span></a>
</span><span id="ArticletovideoPlugin.regenerate_audios-662"><a href="#ArticletovideoPlugin.regenerate_audios-662"><span class="linenos">662</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-663"><a href="#ArticletovideoPlugin.regenerate_audios-663"><span class="linenos">663</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-664"><a href="#ArticletovideoPlugin.regenerate_audios-664"><span class="linenos">664</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-665"><a href="#ArticletovideoPlugin.regenerate_audios-665"><span class="linenos">665</span></a><span class="sd">        plugin.regenerate_audios(translated_text, config)</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-666"><a href="#ArticletovideoPlugin.regenerate_audios-666"><span class="linenos">666</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-667"><a href="#ArticletovideoPlugin.regenerate_audios-667"><span class="linenos">667</span></a>        <span class="n">split_by</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;split_by&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-668"><a href="#ArticletovideoPlugin.regenerate_audios-668"><span class="linenos">668</span></a>        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_segments</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-669"><a href="#ArticletovideoPlugin.regenerate_audios-669"><span class="linenos">669</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-670"><a href="#ArticletovideoPlugin.regenerate_audios-670"><span class="linenos">670</span></a>
</span><span id="ArticletovideoPlugin.regenerate_audios-671"><a href="#ArticletovideoPlugin.regenerate_audios-671"><span class="linenos">671</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerating_audio&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-672"><a href="#ArticletovideoPlugin.regenerate_audios-672"><span class="linenos">672</span></a>            <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-673"><a href="#ArticletovideoPlugin.regenerate_audios-673"><span class="linenos">673</span></a>            <span class="n">audio_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-674"><a href="#ArticletovideoPlugin.regenerate_audios-674"><span class="linenos">674</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">segment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">segments</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-675"><a href="#ArticletovideoPlugin.regenerate_audios-675"><span class="linenos">675</span></a>                <span class="n">audio_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;audio_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.wav&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-676"><a href="#ArticletovideoPlugin.regenerate_audios-676"><span class="linenos">676</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_one_audio</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">audio_path</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-677"><a href="#ArticletovideoPlugin.regenerate_audios-677"><span class="linenos">677</span></a>                <span class="n">audio_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">audio_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-678"><a href="#ArticletovideoPlugin.regenerate_audios-678"><span class="linenos">678</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-679"><a href="#ArticletovideoPlugin.regenerate_audios-679"><span class="linenos">679</span></a>
</span><span id="ArticletovideoPlugin.regenerate_audios-680"><a href="#ArticletovideoPlugin.regenerate_audios-680"><span class="linenos">680</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span> <span class="o">=</span> <span class="n">audio_paths</span>
</span><span id="ArticletovideoPlugin.regenerate_audios-681"><a href="#ArticletovideoPlugin.regenerate_audios-681"><span class="linenos">681</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;audio_regenerated&quot;</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Regenerates audio files from the given text using the configured TTS model.</p>

<p>This method splits the text into segments, generates audio for each
segment, and saves the audio files in the specified output directory.</p>

<h2 id="parameters">Parameters</h2>

<p>text : str
    The text for which to regenerate audio.
config : dict
    The configuration dictionary containing user-defined settings for
    the plugin, such as the TTS model and output directory.</p>

<h2 id="raises">Raises</h2>

<p>FileNotFoundError
    If the output directory does not exist.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
plugin.regenerate_audios(translated_text, config)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.regenerate_images" class="classattr">
                                        <input id="ArticletovideoPlugin.regenerate_images-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">regenerate_images</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">prompts</span>, </span><span class="param"><span class="n">config</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.regenerate_images-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.regenerate_images"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.regenerate_images-683"><a href="#ArticletovideoPlugin.regenerate_images-683"><span class="linenos">683</span></a>    <span class="k">def</span> <span class="nf">regenerate_images</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompts</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.regenerate_images-684"><a href="#ArticletovideoPlugin.regenerate_images-684"><span class="linenos">684</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.regenerate_images-685"><a href="#ArticletovideoPlugin.regenerate_images-685"><span class="linenos">685</span></a><span class="sd">        Regenerates images based on the provided prompts.</span>
</span><span id="ArticletovideoPlugin.regenerate_images-686"><a href="#ArticletovideoPlugin.regenerate_images-686"><span class="linenos">686</span></a>
</span><span id="ArticletovideoPlugin.regenerate_images-687"><a href="#ArticletovideoPlugin.regenerate_images-687"><span class="linenos">687</span></a><span class="sd">        This method generates new images based on the provided prompts and</span>
</span><span id="ArticletovideoPlugin.regenerate_images-688"><a href="#ArticletovideoPlugin.regenerate_images-688"><span class="linenos">688</span></a><span class="sd">        saves them in the specified output directory.</span>
</span><span id="ArticletovideoPlugin.regenerate_images-689"><a href="#ArticletovideoPlugin.regenerate_images-689"><span class="linenos">689</span></a>
</span><span id="ArticletovideoPlugin.regenerate_images-690"><a href="#ArticletovideoPlugin.regenerate_images-690"><span class="linenos">690</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.regenerate_images-691"><a href="#ArticletovideoPlugin.regenerate_images-691"><span class="linenos">691</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.regenerate_images-692"><a href="#ArticletovideoPlugin.regenerate_images-692"><span class="linenos">692</span></a><span class="sd">        prompts : list of str</span>
</span><span id="ArticletovideoPlugin.regenerate_images-693"><a href="#ArticletovideoPlugin.regenerate_images-693"><span class="linenos">693</span></a><span class="sd">            The image prompts to use for generating new images.</span>
</span><span id="ArticletovideoPlugin.regenerate_images-694"><a href="#ArticletovideoPlugin.regenerate_images-694"><span class="linenos">694</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin.regenerate_images-695"><a href="#ArticletovideoPlugin.regenerate_images-695"><span class="linenos">695</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin.regenerate_images-696"><a href="#ArticletovideoPlugin.regenerate_images-696"><span class="linenos">696</span></a><span class="sd">            the plugin, such as the output directory.</span>
</span><span id="ArticletovideoPlugin.regenerate_images-697"><a href="#ArticletovideoPlugin.regenerate_images-697"><span class="linenos">697</span></a>
</span><span id="ArticletovideoPlugin.regenerate_images-698"><a href="#ArticletovideoPlugin.regenerate_images-698"><span class="linenos">698</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.regenerate_images-699"><a href="#ArticletovideoPlugin.regenerate_images-699"><span class="linenos">699</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.regenerate_images-700"><a href="#ArticletovideoPlugin.regenerate_images-700"><span class="linenos">700</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin.regenerate_images-701"><a href="#ArticletovideoPlugin.regenerate_images-701"><span class="linenos">701</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="ArticletovideoPlugin.regenerate_images-702"><a href="#ArticletovideoPlugin.regenerate_images-702"><span class="linenos">702</span></a>
</span><span id="ArticletovideoPlugin.regenerate_images-703"><a href="#ArticletovideoPlugin.regenerate_images-703"><span class="linenos">703</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.regenerate_images-704"><a href="#ArticletovideoPlugin.regenerate_images-704"><span class="linenos">704</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.regenerate_images-705"><a href="#ArticletovideoPlugin.regenerate_images-705"><span class="linenos">705</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.regenerate_images-706"><a href="#ArticletovideoPlugin.regenerate_images-706"><span class="linenos">706</span></a><span class="sd">        plugin.regenerate_images(prompts, config)</span>
</span><span id="ArticletovideoPlugin.regenerate_images-707"><a href="#ArticletovideoPlugin.regenerate_images-707"><span class="linenos">707</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.regenerate_images-708"><a href="#ArticletovideoPlugin.regenerate_images-708"><span class="linenos">708</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin.regenerate_images-709"><a href="#ArticletovideoPlugin.regenerate_images-709"><span class="linenos">709</span></a>
</span><span id="ArticletovideoPlugin.regenerate_images-710"><a href="#ArticletovideoPlugin.regenerate_images-710"><span class="linenos">710</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerating_images&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin.regenerate_images-711"><a href="#ArticletovideoPlugin.regenerate_images-711"><span class="linenos">711</span></a>            <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.regenerate_images-712"><a href="#ArticletovideoPlugin.regenerate_images-712"><span class="linenos">712</span></a>            <span class="n">image_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin.regenerate_images-713"><a href="#ArticletovideoPlugin.regenerate_images-713"><span class="linenos">713</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">prompt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">prompts</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.regenerate_images-714"><a href="#ArticletovideoPlugin.regenerate_images-714"><span class="linenos">714</span></a>                <span class="n">image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.png&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.regenerate_images-715"><a href="#ArticletovideoPlugin.regenerate_images-715"><span class="linenos">715</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_image</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.regenerate_images-716"><a href="#ArticletovideoPlugin.regenerate_images-716"><span class="linenos">716</span></a>                <span class="n">image_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.regenerate_images-717"><a href="#ArticletovideoPlugin.regenerate_images-717"><span class="linenos">717</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">prompts</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.regenerate_images-718"><a href="#ArticletovideoPlugin.regenerate_images-718"><span class="linenos">718</span></a>
</span><span id="ArticletovideoPlugin.regenerate_images-719"><a href="#ArticletovideoPlugin.regenerate_images-719"><span class="linenos">719</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span> <span class="o">=</span> <span class="n">image_paths</span>
</span><span id="ArticletovideoPlugin.regenerate_images-720"><a href="#ArticletovideoPlugin.regenerate_images-720"><span class="linenos">720</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;images_regenerated&quot;</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Regenerates images based on the provided prompts.</p>

<p>This method generates new images based on the provided prompts and
saves them in the specified output directory.</p>

<h2 id="parameters">Parameters</h2>

<p>prompts : list of str
    The image prompts to use for generating new images.
config : dict
    The configuration dictionary containing user-defined settings for
    the plugin, such as the output directory.</p>

<h2 id="raises">Raises</h2>

<p>FileNotFoundError
    If the output directory does not exist.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
plugin.regenerate_images(prompts, config)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.convert_numbers_to_words_llm" class="classattr">
                                        <input id="ArticletovideoPlugin.convert_numbers_to_words_llm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">convert_numbers_to_words_llm</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">text</span>, </span><span class="param"><span class="n">lang</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.convert_numbers_to_words_llm-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.convert_numbers_to_words_llm"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-722"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-722"><span class="linenos">722</span></a>    <span class="k">def</span> <span class="nf">convert_numbers_to_words_llm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-723"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-723"><span class="linenos">723</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-724"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-724"><span class="linenos">724</span></a><span class="sd">        Converts numbers to words in the provided text using a language model.</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-725"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-725"><span class="linenos">725</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-726"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-726"><span class="linenos">726</span></a><span class="sd">        This method leverages an LLM (Language Model) to convert numbers,</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-727"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-727"><span class="linenos">727</span></a><span class="sd">        including percentages and dates, into words in the specified language.</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-728"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-728"><span class="linenos">728</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-729"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-729"><span class="linenos">729</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-730"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-730"><span class="linenos">730</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-731"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-731"><span class="linenos">731</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-732"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-732"><span class="linenos">732</span></a><span class="sd">            The text containing numbers to be converted to words.</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-733"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-733"><span class="linenos">733</span></a><span class="sd">        lang : str</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-734"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-734"><span class="linenos">734</span></a><span class="sd">            The language code indicating the target language for conversion (e.g., &#39;en&#39; for English, &#39;fr&#39; for French).</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-735"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-735"><span class="linenos">735</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-736"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-736"><span class="linenos">736</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-737"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-737"><span class="linenos">737</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-738"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-738"><span class="linenos">738</span></a><span class="sd">        str</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-739"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-739"><span class="linenos">739</span></a><span class="sd">            The text with all numbers converted to words by the LLM.</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-740"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-740"><span class="linenos">740</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-741"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-741"><span class="linenos">741</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-742"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-742"><span class="linenos">742</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-743"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-743"><span class="linenos">743</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-744"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-744"><span class="linenos">744</span></a><span class="sd">        result = plugin.convert_numbers_to_words_llm(&quot;Le prix est 20,5 %.&quot;, &quot;fr&quot;)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-745"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-745"><span class="linenos">745</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-746"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-746"><span class="linenos">746</span></a>        <span class="n">sysprompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;You are an AI assistant that converts numbers including real numbers and percentages to words in </span><span class="si">{</span><span class="n">lang</span><span class="si">}</span><span class="s2">. Maintain the original sentence structure and only convert the numbers and real numbers and percentages. DO NOT ADD COMMENTS&quot;</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-747"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-747"><span class="linenos">747</span></a>        <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Without adding any comment, convert all numbers and real numbers and percentages in the following text to words in </span><span class="si">{</span><span class="n">lang</span><span class="si">}</span><span class="s2">:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-748"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-748"><span class="linenos">748</span></a>        <span class="n">ragllm_plugin</span> <span class="o">=</span> <span class="n">RagllmPlugin</span><span class="p">(</span><span class="s2">&quot;ragllm&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-749"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-749"><span class="linenos">749</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">ragllm_plugin</span><span class="o">.</span><span class="n">call_llm</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words_llm-750"><a href="#ArticletovideoPlugin.convert_numbers_to_words_llm-750"><span class="linenos">750</span></a>        <span class="k">return</span> <span class="n">result</span>
</span></pre></div>


            <div class="docstring"><p>Converts numbers to words in the provided text using a language model.</p>

<p>This method leverages an LLM (Language Model) to convert numbers,
including percentages and dates, into words in the specified language.</p>

<h2 id="parameters">Parameters</h2>

<p>text : str
    The text containing numbers to be converted to words.
lang : str
    The language code indicating the target language for conversion (e.g., 'en' for English, 'fr' for French).</p>

<h2 id="returns">Returns</h2>

<p>str
    The text with all numbers converted to words by the LLM.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
result = plugin.convert_numbers_to_words_llm("Le prix est 20,5 %.", "fr")</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.convert_numbers_to_words" class="classattr">
                                        <input id="ArticletovideoPlugin.convert_numbers_to_words-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">convert_numbers_to_words</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">text</span>, </span><span class="param"><span class="n">lang</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.convert_numbers_to_words-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.convert_numbers_to_words"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.convert_numbers_to_words-752"><a href="#ArticletovideoPlugin.convert_numbers_to_words-752"><span class="linenos">752</span></a>    <span class="k">def</span> <span class="nf">convert_numbers_to_words</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-753"><a href="#ArticletovideoPlugin.convert_numbers_to_words-753"><span class="linenos">753</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-754"><a href="#ArticletovideoPlugin.convert_numbers_to_words-754"><span class="linenos">754</span></a><span class="sd">        Converts all numbers in the provided text to words in the specified language.</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-755"><a href="#ArticletovideoPlugin.convert_numbers_to_words-755"><span class="linenos">755</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-756"><a href="#ArticletovideoPlugin.convert_numbers_to_words-756"><span class="linenos">756</span></a><span class="sd">        This method handles the conversion of integers, decimal numbers, percentages,</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-757"><a href="#ArticletovideoPlugin.convert_numbers_to_words-757"><span class="linenos">757</span></a><span class="sd">        and dates to their word equivalents in the target language.</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-758"><a href="#ArticletovideoPlugin.convert_numbers_to_words-758"><span class="linenos">758</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-759"><a href="#ArticletovideoPlugin.convert_numbers_to_words-759"><span class="linenos">759</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-760"><a href="#ArticletovideoPlugin.convert_numbers_to_words-760"><span class="linenos">760</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-761"><a href="#ArticletovideoPlugin.convert_numbers_to_words-761"><span class="linenos">761</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-762"><a href="#ArticletovideoPlugin.convert_numbers_to_words-762"><span class="linenos">762</span></a><span class="sd">            The text containing numbers to be converted to words.</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-763"><a href="#ArticletovideoPlugin.convert_numbers_to_words-763"><span class="linenos">763</span></a><span class="sd">        lang : str</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-764"><a href="#ArticletovideoPlugin.convert_numbers_to_words-764"><span class="linenos">764</span></a><span class="sd">            The language code indicating the target language for conversion (e.g., &#39;en&#39; for English, &#39;fr&#39; for French).</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-765"><a href="#ArticletovideoPlugin.convert_numbers_to_words-765"><span class="linenos">765</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-766"><a href="#ArticletovideoPlugin.convert_numbers_to_words-766"><span class="linenos">766</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-767"><a href="#ArticletovideoPlugin.convert_numbers_to_words-767"><span class="linenos">767</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-768"><a href="#ArticletovideoPlugin.convert_numbers_to_words-768"><span class="linenos">768</span></a><span class="sd">        str</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-769"><a href="#ArticletovideoPlugin.convert_numbers_to_words-769"><span class="linenos">769</span></a><span class="sd">            The text with all numbers converted to words.</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-770"><a href="#ArticletovideoPlugin.convert_numbers_to_words-770"><span class="linenos">770</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-771"><a href="#ArticletovideoPlugin.convert_numbers_to_words-771"><span class="linenos">771</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-772"><a href="#ArticletovideoPlugin.convert_numbers_to_words-772"><span class="linenos">772</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-773"><a href="#ArticletovideoPlugin.convert_numbers_to_words-773"><span class="linenos">773</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-774"><a href="#ArticletovideoPlugin.convert_numbers_to_words-774"><span class="linenos">774</span></a><span class="sd">        result = plugin.convert_numbers_to_words(&quot;The temperature is 25.5 degrees.&quot;, &quot;en&quot;)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-775"><a href="#ArticletovideoPlugin.convert_numbers_to_words-775"><span class="linenos">775</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-776"><a href="#ArticletovideoPlugin.convert_numbers_to_words-776"><span class="linenos">776</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-777"><a href="#ArticletovideoPlugin.convert_numbers_to_words-777"><span class="linenos">777</span></a>        <span class="k">def</span> <span class="nf">convert_number</span><span class="p">(</span><span class="n">match</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-778"><a href="#ArticletovideoPlugin.convert_numbers_to_words-778"><span class="linenos">778</span></a>            <span class="n">number</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-779"><a href="#ArticletovideoPlugin.convert_numbers_to_words-779"><span class="linenos">779</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-780"><a href="#ArticletovideoPlugin.convert_numbers_to_words-780"><span class="linenos">780</span></a>            <span class="c1"># Convert percentages</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-781"><a href="#ArticletovideoPlugin.convert_numbers_to_words-781"><span class="linenos">781</span></a>            <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="s2">&quot;%&quot;</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-782"><a href="#ArticletovideoPlugin.convert_numbers_to_words-782"><span class="linenos">782</span></a>                <span class="k">return</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;percent&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-783"><a href="#ArticletovideoPlugin.convert_numbers_to_words-783"><span class="linenos">783</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-784"><a href="#ArticletovideoPlugin.convert_numbers_to_words-784"><span class="linenos">784</span></a>            <span class="k">if</span> <span class="s2">&quot;%&quot;</span> <span class="ow">in</span> <span class="n">number</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-785"><a href="#ArticletovideoPlugin.convert_numbers_to_words-785"><span class="linenos">785</span></a>                <span class="n">num</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">number</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-786"><a href="#ArticletovideoPlugin.convert_numbers_to_words-786"><span class="linenos">786</span></a>                <span class="k">return</span> <span class="n">num2words</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;percent&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-787"><a href="#ArticletovideoPlugin.convert_numbers_to_words-787"><span class="linenos">787</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-788"><a href="#ArticletovideoPlugin.convert_numbers_to_words-788"><span class="linenos">788</span></a>            <span class="c1"># Convert dates</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-789"><a href="#ArticletovideoPlugin.convert_numbers_to_words-789"><span class="linenos">789</span></a>            <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d{1,2}/\d{1,2}/\d</span><span class="si">{4}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-790"><a href="#ArticletovideoPlugin.convert_numbers_to_words-790"><span class="linenos">790</span></a>                <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-791"><a href="#ArticletovideoPlugin.convert_numbers_to_words-791"><span class="linenos">791</span></a>                <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_TIME</span><span class="p">,</span> <span class="n">lang</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-792"><a href="#ArticletovideoPlugin.convert_numbers_to_words-792"><span class="linenos">792</span></a>                <span class="k">return</span> <span class="n">date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> %B %Y&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-793"><a href="#ArticletovideoPlugin.convert_numbers_to_words-793"><span class="linenos">793</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-794"><a href="#ArticletovideoPlugin.convert_numbers_to_words-794"><span class="linenos">794</span></a>            <span class="c1"># Convert decimal numbers</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-795"><a href="#ArticletovideoPlugin.convert_numbers_to_words-795"><span class="linenos">795</span></a>            <span class="k">if</span> <span class="s2">&quot;.&quot;</span> <span class="ow">in</span> <span class="n">number</span> <span class="ow">or</span> <span class="s2">&quot;,&quot;</span> <span class="ow">in</span> <span class="n">number</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-796"><a href="#ArticletovideoPlugin.convert_numbers_to_words-796"><span class="linenos">796</span></a>                <span class="n">number</span> <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-797"><a href="#ArticletovideoPlugin.convert_numbers_to_words-797"><span class="linenos">797</span></a>                    <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-798"><a href="#ArticletovideoPlugin.convert_numbers_to_words-798"><span class="linenos">798</span></a>                <span class="p">)</span>  <span class="c1"># Normalize to dot as decimal separator</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-799"><a href="#ArticletovideoPlugin.convert_numbers_to_words-799"><span class="linenos">799</span></a>                <span class="n">integer_part</span><span class="p">,</span> <span class="n">decimal_part</span> <span class="o">=</span> <span class="n">number</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-800"><a href="#ArticletovideoPlugin.convert_numbers_to_words-800"><span class="linenos">800</span></a>                <span class="n">integer_words</span> <span class="o">=</span> <span class="n">num2words</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">integer_part</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-801"><a href="#ArticletovideoPlugin.convert_numbers_to_words-801"><span class="linenos">801</span></a>                <span class="n">decimal_words</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-802"><a href="#ArticletovideoPlugin.convert_numbers_to_words-802"><span class="linenos">802</span></a>                    <span class="n">num2words</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">digit</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span> <span class="k">for</span> <span class="n">digit</span> <span class="ow">in</span> <span class="n">decimal_part</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-803"><a href="#ArticletovideoPlugin.convert_numbers_to_words-803"><span class="linenos">803</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-804"><a href="#ArticletovideoPlugin.convert_numbers_to_words-804"><span class="linenos">804</span></a>                <span class="n">decimal_separator</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-805"><a href="#ArticletovideoPlugin.convert_numbers_to_words-805"><span class="linenos">805</span></a>                    <span class="n">t</span><span class="p">(</span><span class="s2">&quot;decimal_point&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">lang</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;en&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="n">t</span><span class="p">(</span><span class="s2">&quot;decimal_comma&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-806"><a href="#ArticletovideoPlugin.convert_numbers_to_words-806"><span class="linenos">806</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-807"><a href="#ArticletovideoPlugin.convert_numbers_to_words-807"><span class="linenos">807</span></a>                <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">integer_words</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">decimal_separator</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">decimal_words</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-808"><a href="#ArticletovideoPlugin.convert_numbers_to_words-808"><span class="linenos">808</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-809"><a href="#ArticletovideoPlugin.convert_numbers_to_words-809"><span class="linenos">809</span></a>            <span class="c1"># Convert integers</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-810"><a href="#ArticletovideoPlugin.convert_numbers_to_words-810"><span class="linenos">810</span></a>            <span class="k">return</span> <span class="n">num2words</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">),</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-811"><a href="#ArticletovideoPlugin.convert_numbers_to_words-811"><span class="linenos">811</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-812"><a href="#ArticletovideoPlugin.convert_numbers_to_words-812"><span class="linenos">812</span></a>        <span class="c1"># Regular expression to match numbers, percentages, and dates</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-813"><a href="#ArticletovideoPlugin.convert_numbers_to_words-813"><span class="linenos">813</span></a>        <span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\b\d+(?:[.,]\d+)?%?|%|\b\d{1,2}/\d{1,2}/\d</span><span class="si">{4}</span><span class="s2">\b&quot;</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-814"><a href="#ArticletovideoPlugin.convert_numbers_to_words-814"><span class="linenos">814</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-815"><a href="#ArticletovideoPlugin.convert_numbers_to_words-815"><span class="linenos">815</span></a>        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">convert_number</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-816"><a href="#ArticletovideoPlugin.convert_numbers_to_words-816"><span class="linenos">816</span></a>
</span><span id="ArticletovideoPlugin.convert_numbers_to_words-817"><a href="#ArticletovideoPlugin.convert_numbers_to_words-817"><span class="linenos">817</span></a>        <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">convert_number</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Converts all numbers in the provided text to words in the specified language.</p>

<p>This method handles the conversion of integers, decimal numbers, percentages,
and dates to their word equivalents in the target language.</p>

<h2 id="parameters">Parameters</h2>

<p>text : str
    The text containing numbers to be converted to words.
lang : str
    The language code indicating the target language for conversion (e.g., 'en' for English, 'fr' for French).</p>

<h2 id="returns">Returns</h2>

<p>str
    The text with all numbers converted to words.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
result = plugin.convert_numbers_to_words("The temperature is 25.5 degrees.", "en")</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.retrieve_article" class="classattr">
                                        <input id="ArticletovideoPlugin.retrieve_article-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">retrieve_article</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">url</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.retrieve_article-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.retrieve_article"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.retrieve_article-819"><a href="#ArticletovideoPlugin.retrieve_article-819"><span class="linenos">819</span></a>    <span class="k">def</span> <span class="nf">retrieve_article</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.retrieve_article-820"><a href="#ArticletovideoPlugin.retrieve_article-820"><span class="linenos">820</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.retrieve_article-821"><a href="#ArticletovideoPlugin.retrieve_article-821"><span class="linenos">821</span></a><span class="sd">        Retrieves and extracts the text content of an article from a given URL.</span>
</span><span id="ArticletovideoPlugin.retrieve_article-822"><a href="#ArticletovideoPlugin.retrieve_article-822"><span class="linenos">822</span></a>
</span><span id="ArticletovideoPlugin.retrieve_article-823"><a href="#ArticletovideoPlugin.retrieve_article-823"><span class="linenos">823</span></a><span class="sd">        This method fetches the web page at the provided URL and extracts the</span>
</span><span id="ArticletovideoPlugin.retrieve_article-824"><a href="#ArticletovideoPlugin.retrieve_article-824"><span class="linenos">824</span></a><span class="sd">        text from the paragraph (`&lt;p&gt;`) tags.</span>
</span><span id="ArticletovideoPlugin.retrieve_article-825"><a href="#ArticletovideoPlugin.retrieve_article-825"><span class="linenos">825</span></a>
</span><span id="ArticletovideoPlugin.retrieve_article-826"><a href="#ArticletovideoPlugin.retrieve_article-826"><span class="linenos">826</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.retrieve_article-827"><a href="#ArticletovideoPlugin.retrieve_article-827"><span class="linenos">827</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.retrieve_article-828"><a href="#ArticletovideoPlugin.retrieve_article-828"><span class="linenos">828</span></a><span class="sd">        url : str</span>
</span><span id="ArticletovideoPlugin.retrieve_article-829"><a href="#ArticletovideoPlugin.retrieve_article-829"><span class="linenos">829</span></a><span class="sd">            The URL of the article to retrieve.</span>
</span><span id="ArticletovideoPlugin.retrieve_article-830"><a href="#ArticletovideoPlugin.retrieve_article-830"><span class="linenos">830</span></a>
</span><span id="ArticletovideoPlugin.retrieve_article-831"><a href="#ArticletovideoPlugin.retrieve_article-831"><span class="linenos">831</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin.retrieve_article-832"><a href="#ArticletovideoPlugin.retrieve_article-832"><span class="linenos">832</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin.retrieve_article-833"><a href="#ArticletovideoPlugin.retrieve_article-833"><span class="linenos">833</span></a><span class="sd">        str</span>
</span><span id="ArticletovideoPlugin.retrieve_article-834"><a href="#ArticletovideoPlugin.retrieve_article-834"><span class="linenos">834</span></a><span class="sd">            The extracted text content of the article.</span>
</span><span id="ArticletovideoPlugin.retrieve_article-835"><a href="#ArticletovideoPlugin.retrieve_article-835"><span class="linenos">835</span></a>
</span><span id="ArticletovideoPlugin.retrieve_article-836"><a href="#ArticletovideoPlugin.retrieve_article-836"><span class="linenos">836</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.retrieve_article-837"><a href="#ArticletovideoPlugin.retrieve_article-837"><span class="linenos">837</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.retrieve_article-838"><a href="#ArticletovideoPlugin.retrieve_article-838"><span class="linenos">838</span></a><span class="sd">        requests.exceptions.RequestException</span>
</span><span id="ArticletovideoPlugin.retrieve_article-839"><a href="#ArticletovideoPlugin.retrieve_article-839"><span class="linenos">839</span></a><span class="sd">            If there is an issue with the HTTP request.</span>
</span><span id="ArticletovideoPlugin.retrieve_article-840"><a href="#ArticletovideoPlugin.retrieve_article-840"><span class="linenos">840</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin.retrieve_article-841"><a href="#ArticletovideoPlugin.retrieve_article-841"><span class="linenos">841</span></a><span class="sd">            If the URL is invalid or the article content cannot be retrieved.</span>
</span><span id="ArticletovideoPlugin.retrieve_article-842"><a href="#ArticletovideoPlugin.retrieve_article-842"><span class="linenos">842</span></a>
</span><span id="ArticletovideoPlugin.retrieve_article-843"><a href="#ArticletovideoPlugin.retrieve_article-843"><span class="linenos">843</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.retrieve_article-844"><a href="#ArticletovideoPlugin.retrieve_article-844"><span class="linenos">844</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.retrieve_article-845"><a href="#ArticletovideoPlugin.retrieve_article-845"><span class="linenos">845</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.retrieve_article-846"><a href="#ArticletovideoPlugin.retrieve_article-846"><span class="linenos">846</span></a><span class="sd">        text = plugin.retrieve_article(&quot;https://example.com/article&quot;)</span>
</span><span id="ArticletovideoPlugin.retrieve_article-847"><a href="#ArticletovideoPlugin.retrieve_article-847"><span class="linenos">847</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.retrieve_article-848"><a href="#ArticletovideoPlugin.retrieve_article-848"><span class="linenos">848</span></a>        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.retrieve_article-849"><a href="#ArticletovideoPlugin.retrieve_article-849"><span class="linenos">849</span></a>        <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.retrieve_article-850"><a href="#ArticletovideoPlugin.retrieve_article-850"><span class="linenos">850</span></a>        <span class="n">paragraphs</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.retrieve_article-851"><a href="#ArticletovideoPlugin.retrieve_article-851"><span class="linenos">851</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">p</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">paragraphs</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>Retrieves and extracts the text content of an article from a given URL.</p>

<p>This method fetches the web page at the provided URL and extracts the
text from the paragraph (<code>&lt;p&gt;</code>) tags.</p>

<h2 id="parameters">Parameters</h2>

<p>url : str
    The URL of the article to retrieve.</p>

<h2 id="returns">Returns</h2>

<p>str
    The extracted text content of the article.</p>

<h2 id="raises">Raises</h2>

<p>requests.exceptions.RequestException
    If there is an issue with the HTTP request.
ValueError
    If the URL is invalid or the article content cannot be retrieved.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
text = plugin.retrieve_article("https://example.com/article")</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.translate_text" class="classattr">
                                        <input id="ArticletovideoPlugin.translate_text-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">translate_text</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">text</span>, </span><span class="param"><span class="n">target_lang</span>, </span><span class="param"><span class="n">config</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.translate_text-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.translate_text"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.translate_text-853"><a href="#ArticletovideoPlugin.translate_text-853"><span class="linenos">853</span></a>    <span class="k">def</span> <span class="nf">translate_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">target_lang</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.translate_text-854"><a href="#ArticletovideoPlugin.translate_text-854"><span class="linenos">854</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.translate_text-855"><a href="#ArticletovideoPlugin.translate_text-855"><span class="linenos">855</span></a><span class="sd">        Translates the given text into the target language using a MarianMT model.</span>
</span><span id="ArticletovideoPlugin.translate_text-856"><a href="#ArticletovideoPlugin.translate_text-856"><span class="linenos">856</span></a>
</span><span id="ArticletovideoPlugin.translate_text-857"><a href="#ArticletovideoPlugin.translate_text-857"><span class="linenos">857</span></a><span class="sd">        This method translates text by splitting it into paragraphs and sentences,</span>
</span><span id="ArticletovideoPlugin.translate_text-858"><a href="#ArticletovideoPlugin.translate_text-858"><span class="linenos">858</span></a><span class="sd">        processing each individually, and then reassembling the translated text.</span>
</span><span id="ArticletovideoPlugin.translate_text-859"><a href="#ArticletovideoPlugin.translate_text-859"><span class="linenos">859</span></a><span class="sd">        Optionally, numbers in the text can be converted to words.</span>
</span><span id="ArticletovideoPlugin.translate_text-860"><a href="#ArticletovideoPlugin.translate_text-860"><span class="linenos">860</span></a>
</span><span id="ArticletovideoPlugin.translate_text-861"><a href="#ArticletovideoPlugin.translate_text-861"><span class="linenos">861</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.translate_text-862"><a href="#ArticletovideoPlugin.translate_text-862"><span class="linenos">862</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.translate_text-863"><a href="#ArticletovideoPlugin.translate_text-863"><span class="linenos">863</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin.translate_text-864"><a href="#ArticletovideoPlugin.translate_text-864"><span class="linenos">864</span></a><span class="sd">            The text to translate.</span>
</span><span id="ArticletovideoPlugin.translate_text-865"><a href="#ArticletovideoPlugin.translate_text-865"><span class="linenos">865</span></a><span class="sd">        target_lang : str</span>
</span><span id="ArticletovideoPlugin.translate_text-866"><a href="#ArticletovideoPlugin.translate_text-866"><span class="linenos">866</span></a><span class="sd">            The target language code (e.g., &#39;fr-fr&#39; for French).</span>
</span><span id="ArticletovideoPlugin.translate_text-867"><a href="#ArticletovideoPlugin.translate_text-867"><span class="linenos">867</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin.translate_text-868"><a href="#ArticletovideoPlugin.translate_text-868"><span class="linenos">868</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin.translate_text-869"><a href="#ArticletovideoPlugin.translate_text-869"><span class="linenos">869</span></a><span class="sd">            the plugin, such as whether to convert numbers to words.</span>
</span><span id="ArticletovideoPlugin.translate_text-870"><a href="#ArticletovideoPlugin.translate_text-870"><span class="linenos">870</span></a>
</span><span id="ArticletovideoPlugin.translate_text-871"><a href="#ArticletovideoPlugin.translate_text-871"><span class="linenos">871</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin.translate_text-872"><a href="#ArticletovideoPlugin.translate_text-872"><span class="linenos">872</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin.translate_text-873"><a href="#ArticletovideoPlugin.translate_text-873"><span class="linenos">873</span></a><span class="sd">        str</span>
</span><span id="ArticletovideoPlugin.translate_text-874"><a href="#ArticletovideoPlugin.translate_text-874"><span class="linenos">874</span></a><span class="sd">            The translated text.</span>
</span><span id="ArticletovideoPlugin.translate_text-875"><a href="#ArticletovideoPlugin.translate_text-875"><span class="linenos">875</span></a>
</span><span id="ArticletovideoPlugin.translate_text-876"><a href="#ArticletovideoPlugin.translate_text-876"><span class="linenos">876</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.translate_text-877"><a href="#ArticletovideoPlugin.translate_text-877"><span class="linenos">877</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.translate_text-878"><a href="#ArticletovideoPlugin.translate_text-878"><span class="linenos">878</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin.translate_text-879"><a href="#ArticletovideoPlugin.translate_text-879"><span class="linenos">879</span></a><span class="sd">            If the target language is not supported or translation fails.</span>
</span><span id="ArticletovideoPlugin.translate_text-880"><a href="#ArticletovideoPlugin.translate_text-880"><span class="linenos">880</span></a>
</span><span id="ArticletovideoPlugin.translate_text-881"><a href="#ArticletovideoPlugin.translate_text-881"><span class="linenos">881</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.translate_text-882"><a href="#ArticletovideoPlugin.translate_text-882"><span class="linenos">882</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.translate_text-883"><a href="#ArticletovideoPlugin.translate_text-883"><span class="linenos">883</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.translate_text-884"><a href="#ArticletovideoPlugin.translate_text-884"><span class="linenos">884</span></a><span class="sd">        translated_text = plugin.translate_text(&quot;Hello, world!&quot;, &quot;fr-fr&quot;, config)</span>
</span><span id="ArticletovideoPlugin.translate_text-885"><a href="#ArticletovideoPlugin.translate_text-885"><span class="linenos">885</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.translate_text-886"><a href="#ArticletovideoPlugin.translate_text-886"><span class="linenos">886</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">translator</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.translate_text-887"><a href="#ArticletovideoPlugin.translate_text-887"><span class="linenos">887</span></a>            <span class="n">model_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Helsinki-NLP/opus-mt-en-</span><span class="si">{</span><span class="n">target_lang</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin.translate_text-888"><a href="#ArticletovideoPlugin.translate_text-888"><span class="linenos">888</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">translator</span> <span class="o">=</span> <span class="n">MarianMTModel</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-889"><a href="#ArticletovideoPlugin.translate_text-889"><span class="linenos">889</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tokenizer</span> <span class="o">=</span> <span class="n">MarianTokenizer</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-890"><a href="#ArticletovideoPlugin.translate_text-890"><span class="linenos">890</span></a>
</span><span id="ArticletovideoPlugin.translate_text-891"><a href="#ArticletovideoPlugin.translate_text-891"><span class="linenos">891</span></a>        <span class="n">paragraphs</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-892"><a href="#ArticletovideoPlugin.translate_text-892"><span class="linenos">892</span></a>        <span class="n">translated_paragraphs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin.translate_text-893"><a href="#ArticletovideoPlugin.translate_text-893"><span class="linenos">893</span></a>        <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-894"><a href="#ArticletovideoPlugin.translate_text-894"><span class="linenos">894</span></a>
</span><span id="ArticletovideoPlugin.translate_text-895"><a href="#ArticletovideoPlugin.translate_text-895"><span class="linenos">895</span></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Traductions&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-896"><a href="#ArticletovideoPlugin.translate_text-896"><span class="linenos">896</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;processing&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin.translate_text-897"><a href="#ArticletovideoPlugin.translate_text-897"><span class="linenos">897</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">paragraph</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.translate_text-898"><a href="#ArticletovideoPlugin.translate_text-898"><span class="linenos">898</span></a>                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--------------------------------&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-899"><a href="#ArticletovideoPlugin.translate_text-899"><span class="linenos">899</span></a>                <span class="n">sentences</span> <span class="o">=</span> <span class="n">paragraph</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;. &quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-900"><a href="#ArticletovideoPlugin.translate_text-900"><span class="linenos">900</span></a>                <span class="n">translated_sentences</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin.translate_text-901"><a href="#ArticletovideoPlugin.translate_text-901"><span class="linenos">901</span></a>
</span><span id="ArticletovideoPlugin.translate_text-902"><a href="#ArticletovideoPlugin.translate_text-902"><span class="linenos">902</span></a>                <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.translate_text-903"><a href="#ArticletovideoPlugin.translate_text-903"><span class="linenos">903</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">sentence</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
</span><span id="ArticletovideoPlugin.translate_text-904"><a href="#ArticletovideoPlugin.translate_text-904"><span class="linenos">904</span></a>                        <span class="k">continue</span>
</span><span id="ArticletovideoPlugin.translate_text-905"><a href="#ArticletovideoPlugin.translate_text-905"><span class="linenos">905</span></a>
</span><span id="ArticletovideoPlugin.translate_text-906"><a href="#ArticletovideoPlugin.translate_text-906"><span class="linenos">906</span></a>                    <span class="n">inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenizer</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.translate_text-907"><a href="#ArticletovideoPlugin.translate_text-907"><span class="linenos">907</span></a>                        <span class="n">sentence</span><span class="p">,</span> <span class="n">return_tensors</span><span class="o">=</span><span class="s2">&quot;pt&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">truncation</span><span class="o">=</span><span class="kc">True</span>
</span><span id="ArticletovideoPlugin.translate_text-908"><a href="#ArticletovideoPlugin.translate_text-908"><span class="linenos">908</span></a>                    <span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-909"><a href="#ArticletovideoPlugin.translate_text-909"><span class="linenos">909</span></a>                    <span class="n">translated</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">translator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-910"><a href="#ArticletovideoPlugin.translate_text-910"><span class="linenos">910</span></a>                    <span class="n">translated_sentence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokenizer</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.translate_text-911"><a href="#ArticletovideoPlugin.translate_text-911"><span class="linenos">911</span></a>                        <span class="n">translated</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">skip_special_tokens</span><span class="o">=</span><span class="kc">True</span>
</span><span id="ArticletovideoPlugin.translate_text-912"><a href="#ArticletovideoPlugin.translate_text-912"><span class="linenos">912</span></a>                    <span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-913"><a href="#ArticletovideoPlugin.translate_text-913"><span class="linenos">913</span></a>                    <span class="c1"># Convert numbers to words after translation</span>
</span><span id="ArticletovideoPlugin.translate_text-914"><a href="#ArticletovideoPlugin.translate_text-914"><span class="linenos">914</span></a>                    <span class="k">if</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;convert_numbers&quot;</span><span class="p">]:</span>
</span><span id="ArticletovideoPlugin.translate_text-915"><a href="#ArticletovideoPlugin.translate_text-915"><span class="linenos">915</span></a>                        <span class="n">translated_sentence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_numbers_to_words</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.translate_text-916"><a href="#ArticletovideoPlugin.translate_text-916"><span class="linenos">916</span></a>                            <span class="n">translated_sentence</span><span class="p">,</span> <span class="n">target_lang</span>
</span><span id="ArticletovideoPlugin.translate_text-917"><a href="#ArticletovideoPlugin.translate_text-917"><span class="linenos">917</span></a>                        <span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-918"><a href="#ArticletovideoPlugin.translate_text-918"><span class="linenos">918</span></a>                    <span class="n">truncated_sentence</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.translate_text-919"><a href="#ArticletovideoPlugin.translate_text-919"><span class="linenos">919</span></a>                        <span class="sa">r</span><span class="s2">&quot;[.\n]&quot;</span><span class="p">,</span> <span class="n">translated_sentence</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span>
</span><span id="ArticletovideoPlugin.translate_text-920"><a href="#ArticletovideoPlugin.translate_text-920"><span class="linenos">920</span></a>                    <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin.translate_text-921"><a href="#ArticletovideoPlugin.translate_text-921"><span class="linenos">921</span></a>                    <span class="n">translated_sentences</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">truncated_sentence</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-922"><a href="#ArticletovideoPlugin.translate_text-922"><span class="linenos">922</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\033</span><span class="s2">[1m</span><span class="se">\033</span><span class="s2">[31m</span><span class="si">{</span><span class="n">sentence</span><span class="si">}</span><span class="se">\033</span><span class="s2">[0m&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-923"><a href="#ArticletovideoPlugin.translate_text-923"><span class="linenos">923</span></a>                    <span class="nb">print</span><span class="p">(</span><span class="n">translated_sentence</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-924"><a href="#ArticletovideoPlugin.translate_text-924"><span class="linenos">924</span></a>
</span><span id="ArticletovideoPlugin.translate_text-925"><a href="#ArticletovideoPlugin.translate_text-925"><span class="linenos">925</span></a>                <span class="n">translated_paragraph</span> <span class="o">=</span> <span class="s2">&quot;. &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">translated_sentences</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-926"><a href="#ArticletovideoPlugin.translate_text-926"><span class="linenos">926</span></a>                <span class="n">translated_paragraphs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">translated_paragraph</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text-927"><a href="#ArticletovideoPlugin.translate_text-927"><span class="linenos">927</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.translate_text-928"><a href="#ArticletovideoPlugin.translate_text-928"><span class="linenos">928</span></a>
</span><span id="ArticletovideoPlugin.translate_text-929"><a href="#ArticletovideoPlugin.translate_text-929"><span class="linenos">929</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">translated_paragraphs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Translates the given text into the target language using a MarianMT model.</p>

<p>This method translates text by splitting it into paragraphs and sentences,
processing each individually, and then reassembling the translated text.
Optionally, numbers in the text can be converted to words.</p>

<h2 id="parameters">Parameters</h2>

<p>text : str
    The text to translate.
target_lang : str
    The target language code (e.g., 'fr-fr' for French).
config : dict
    The configuration dictionary containing user-defined settings for
    the plugin, such as whether to convert numbers to words.</p>

<h2 id="returns">Returns</h2>

<p>str
    The translated text.</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If the target language is not supported or translation fails.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
translated_text = plugin.translate_text("Hello, world!", "fr-fr", config)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.translate_text_withllm" class="classattr">
                                        <input id="ArticletovideoPlugin.translate_text_withllm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">translate_text_withllm</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">text</span>, </span><span class="param"><span class="n">target_lang</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.translate_text_withllm-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.translate_text_withllm"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.translate_text_withllm-931"><a href="#ArticletovideoPlugin.translate_text_withllm-931"><span class="linenos">931</span></a>    <span class="k">def</span> <span class="nf">translate_text_withllm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">target_lang</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-932"><a href="#ArticletovideoPlugin.translate_text_withllm-932"><span class="linenos">932</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-933"><a href="#ArticletovideoPlugin.translate_text_withllm-933"><span class="linenos">933</span></a><span class="sd">        Translates text into the target language using a language model (LLM).</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-934"><a href="#ArticletovideoPlugin.translate_text_withllm-934"><span class="linenos">934</span></a>
</span><span id="ArticletovideoPlugin.translate_text_withllm-935"><a href="#ArticletovideoPlugin.translate_text_withllm-935"><span class="linenos">935</span></a><span class="sd">        This method translates the given text into the specified target language</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-936"><a href="#ArticletovideoPlugin.translate_text_withllm-936"><span class="linenos">936</span></a><span class="sd">        by leveraging a language model (LLM). The translation includes converting</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-937"><a href="#ArticletovideoPlugin.translate_text_withllm-937"><span class="linenos">937</span></a><span class="sd">        numbers and percentages to words in the target language. The text is</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-938"><a href="#ArticletovideoPlugin.translate_text_withllm-938"><span class="linenos">938</span></a><span class="sd">        split into paragraphs, each translated separately, and the resulting</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-939"><a href="#ArticletovideoPlugin.translate_text_withllm-939"><span class="linenos">939</span></a><span class="sd">        translated paragraphs are then combined.</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-940"><a href="#ArticletovideoPlugin.translate_text_withllm-940"><span class="linenos">940</span></a>
</span><span id="ArticletovideoPlugin.translate_text_withllm-941"><a href="#ArticletovideoPlugin.translate_text_withllm-941"><span class="linenos">941</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-942"><a href="#ArticletovideoPlugin.translate_text_withllm-942"><span class="linenos">942</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-943"><a href="#ArticletovideoPlugin.translate_text_withllm-943"><span class="linenos">943</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-944"><a href="#ArticletovideoPlugin.translate_text_withllm-944"><span class="linenos">944</span></a><span class="sd">            The text to be translated.</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-945"><a href="#ArticletovideoPlugin.translate_text_withllm-945"><span class="linenos">945</span></a><span class="sd">        target_lang : str</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-946"><a href="#ArticletovideoPlugin.translate_text_withllm-946"><span class="linenos">946</span></a><span class="sd">            The target language code (e.g., &#39;fr&#39; for French, &#39;en&#39; for English).</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-947"><a href="#ArticletovideoPlugin.translate_text_withllm-947"><span class="linenos">947</span></a>
</span><span id="ArticletovideoPlugin.translate_text_withllm-948"><a href="#ArticletovideoPlugin.translate_text_withllm-948"><span class="linenos">948</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-949"><a href="#ArticletovideoPlugin.translate_text_withllm-949"><span class="linenos">949</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-950"><a href="#ArticletovideoPlugin.translate_text_withllm-950"><span class="linenos">950</span></a><span class="sd">        str</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-951"><a href="#ArticletovideoPlugin.translate_text_withllm-951"><span class="linenos">951</span></a><span class="sd">            The translated text, with numbers and percentages converted to words</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-952"><a href="#ArticletovideoPlugin.translate_text_withllm-952"><span class="linenos">952</span></a><span class="sd">            in the target language.</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-953"><a href="#ArticletovideoPlugin.translate_text_withllm-953"><span class="linenos">953</span></a>
</span><span id="ArticletovideoPlugin.translate_text_withllm-954"><a href="#ArticletovideoPlugin.translate_text_withllm-954"><span class="linenos">954</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-955"><a href="#ArticletovideoPlugin.translate_text_withllm-955"><span class="linenos">955</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-956"><a href="#ArticletovideoPlugin.translate_text_withllm-956"><span class="linenos">956</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-957"><a href="#ArticletovideoPlugin.translate_text_withllm-957"><span class="linenos">957</span></a><span class="sd">            If the translation fails or the language model returns an invalid response.</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-958"><a href="#ArticletovideoPlugin.translate_text_withllm-958"><span class="linenos">958</span></a>
</span><span id="ArticletovideoPlugin.translate_text_withllm-959"><a href="#ArticletovideoPlugin.translate_text_withllm-959"><span class="linenos">959</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-960"><a href="#ArticletovideoPlugin.translate_text_withllm-960"><span class="linenos">960</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-961"><a href="#ArticletovideoPlugin.translate_text_withllm-961"><span class="linenos">961</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-962"><a href="#ArticletovideoPlugin.translate_text_withllm-962"><span class="linenos">962</span></a><span class="sd">        translated_text = plugin.translate_text_withllm(&quot;The price is 25.5%.&quot;, &quot;fr&quot;)</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-963"><a href="#ArticletovideoPlugin.translate_text_withllm-963"><span class="linenos">963</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-964"><a href="#ArticletovideoPlugin.translate_text_withllm-964"><span class="linenos">964</span></a>        <span class="n">paragraphs</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-965"><a href="#ArticletovideoPlugin.translate_text_withllm-965"><span class="linenos">965</span></a>        <span class="n">translated_paragraphs</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-966"><a href="#ArticletovideoPlugin.translate_text_withllm-966"><span class="linenos">966</span></a>        <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-967"><a href="#ArticletovideoPlugin.translate_text_withllm-967"><span class="linenos">967</span></a>
</span><span id="ArticletovideoPlugin.translate_text_withllm-968"><a href="#ArticletovideoPlugin.translate_text_withllm-968"><span class="linenos">968</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;translating&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-969"><a href="#ArticletovideoPlugin.translate_text_withllm-969"><span class="linenos">969</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">paragraph</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-970"><a href="#ArticletovideoPlugin.translate_text_withllm-970"><span class="linenos">970</span></a>                <span class="n">sysprompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;You are a professional translator. Translate the given text from English to </span><span class="si">{</span><span class="n">target_lang</span><span class="si">}</span><span class="s2">. Maintain the original tone and style. Convert all numbers, including real numbers and percentages, to words in the target language. DO NOT ADD COMMENTS OR EXPLANATIONS.&quot;</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-971"><a href="#ArticletovideoPlugin.translate_text_withllm-971"><span class="linenos">971</span></a>                <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Translate the following text to </span><span class="si">{</span><span class="n">target_lang</span><span class="si">}</span><span class="s2">, converting all numbers and real numbers and percent sign to words, do not add any comment:</span><span class="se">\n\n</span><span class="si">{</span><span class="n">paragraph</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-972"><a href="#ArticletovideoPlugin.translate_text_withllm-972"><span class="linenos">972</span></a>
</span><span id="ArticletovideoPlugin.translate_text_withllm-973"><a href="#ArticletovideoPlugin.translate_text_withllm-973"><span class="linenos">973</span></a>                <span class="n">ragllm_plugin</span> <span class="o">=</span> <span class="n">RagllmPlugin</span><span class="p">(</span><span class="s2">&quot;ragllm&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-974"><a href="#ArticletovideoPlugin.translate_text_withllm-974"><span class="linenos">974</span></a>                <span class="n">translated_paragraph</span> <span class="o">=</span> <span class="n">ragllm_plugin</span><span class="o">.</span><span class="n">call_llm</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-975"><a href="#ArticletovideoPlugin.translate_text_withllm-975"><span class="linenos">975</span></a>
</span><span id="ArticletovideoPlugin.translate_text_withllm-976"><a href="#ArticletovideoPlugin.translate_text_withllm-976"><span class="linenos">976</span></a>                <span class="n">truncated_paragraph</span> <span class="o">=</span> <span class="n">translated_paragraph</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">maxsplit</span><span class="o">=</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-977"><a href="#ArticletovideoPlugin.translate_text_withllm-977"><span class="linenos">977</span></a>                <span class="n">translated_paragraphs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">truncated_paragraph</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-978"><a href="#ArticletovideoPlugin.translate_text_withllm-978"><span class="linenos">978</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.translate_text_withllm-979"><a href="#ArticletovideoPlugin.translate_text_withllm-979"><span class="linenos">979</span></a>
</span><span id="ArticletovideoPlugin.translate_text_withllm-980"><a href="#ArticletovideoPlugin.translate_text_withllm-980"><span class="linenos">980</span></a>        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">translated_paragraphs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Translates text into the target language using a language model (LLM).</p>

<p>This method translates the given text into the specified target language
by leveraging a language model (LLM). The translation includes converting
numbers and percentages to words in the target language. The text is
split into paragraphs, each translated separately, and the resulting
translated paragraphs are then combined.</p>

<h2 id="parameters">Parameters</h2>

<p>text : str
    The text to be translated.
target_lang : str
    The target language code (e.g., 'fr' for French, 'en' for English).</p>

<h2 id="returns">Returns</h2>

<p>str
    The translated text, with numbers and percentages converted to words
    in the target language.</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If the translation fails or the language model returns an invalid response.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
translated_text = plugin.translate_text_withllm("The price is 25.5%.", "fr")</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.generate_and_edit_prompts" class="classattr">
                                        <input id="ArticletovideoPlugin.generate_and_edit_prompts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generate_and_edit_prompts</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">text</span>, </span><span class="param"><span class="n">config</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.generate_and_edit_prompts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.generate_and_edit_prompts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.generate_and_edit_prompts-982"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-982"><span class="linenos"> 982</span></a>    <span class="k">def</span> <span class="nf">generate_and_edit_prompts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-983"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-983"><span class="linenos"> 983</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-984"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-984"><span class="linenos"> 984</span></a><span class="sd">        Generates and optionally edits image prompts based on the translated text.</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-985"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-985"><span class="linenos"> 985</span></a>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-986"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-986"><span class="linenos"> 986</span></a><span class="sd">        This method splits the text into segments, generates image prompts for</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-987"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-987"><span class="linenos"> 987</span></a><span class="sd">        each segment, and allows the user to edit these prompts.</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-988"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-988"><span class="linenos"> 988</span></a>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-989"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-989"><span class="linenos"> 989</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-990"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-990"><span class="linenos"> 990</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-991"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-991"><span class="linenos"> 991</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-992"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-992"><span class="linenos"> 992</span></a><span class="sd">            The translated text for which to generate image prompts.</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-993"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-993"><span class="linenos"> 993</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-994"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-994"><span class="linenos"> 994</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-995"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-995"><span class="linenos"> 995</span></a><span class="sd">            the plugin, such as the system prompt for generating image prompts.</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-996"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-996"><span class="linenos"> 996</span></a>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-997"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-997"><span class="linenos"> 997</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-998"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-998"><span class="linenos"> 998</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-999"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-999"><span class="linenos"> 999</span></a><span class="sd">        list of str</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1000"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1000"><span class="linenos">1000</span></a><span class="sd">            A list of generated (and possibly edited) image prompts.</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1001"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1001"><span class="linenos">1001</span></a>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1002"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1002"><span class="linenos">1002</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1003"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1003"><span class="linenos">1003</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1004"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1004"><span class="linenos">1004</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1005"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1005"><span class="linenos">1005</span></a><span class="sd">        prompts = plugin.generate_and_edit_prompts(translated_text, config)</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1006"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1006"><span class="linenos">1006</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1007"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1007"><span class="linenos">1007</span></a>        <span class="n">split_by</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;split_by&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1008"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1008"><span class="linenos">1008</span></a>        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_segments</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1009"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1009"><span class="linenos">1009</span></a>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1010"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1010"><span class="linenos">1010</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generating_prompts&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1011"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1011"><span class="linenos">1011</span></a>            <span class="n">prompts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_all_image_prompts</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1012"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1012"><span class="linenos">1012</span></a>                <span class="n">segments</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;image_sysprompt&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1013"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1013"><span class="linenos">1013</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_and_edit_prompts-1014"><a href="#ArticletovideoPlugin.generate_and_edit_prompts-1014"><span class="linenos">1014</span></a>            <span class="k">return</span> <span class="n">prompts</span>
</span></pre></div>


            <div class="docstring"><p>Generates and optionally edits image prompts based on the translated text.</p>

<p>This method splits the text into segments, generates image prompts for
each segment, and allows the user to edit these prompts.</p>

<h2 id="parameters">Parameters</h2>

<p>text : str
    The translated text for which to generate image prompts.
config : dict
    The configuration dictionary containing user-defined settings for
    the plugin, such as the system prompt for generating image prompts.</p>

<h2 id="returns">Returns</h2>

<p>list of str
    A list of generated (and possibly edited) image prompts.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
prompts = plugin.generate_and_edit_prompts(translated_text, config)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.display_prompts" class="classattr">
                                        <input id="ArticletovideoPlugin.display_prompts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">display_prompts</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">prompts</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.display_prompts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.display_prompts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.display_prompts-1016"><a href="#ArticletovideoPlugin.display_prompts-1016"><span class="linenos">1016</span></a>    <span class="k">def</span> <span class="nf">display_prompts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompts</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.display_prompts-1017"><a href="#ArticletovideoPlugin.display_prompts-1017"><span class="linenos">1017</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.display_prompts-1018"><a href="#ArticletovideoPlugin.display_prompts-1018"><span class="linenos">1018</span></a><span class="sd">        Displays and allows editing of image prompts in the Streamlit interface.</span>
</span><span id="ArticletovideoPlugin.display_prompts-1019"><a href="#ArticletovideoPlugin.display_prompts-1019"><span class="linenos">1019</span></a>
</span><span id="ArticletovideoPlugin.display_prompts-1020"><a href="#ArticletovideoPlugin.display_prompts-1020"><span class="linenos">1020</span></a><span class="sd">        This method takes a list of image prompts, displays them in a text area</span>
</span><span id="ArticletovideoPlugin.display_prompts-1021"><a href="#ArticletovideoPlugin.display_prompts-1021"><span class="linenos">1021</span></a><span class="sd">        within the Streamlit interface, and allows the user to edit the prompts.</span>
</span><span id="ArticletovideoPlugin.display_prompts-1022"><a href="#ArticletovideoPlugin.display_prompts-1022"><span class="linenos">1022</span></a><span class="sd">        The edited prompts are then saved back into the session state for further</span>
</span><span id="ArticletovideoPlugin.display_prompts-1023"><a href="#ArticletovideoPlugin.display_prompts-1023"><span class="linenos">1023</span></a><span class="sd">        processing.</span>
</span><span id="ArticletovideoPlugin.display_prompts-1024"><a href="#ArticletovideoPlugin.display_prompts-1024"><span class="linenos">1024</span></a>
</span><span id="ArticletovideoPlugin.display_prompts-1025"><a href="#ArticletovideoPlugin.display_prompts-1025"><span class="linenos">1025</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.display_prompts-1026"><a href="#ArticletovideoPlugin.display_prompts-1026"><span class="linenos">1026</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.display_prompts-1027"><a href="#ArticletovideoPlugin.display_prompts-1027"><span class="linenos">1027</span></a><span class="sd">        prompts : list of str</span>
</span><span id="ArticletovideoPlugin.display_prompts-1028"><a href="#ArticletovideoPlugin.display_prompts-1028"><span class="linenos">1028</span></a><span class="sd">            A list of image prompts to be displayed and edited. Each prompt corresponds</span>
</span><span id="ArticletovideoPlugin.display_prompts-1029"><a href="#ArticletovideoPlugin.display_prompts-1029"><span class="linenos">1029</span></a><span class="sd">            to a specific segment of the text and is intended to guide the generation</span>
</span><span id="ArticletovideoPlugin.display_prompts-1030"><a href="#ArticletovideoPlugin.display_prompts-1030"><span class="linenos">1030</span></a><span class="sd">            of an image.</span>
</span><span id="ArticletovideoPlugin.display_prompts-1031"><a href="#ArticletovideoPlugin.display_prompts-1031"><span class="linenos">1031</span></a>
</span><span id="ArticletovideoPlugin.display_prompts-1032"><a href="#ArticletovideoPlugin.display_prompts-1032"><span class="linenos">1032</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.display_prompts-1033"><a href="#ArticletovideoPlugin.display_prompts-1033"><span class="linenos">1033</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.display_prompts-1034"><a href="#ArticletovideoPlugin.display_prompts-1034"><span class="linenos">1034</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.display_prompts-1035"><a href="#ArticletovideoPlugin.display_prompts-1035"><span class="linenos">1035</span></a><span class="sd">        prompts = [&quot;A sunny day at the beach.&quot;, &quot;A crowded market in the city.&quot;]</span>
</span><span id="ArticletovideoPlugin.display_prompts-1036"><a href="#ArticletovideoPlugin.display_prompts-1036"><span class="linenos">1036</span></a><span class="sd">        plugin.display_prompts(prompts)</span>
</span><span id="ArticletovideoPlugin.display_prompts-1037"><a href="#ArticletovideoPlugin.display_prompts-1037"><span class="linenos">1037</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.display_prompts-1038"><a href="#ArticletovideoPlugin.display_prompts-1038"><span class="linenos">1038</span></a>        <span class="n">prompts_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prompts</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.display_prompts-1039"><a href="#ArticletovideoPlugin.display_prompts-1039"><span class="linenos">1039</span></a>        <span class="n">edited_prompts</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_area</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.display_prompts-1040"><a href="#ArticletovideoPlugin.display_prompts-1040"><span class="linenos">1040</span></a>            <span class="n">t</span><span class="p">(</span><span class="s2">&quot;edit_prompts&quot;</span><span class="p">),</span> <span class="n">prompts_text</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s2">&quot;edit_prompts_text_area&quot;</span>
</span><span id="ArticletovideoPlugin.display_prompts-1041"><a href="#ArticletovideoPlugin.display_prompts-1041"><span class="linenos">1041</span></a>        <span class="p">)</span>
</span><span id="ArticletovideoPlugin.display_prompts-1042"><a href="#ArticletovideoPlugin.display_prompts-1042"><span class="linenos">1042</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">edited_prompts</span> <span class="o">=</span> <span class="n">edited_prompts</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Displays and allows editing of image prompts in the Streamlit interface.</p>

<p>This method takes a list of image prompts, displays them in a text area
within the Streamlit interface, and allows the user to edit the prompts.
The edited prompts are then saved back into the session state for further
processing.</p>

<h2 id="parameters">Parameters</h2>

<p>prompts : list of str
    A list of image prompts to be displayed and edited. Each prompt corresponds
    to a specific segment of the text and is intended to guide the generation
    of an image.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
prompts = ["A sunny day at the beach.", "A crowded market in the city."]
plugin.display_prompts(prompts)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.generate_all_images" class="classattr">
                                        <input id="ArticletovideoPlugin.generate_all_images-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generate_all_images</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">text</span>, </span><span class="param"><span class="n">prompts</span>, </span><span class="param"><span class="n">config</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.generate_all_images-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.generate_all_images"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.generate_all_images-1044"><a href="#ArticletovideoPlugin.generate_all_images-1044"><span class="linenos">1044</span></a>    <span class="k">def</span> <span class="nf">generate_all_images</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">prompts</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1045"><a href="#ArticletovideoPlugin.generate_all_images-1045"><span class="linenos">1045</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1046"><a href="#ArticletovideoPlugin.generate_all_images-1046"><span class="linenos">1046</span></a><span class="sd">        Generates all images and audio files for the provided text and prompts.</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1047"><a href="#ArticletovideoPlugin.generate_all_images-1047"><span class="linenos">1047</span></a>
</span><span id="ArticletovideoPlugin.generate_all_images-1048"><a href="#ArticletovideoPlugin.generate_all_images-1048"><span class="linenos">1048</span></a><span class="sd">        This method processes the text by splitting it into segments, generates</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1049"><a href="#ArticletovideoPlugin.generate_all_images-1049"><span class="linenos">1049</span></a><span class="sd">        corresponding audio files using the configured TTS model, and creates</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1050"><a href="#ArticletovideoPlugin.generate_all_images-1050"><span class="linenos">1050</span></a><span class="sd">        images based on the provided prompts.</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1051"><a href="#ArticletovideoPlugin.generate_all_images-1051"><span class="linenos">1051</span></a>
</span><span id="ArticletovideoPlugin.generate_all_images-1052"><a href="#ArticletovideoPlugin.generate_all_images-1052"><span class="linenos">1052</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1053"><a href="#ArticletovideoPlugin.generate_all_images-1053"><span class="linenos">1053</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1054"><a href="#ArticletovideoPlugin.generate_all_images-1054"><span class="linenos">1054</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1055"><a href="#ArticletovideoPlugin.generate_all_images-1055"><span class="linenos">1055</span></a><span class="sd">            The text to be used for generating audio and images.</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1056"><a href="#ArticletovideoPlugin.generate_all_images-1056"><span class="linenos">1056</span></a><span class="sd">        prompts : list of str</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1057"><a href="#ArticletovideoPlugin.generate_all_images-1057"><span class="linenos">1057</span></a><span class="sd">            The prompts to be used for generating images.</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1058"><a href="#ArticletovideoPlugin.generate_all_images-1058"><span class="linenos">1058</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1059"><a href="#ArticletovideoPlugin.generate_all_images-1059"><span class="linenos">1059</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1060"><a href="#ArticletovideoPlugin.generate_all_images-1060"><span class="linenos">1060</span></a><span class="sd">            the plugin, such as the output directory, TTS model, and other parameters.</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1061"><a href="#ArticletovideoPlugin.generate_all_images-1061"><span class="linenos">1061</span></a>
</span><span id="ArticletovideoPlugin.generate_all_images-1062"><a href="#ArticletovideoPlugin.generate_all_images-1062"><span class="linenos">1062</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1063"><a href="#ArticletovideoPlugin.generate_all_images-1063"><span class="linenos">1063</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1064"><a href="#ArticletovideoPlugin.generate_all_images-1064"><span class="linenos">1064</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1065"><a href="#ArticletovideoPlugin.generate_all_images-1065"><span class="linenos">1065</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1066"><a href="#ArticletovideoPlugin.generate_all_images-1066"><span class="linenos">1066</span></a>
</span><span id="ArticletovideoPlugin.generate_all_images-1067"><a href="#ArticletovideoPlugin.generate_all_images-1067"><span class="linenos">1067</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1068"><a href="#ArticletovideoPlugin.generate_all_images-1068"><span class="linenos">1068</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1069"><a href="#ArticletovideoPlugin.generate_all_images-1069"><span class="linenos">1069</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1070"><a href="#ArticletovideoPlugin.generate_all_images-1070"><span class="linenos">1070</span></a><span class="sd">        plugin.generate_all_images(translated_text, prompts, config)</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1071"><a href="#ArticletovideoPlugin.generate_all_images-1071"><span class="linenos">1071</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1072"><a href="#ArticletovideoPlugin.generate_all_images-1072"><span class="linenos">1072</span></a>        <span class="n">split_by</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;split_by&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1073"><a href="#ArticletovideoPlugin.generate_all_images-1073"><span class="linenos">1073</span></a>        <span class="n">segments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_segments</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1074"><a href="#ArticletovideoPlugin.generate_all_images-1074"><span class="linenos">1074</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;output_dir&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1075"><a href="#ArticletovideoPlugin.generate_all_images-1075"><span class="linenos">1075</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1076"><a href="#ArticletovideoPlugin.generate_all_images-1076"><span class="linenos">1076</span></a>
</span><span id="ArticletovideoPlugin.generate_all_images-1077"><a href="#ArticletovideoPlugin.generate_all_images-1077"><span class="linenos">1077</span></a>        <span class="c1"># Generate audio</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1078"><a href="#ArticletovideoPlugin.generate_all_images-1078"><span class="linenos">1078</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generating_audio&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1079"><a href="#ArticletovideoPlugin.generate_all_images-1079"><span class="linenos">1079</span></a>            <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1080"><a href="#ArticletovideoPlugin.generate_all_images-1080"><span class="linenos">1080</span></a>            <span class="n">audio_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1081"><a href="#ArticletovideoPlugin.generate_all_images-1081"><span class="linenos">1081</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">segment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">segments</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1082"><a href="#ArticletovideoPlugin.generate_all_images-1082"><span class="linenos">1082</span></a>                <span class="n">audio_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;audio_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.wav&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1083"><a href="#ArticletovideoPlugin.generate_all_images-1083"><span class="linenos">1083</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_one_audio</span><span class="p">(</span><span class="n">segment</span><span class="p">,</span> <span class="n">audio_path</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1084"><a href="#ArticletovideoPlugin.generate_all_images-1084"><span class="linenos">1084</span></a>                <span class="n">audio_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">audio_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1085"><a href="#ArticletovideoPlugin.generate_all_images-1085"><span class="linenos">1085</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">segments</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1086"><a href="#ArticletovideoPlugin.generate_all_images-1086"><span class="linenos">1086</span></a>
</span><span id="ArticletovideoPlugin.generate_all_images-1087"><a href="#ArticletovideoPlugin.generate_all_images-1087"><span class="linenos">1087</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unload_ollama_model</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1088"><a href="#ArticletovideoPlugin.generate_all_images-1088"><span class="linenos">1088</span></a>        <span class="c1"># Generate images</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1089"><a href="#ArticletovideoPlugin.generate_all_images-1089"><span class="linenos">1089</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;generating_images&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1090"><a href="#ArticletovideoPlugin.generate_all_images-1090"><span class="linenos">1090</span></a>            <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1091"><a href="#ArticletovideoPlugin.generate_all_images-1091"><span class="linenos">1091</span></a>            <span class="n">image_paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1092"><a href="#ArticletovideoPlugin.generate_all_images-1092"><span class="linenos">1092</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">prompt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">prompts</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1093"><a href="#ArticletovideoPlugin.generate_all_images-1093"><span class="linenos">1093</span></a>                <span class="n">image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">.png&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1094"><a href="#ArticletovideoPlugin.generate_all_images-1094"><span class="linenos">1094</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">generate_image</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1095"><a href="#ArticletovideoPlugin.generate_all_images-1095"><span class="linenos">1095</span></a>                <span class="n">image_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1096"><a href="#ArticletovideoPlugin.generate_all_images-1096"><span class="linenos">1096</span></a>                <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">prompts</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1097"><a href="#ArticletovideoPlugin.generate_all_images-1097"><span class="linenos">1097</span></a>
</span><span id="ArticletovideoPlugin.generate_all_images-1098"><a href="#ArticletovideoPlugin.generate_all_images-1098"><span class="linenos">1098</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">audio_paths</span> <span class="o">=</span> <span class="n">audio_paths</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1099"><a href="#ArticletovideoPlugin.generate_all_images-1099"><span class="linenos">1099</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span> <span class="o">=</span> <span class="n">image_paths</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1100"><a href="#ArticletovideoPlugin.generate_all_images-1100"><span class="linenos">1100</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">prompts</span> <span class="o">=</span> <span class="n">prompts</span>
</span><span id="ArticletovideoPlugin.generate_all_images-1101"><a href="#ArticletovideoPlugin.generate_all_images-1101"><span class="linenos">1101</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">segments</span> <span class="o">=</span> <span class="n">segments</span>
</span></pre></div>


            <div class="docstring"><p>Generates all images and audio files for the provided text and prompts.</p>

<p>This method processes the text by splitting it into segments, generates
corresponding audio files using the configured TTS model, and creates
images based on the provided prompts.</p>

<h2 id="parameters">Parameters</h2>

<p>text : str
    The text to be used for generating audio and images.
prompts : list of str
    The prompts to be used for generating images.
config : dict
    The configuration dictionary containing user-defined settings for
    the plugin, such as the output directory, TTS model, and other parameters.</p>

<h2 id="raises">Raises</h2>

<p>FileNotFoundError
    If the output directory does not exist.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
plugin.generate_all_images(translated_text, prompts, config)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.generate_one_audio" class="classattr">
                                        <input id="ArticletovideoPlugin.generate_one_audio-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generate_one_audio</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">text</span>, </span><span class="param"><span class="n">output_path</span>, </span><span class="param"><span class="n">config</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.generate_one_audio-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.generate_one_audio"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.generate_one_audio-1103"><a href="#ArticletovideoPlugin.generate_one_audio-1103"><span class="linenos">1103</span></a>    <span class="k">def</span> <span class="nf">generate_one_audio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">output_path</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1104"><a href="#ArticletovideoPlugin.generate_one_audio-1104"><span class="linenos">1104</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1105"><a href="#ArticletovideoPlugin.generate_one_audio-1105"><span class="linenos">1105</span></a><span class="sd">        Generates an audio file from the provided text using the configured TTS model.</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1106"><a href="#ArticletovideoPlugin.generate_one_audio-1106"><span class="linenos">1106</span></a>
</span><span id="ArticletovideoPlugin.generate_one_audio-1107"><a href="#ArticletovideoPlugin.generate_one_audio-1107"><span class="linenos">1107</span></a><span class="sd">        This method converts the provided text into speech and saves the audio file</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1108"><a href="#ArticletovideoPlugin.generate_one_audio-1108"><span class="linenos">1108</span></a><span class="sd">        at the specified output path.</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1109"><a href="#ArticletovideoPlugin.generate_one_audio-1109"><span class="linenos">1109</span></a>
</span><span id="ArticletovideoPlugin.generate_one_audio-1110"><a href="#ArticletovideoPlugin.generate_one_audio-1110"><span class="linenos">1110</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1111"><a href="#ArticletovideoPlugin.generate_one_audio-1111"><span class="linenos">1111</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1112"><a href="#ArticletovideoPlugin.generate_one_audio-1112"><span class="linenos">1112</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1113"><a href="#ArticletovideoPlugin.generate_one_audio-1113"><span class="linenos">1113</span></a><span class="sd">            The text to convert into speech.</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1114"><a href="#ArticletovideoPlugin.generate_one_audio-1114"><span class="linenos">1114</span></a><span class="sd">        output_path : str</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1115"><a href="#ArticletovideoPlugin.generate_one_audio-1115"><span class="linenos">1115</span></a><span class="sd">            The file path where the generated audio file will be saved.</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1116"><a href="#ArticletovideoPlugin.generate_one_audio-1116"><span class="linenos">1116</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1117"><a href="#ArticletovideoPlugin.generate_one_audio-1117"><span class="linenos">1117</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1118"><a href="#ArticletovideoPlugin.generate_one_audio-1118"><span class="linenos">1118</span></a><span class="sd">            the plugin, such as the TTS model and other parameters.</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1119"><a href="#ArticletovideoPlugin.generate_one_audio-1119"><span class="linenos">1119</span></a>
</span><span id="ArticletovideoPlugin.generate_one_audio-1120"><a href="#ArticletovideoPlugin.generate_one_audio-1120"><span class="linenos">1120</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1121"><a href="#ArticletovideoPlugin.generate_one_audio-1121"><span class="linenos">1121</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1122"><a href="#ArticletovideoPlugin.generate_one_audio-1122"><span class="linenos">1122</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1123"><a href="#ArticletovideoPlugin.generate_one_audio-1123"><span class="linenos">1123</span></a><span class="sd">            If the specified TTS model is not supported.</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1124"><a href="#ArticletovideoPlugin.generate_one_audio-1124"><span class="linenos">1124</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1125"><a href="#ArticletovideoPlugin.generate_one_audio-1125"><span class="linenos">1125</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1126"><a href="#ArticletovideoPlugin.generate_one_audio-1126"><span class="linenos">1126</span></a>
</span><span id="ArticletovideoPlugin.generate_one_audio-1127"><a href="#ArticletovideoPlugin.generate_one_audio-1127"><span class="linenos">1127</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1128"><a href="#ArticletovideoPlugin.generate_one_audio-1128"><span class="linenos">1128</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1129"><a href="#ArticletovideoPlugin.generate_one_audio-1129"><span class="linenos">1129</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1130"><a href="#ArticletovideoPlugin.generate_one_audio-1130"><span class="linenos">1130</span></a><span class="sd">        plugin.generate_one_audio(&quot;Bonjour tout le monde.&quot;, &quot;~/output/audio_0.wav&quot;, config)</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1131"><a href="#ArticletovideoPlugin.generate_one_audio-1131"><span class="linenos">1131</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1132"><a href="#ArticletovideoPlugin.generate_one_audio-1132"><span class="linenos">1132</span></a>        <span class="c1"># https://theroamingworkshop.cloud/b/en/2425/%F0%9F%90%B8coqui-ai-tts-ultra-fast-voice-generation-and-cloning-from-multilingual-text/</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1133"><a href="#ArticletovideoPlugin.generate_one_audio-1133"><span class="linenos">1133</span></a>        <span class="n">tts_model</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_model&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1134"><a href="#ArticletovideoPlugin.generate_one_audio-1134"><span class="linenos">1134</span></a>        <span class="n">target_lang</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;target_language&quot;</span><span class="p">]</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1135"><a href="#ArticletovideoPlugin.generate_one_audio-1135"><span class="linenos">1135</span></a>
</span><span id="ArticletovideoPlugin.generate_one_audio-1136"><a href="#ArticletovideoPlugin.generate_one_audio-1136"><span class="linenos">1136</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;COQUI_TTS_CACHE_DIR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1137"><a href="#ArticletovideoPlugin.generate_one_audio-1137"><span class="linenos">1137</span></a>            <span class="s2">&quot;~/.cache/coqui&quot;</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1138"><a href="#ArticletovideoPlugin.generate_one_audio-1138"><span class="linenos">1138</span></a>        <span class="p">)</span>  <span class="c1"># https://github.com/coqui-ai/TTS/issues/3608</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1139"><a href="#ArticletovideoPlugin.generate_one_audio-1139"><span class="linenos">1139</span></a>
</span><span id="ArticletovideoPlugin.generate_one_audio-1140"><a href="#ArticletovideoPlugin.generate_one_audio-1140"><span class="linenos">1140</span></a>        <span class="k">if</span> <span class="n">tts_model</span> <span class="o">==</span> <span class="s2">&quot;your_tts&quot;</span><span class="p">:</span>  <span class="c1"># fast but not best quality</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1141"><a href="#ArticletovideoPlugin.generate_one_audio-1141"><span class="linenos">1141</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1142"><a href="#ArticletovideoPlugin.generate_one_audio-1142"><span class="linenos">1142</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="n">TTS</span><span class="p">(</span><span class="s2">&quot;tts_models/multilingual/multi-dataset/your_tts&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1143"><a href="#ArticletovideoPlugin.generate_one_audio-1143"><span class="linenos">1143</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span><span class="o">.</span><span class="n">tts_to_file</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1144"><a href="#ArticletovideoPlugin.generate_one_audio-1144"><span class="linenos">1144</span></a>                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1145"><a href="#ArticletovideoPlugin.generate_one_audio-1145"><span class="linenos">1145</span></a>                <span class="n">file_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1146"><a href="#ArticletovideoPlugin.generate_one_audio-1146"><span class="linenos">1146</span></a>                <span class="n">speaker_wav</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">]),</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1147"><a href="#ArticletovideoPlugin.generate_one_audio-1147"><span class="linenos">1147</span></a>                <span class="n">language</span><span class="o">=</span><span class="n">target_lang</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1148"><a href="#ArticletovideoPlugin.generate_one_audio-1148"><span class="linenos">1148</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1149"><a href="#ArticletovideoPlugin.generate_one_audio-1149"><span class="linenos">1149</span></a>        <span class="k">elif</span> <span class="n">tts_model</span> <span class="o">==</span> <span class="s2">&quot;xtts_v2&quot;</span><span class="p">:</span>  <span class="c1"># best quality but very slow</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1150"><a href="#ArticletovideoPlugin.generate_one_audio-1150"><span class="linenos">1150</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1151"><a href="#ArticletovideoPlugin.generate_one_audio-1151"><span class="linenos">1151</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="n">TTS</span><span class="p">(</span><span class="s2">&quot;tts_models/multilingual/multi-dataset/xtts_v2&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1152"><a href="#ArticletovideoPlugin.generate_one_audio-1152"><span class="linenos">1152</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span><span class="o">.</span><span class="n">tts_to_file</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1153"><a href="#ArticletovideoPlugin.generate_one_audio-1153"><span class="linenos">1153</span></a>                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1154"><a href="#ArticletovideoPlugin.generate_one_audio-1154"><span class="linenos">1154</span></a>                <span class="n">file_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1155"><a href="#ArticletovideoPlugin.generate_one_audio-1155"><span class="linenos">1155</span></a>                <span class="n">speaker_wav</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">]),</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1156"><a href="#ArticletovideoPlugin.generate_one_audio-1156"><span class="linenos">1156</span></a>                <span class="n">language</span><span class="o">=</span><span class="n">target_lang</span><span class="p">[:</span><span class="mi">2</span><span class="p">],</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1157"><a href="#ArticletovideoPlugin.generate_one_audio-1157"><span class="linenos">1157</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1158"><a href="#ArticletovideoPlugin.generate_one_audio-1158"><span class="linenos">1158</span></a>        <span class="k">elif</span> <span class="n">tts_model</span> <span class="o">==</span> <span class="s2">&quot;tacotron&quot;</span><span class="p">:</span>  <span class="c1"># not very good quality and predermined voice</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1159"><a href="#ArticletovideoPlugin.generate_one_audio-1159"><span class="linenos">1159</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1160"><a href="#ArticletovideoPlugin.generate_one_audio-1160"><span class="linenos">1160</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="n">TTS</span><span class="p">(</span><span class="s2">&quot;tts_models/fr/mai/tacotron2-DDC&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1161"><a href="#ArticletovideoPlugin.generate_one_audio-1161"><span class="linenos">1161</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span><span class="o">.</span><span class="n">tts_to_file</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1162"><a href="#ArticletovideoPlugin.generate_one_audio-1162"><span class="linenos">1162</span></a>                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1163"><a href="#ArticletovideoPlugin.generate_one_audio-1163"><span class="linenos">1163</span></a>                <span class="n">file_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1164"><a href="#ArticletovideoPlugin.generate_one_audio-1164"><span class="linenos">1164</span></a>                <span class="n">speaker_wav</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">]),</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1165"><a href="#ArticletovideoPlugin.generate_one_audio-1165"><span class="linenos">1165</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1166"><a href="#ArticletovideoPlugin.generate_one_audio-1166"><span class="linenos">1166</span></a>        <span class="k">elif</span> <span class="n">tts_model</span> <span class="o">==</span> <span class="s2">&quot;bark&quot;</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1167"><a href="#ArticletovideoPlugin.generate_one_audio-1167"><span class="linenos">1167</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1168"><a href="#ArticletovideoPlugin.generate_one_audio-1168"><span class="linenos">1168</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span> <span class="o">=</span> <span class="n">TTS</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1169"><a href="#ArticletovideoPlugin.generate_one_audio-1169"><span class="linenos">1169</span></a>                    <span class="s2">&quot;tts_models/multilingual/multi-dataset/bark&quot;</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1170"><a href="#ArticletovideoPlugin.generate_one_audio-1170"><span class="linenos">1170</span></a>                <span class="p">)</span>  <span class="c1"># https://github.com/coqui-ai/TTS/issues/3567</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1171"><a href="#ArticletovideoPlugin.generate_one_audio-1171"><span class="linenos">1171</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">tts_model</span><span class="o">.</span><span class="n">tts_to_file</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1172"><a href="#ArticletovideoPlugin.generate_one_audio-1172"><span class="linenos">1172</span></a>                <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1173"><a href="#ArticletovideoPlugin.generate_one_audio-1173"><span class="linenos">1173</span></a>                <span class="n">file_path</span><span class="o">=</span><span class="n">output_path</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1174"><a href="#ArticletovideoPlugin.generate_one_audio-1174"><span class="linenos">1174</span></a>                <span class="n">speaker_wav</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;tts_speaker&quot;</span><span class="p">]),</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1175"><a href="#ArticletovideoPlugin.generate_one_audio-1175"><span class="linenos">1175</span></a>                <span class="n">language</span><span class="o">=</span><span class="n">target_lang</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1176"><a href="#ArticletovideoPlugin.generate_one_audio-1176"><span class="linenos">1176</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1177"><a href="#ArticletovideoPlugin.generate_one_audio-1177"><span class="linenos">1177</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.generate_one_audio-1178"><a href="#ArticletovideoPlugin.generate_one_audio-1178"><span class="linenos">1178</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported TTS model: </span><span class="si">{</span><span class="n">tts_model</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generates an audio file from the provided text using the configured TTS model.</p>

<p>This method converts the provided text into speech and saves the audio file
at the specified output path.</p>

<h2 id="parameters">Parameters</h2>

<p>text : str
    The text to convert into speech.
output_path : str
    The file path where the generated audio file will be saved.
config : dict
    The configuration dictionary containing user-defined settings for
    the plugin, such as the TTS model and other parameters.</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If the specified TTS model is not supported.
FileNotFoundError
    If the output directory does not exist.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
plugin.generate_one_audio("Bonjour tout le monde.", "~/output/audio_0.wav", config)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.split_text" class="classattr">
                                        <input id="ArticletovideoPlugin.split_text-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">split_text</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">text</span>, </span><span class="param"><span class="n">split_by</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.split_text-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.split_text"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.split_text-1180"><a href="#ArticletovideoPlugin.split_text-1180"><span class="linenos">1180</span></a>    <span class="k">def</span> <span class="nf">split_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">split_by</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.split_text-1181"><a href="#ArticletovideoPlugin.split_text-1181"><span class="linenos">1181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.split_text-1182"><a href="#ArticletovideoPlugin.split_text-1182"><span class="linenos">1182</span></a><span class="sd">        Generates image prompts for each paragraph in the provided list.</span>
</span><span id="ArticletovideoPlugin.split_text-1183"><a href="#ArticletovideoPlugin.split_text-1183"><span class="linenos">1183</span></a>
</span><span id="ArticletovideoPlugin.split_text-1184"><a href="#ArticletovideoPlugin.split_text-1184"><span class="linenos">1184</span></a><span class="sd">        This method creates an image prompt for each paragraph by using a</span>
</span><span id="ArticletovideoPlugin.split_text-1185"><a href="#ArticletovideoPlugin.split_text-1185"><span class="linenos">1185</span></a><span class="sd">        language model and a system prompt to guide the generation process.</span>
</span><span id="ArticletovideoPlugin.split_text-1186"><a href="#ArticletovideoPlugin.split_text-1186"><span class="linenos">1186</span></a>
</span><span id="ArticletovideoPlugin.split_text-1187"><a href="#ArticletovideoPlugin.split_text-1187"><span class="linenos">1187</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.split_text-1188"><a href="#ArticletovideoPlugin.split_text-1188"><span class="linenos">1188</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.split_text-1189"><a href="#ArticletovideoPlugin.split_text-1189"><span class="linenos">1189</span></a><span class="sd">        paragraphs : list of str</span>
</span><span id="ArticletovideoPlugin.split_text-1190"><a href="#ArticletovideoPlugin.split_text-1190"><span class="linenos">1190</span></a><span class="sd">            A list of paragraphs for which to generate image prompts.</span>
</span><span id="ArticletovideoPlugin.split_text-1191"><a href="#ArticletovideoPlugin.split_text-1191"><span class="linenos">1191</span></a><span class="sd">        sysprompt : str</span>
</span><span id="ArticletovideoPlugin.split_text-1192"><a href="#ArticletovideoPlugin.split_text-1192"><span class="linenos">1192</span></a><span class="sd">            The system prompt guiding the generation of the image prompts.</span>
</span><span id="ArticletovideoPlugin.split_text-1193"><a href="#ArticletovideoPlugin.split_text-1193"><span class="linenos">1193</span></a>
</span><span id="ArticletovideoPlugin.split_text-1194"><a href="#ArticletovideoPlugin.split_text-1194"><span class="linenos">1194</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin.split_text-1195"><a href="#ArticletovideoPlugin.split_text-1195"><span class="linenos">1195</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin.split_text-1196"><a href="#ArticletovideoPlugin.split_text-1196"><span class="linenos">1196</span></a><span class="sd">        list of str</span>
</span><span id="ArticletovideoPlugin.split_text-1197"><a href="#ArticletovideoPlugin.split_text-1197"><span class="linenos">1197</span></a><span class="sd">            A list of generated image prompts corresponding to each paragraph.</span>
</span><span id="ArticletovideoPlugin.split_text-1198"><a href="#ArticletovideoPlugin.split_text-1198"><span class="linenos">1198</span></a>
</span><span id="ArticletovideoPlugin.split_text-1199"><a href="#ArticletovideoPlugin.split_text-1199"><span class="linenos">1199</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.split_text-1200"><a href="#ArticletovideoPlugin.split_text-1200"><span class="linenos">1200</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.split_text-1201"><a href="#ArticletovideoPlugin.split_text-1201"><span class="linenos">1201</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.split_text-1202"><a href="#ArticletovideoPlugin.split_text-1202"><span class="linenos">1202</span></a><span class="sd">        prompts = plugin.generate_all_image_prompts(paragraphs, sysprompt)</span>
</span><span id="ArticletovideoPlugin.split_text-1203"><a href="#ArticletovideoPlugin.split_text-1203"><span class="linenos">1203</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.split_text-1204"><a href="#ArticletovideoPlugin.split_text-1204"><span class="linenos">1204</span></a>        <span class="k">if</span> <span class="n">split_by</span> <span class="o">==</span> <span class="s2">&quot;sentence&quot;</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.split_text-1205"><a href="#ArticletovideoPlugin.split_text-1205"><span class="linenos">1205</span></a>            <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;. &quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.split_text-1206"><a href="#ArticletovideoPlugin.split_text-1206"><span class="linenos">1206</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.split_text-1207"><a href="#ArticletovideoPlugin.split_text-1207"><span class="linenos">1207</span></a>            <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generates image prompts for each paragraph in the provided list.</p>

<p>This method creates an image prompt for each paragraph by using a
language model and a system prompt to guide the generation process.</p>

<h2 id="parameters">Parameters</h2>

<p>paragraphs : list of str
    A list of paragraphs for which to generate image prompts.
sysprompt : str
    The system prompt guiding the generation of the image prompts.</p>

<h2 id="returns">Returns</h2>

<p>list of str
    A list of generated image prompts corresponding to each paragraph.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
prompts = plugin.generate_all_image_prompts(paragraphs, sysprompt)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.generate_all_image_prompts" class="classattr">
                                        <input id="ArticletovideoPlugin.generate_all_image_prompts-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generate_all_image_prompts</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">paragraphs</span>, </span><span class="param"><span class="n">sysprompt</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.generate_all_image_prompts-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.generate_all_image_prompts"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.generate_all_image_prompts-1209"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1209"><span class="linenos">1209</span></a>    <span class="k">def</span> <span class="nf">generate_all_image_prompts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">paragraphs</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1210"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1210"><span class="linenos">1210</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1211"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1211"><span class="linenos">1211</span></a><span class="sd">        Generates image prompts for each paragraph in the provided list.</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1212"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1212"><span class="linenos">1212</span></a>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1213"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1213"><span class="linenos">1213</span></a><span class="sd">        This method iterates through a list of paragraphs and generates an image</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1214"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1214"><span class="linenos">1214</span></a><span class="sd">        prompt for each one using a specified system prompt. The prompts are</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1215"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1215"><span class="linenos">1215</span></a><span class="sd">        generated by calling a language model via the `RagllmPlugin`.</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1216"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1216"><span class="linenos">1216</span></a>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1217"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1217"><span class="linenos">1217</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1218"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1218"><span class="linenos">1218</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1219"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1219"><span class="linenos">1219</span></a><span class="sd">        paragraphs : list of str</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1220"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1220"><span class="linenos">1220</span></a><span class="sd">            A list of paragraphs for which to generate image prompts. Each paragraph</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1221"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1221"><span class="linenos">1221</span></a><span class="sd">            represents a segment of the translated text.</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1222"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1222"><span class="linenos">1222</span></a><span class="sd">        sysprompt : str</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1223"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1223"><span class="linenos">1223</span></a><span class="sd">            The system prompt guiding the generation of the image prompts. This prompt</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1224"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1224"><span class="linenos">1224</span></a><span class="sd">            provides context or instructions for the language model to produce relevant</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1225"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1225"><span class="linenos">1225</span></a><span class="sd">            and descriptive image prompts.</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1226"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1226"><span class="linenos">1226</span></a>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1227"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1227"><span class="linenos">1227</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1228"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1228"><span class="linenos">1228</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1229"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1229"><span class="linenos">1229</span></a><span class="sd">        list of str</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1230"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1230"><span class="linenos">1230</span></a><span class="sd">            A list of generated image prompts corresponding to each paragraph in the</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1231"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1231"><span class="linenos">1231</span></a><span class="sd">            provided list. Each prompt is a textual description intended for generating</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1232"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1232"><span class="linenos">1232</span></a><span class="sd">            an image that visually represents the content of the paragraph.</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1233"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1233"><span class="linenos">1233</span></a>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1234"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1234"><span class="linenos">1234</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1235"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1235"><span class="linenos">1235</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1236"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1236"><span class="linenos">1236</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1237"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1237"><span class="linenos">1237</span></a><span class="sd">            If the `paragraphs` list is empty or if an error occurs during prompt generation.</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1238"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1238"><span class="linenos">1238</span></a>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1239"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1239"><span class="linenos">1239</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1240"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1240"><span class="linenos">1240</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1241"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1241"><span class="linenos">1241</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1242"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1242"><span class="linenos">1242</span></a><span class="sd">        paragraphs = [&quot;The sun rises over a tranquil beach.&quot;, &quot;A bustling city street at night.&quot;]</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1243"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1243"><span class="linenos">1243</span></a><span class="sd">        sysprompt = &quot;You are an AI tasked with generating image prompts. Each prompt should vividly describe a scene.&quot;</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1244"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1244"><span class="linenos">1244</span></a><span class="sd">        prompts = plugin.generate_all_image_prompts(paragraphs, sysprompt)</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1245"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1245"><span class="linenos">1245</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1246"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1246"><span class="linenos">1246</span></a>        <span class="n">progress_bar</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1247"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1247"><span class="linenos">1247</span></a>        <span class="n">prompts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1248"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1248"><span class="linenos">1248</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">paragraph</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1249"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1249"><span class="linenos">1249</span></a>            <span class="n">prompt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_image_prompt</span><span class="p">(</span><span class="n">paragraph</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1250"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1250"><span class="linenos">1250</span></a>            <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1251"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1251"><span class="linenos">1251</span></a>            <span class="n">progress_bar</span><span class="o">.</span><span class="n">progress</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">paragraphs</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.generate_all_image_prompts-1252"><a href="#ArticletovideoPlugin.generate_all_image_prompts-1252"><span class="linenos">1252</span></a>        <span class="k">return</span> <span class="n">prompts</span>
</span></pre></div>


            <div class="docstring"><p>Generates image prompts for each paragraph in the provided list.</p>

<p>This method iterates through a list of paragraphs and generates an image
prompt for each one using a specified system prompt. The prompts are
generated by calling a language model via the <code>RagllmPlugin</code>.</p>

<h2 id="parameters">Parameters</h2>

<p>paragraphs : list of str
    A list of paragraphs for which to generate image prompts. Each paragraph
    represents a segment of the translated text.
sysprompt : str
    The system prompt guiding the generation of the image prompts. This prompt
    provides context or instructions for the language model to produce relevant
    and descriptive image prompts.</p>

<h2 id="returns">Returns</h2>

<p>list of str
    A list of generated image prompts corresponding to each paragraph in the
    provided list. Each prompt is a textual description intended for generating
    an image that visually represents the content of the paragraph.</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If the <code>paragraphs</code> list is empty or if an error occurs during prompt generation.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
paragraphs = ["The sun rises over a tranquil beach.", "A bustling city street at night."]
sysprompt = "You are an AI tasked with generating image prompts. Each prompt should vividly describe a scene."
prompts = plugin.generate_all_image_prompts(paragraphs, sysprompt)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.unload_ollama_model" class="classattr">
                                        <input id="ArticletovideoPlugin.unload_ollama_model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">unload_ollama_model</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.unload_ollama_model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.unload_ollama_model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.unload_ollama_model-1254"><a href="#ArticletovideoPlugin.unload_ollama_model-1254"><span class="linenos">1254</span></a>    <span class="k">def</span> <span class="nf">unload_ollama_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.unload_ollama_model-1255"><a href="#ArticletovideoPlugin.unload_ollama_model-1255"><span class="linenos">1255</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.unload_ollama_model-1256"><a href="#ArticletovideoPlugin.unload_ollama_model-1256"><span class="linenos">1256</span></a><span class="sd">        Unloads the currently loaded Ollama model to free resources.</span>
</span><span id="ArticletovideoPlugin.unload_ollama_model-1257"><a href="#ArticletovideoPlugin.unload_ollama_model-1257"><span class="linenos">1257</span></a>
</span><span id="ArticletovideoPlugin.unload_ollama_model-1258"><a href="#ArticletovideoPlugin.unload_ollama_model-1258"><span class="linenos">1258</span></a><span class="sd">        This method makes a dummy call to unload the model from memory,</span>
</span><span id="ArticletovideoPlugin.unload_ollama_model-1259"><a href="#ArticletovideoPlugin.unload_ollama_model-1259"><span class="linenos">1259</span></a><span class="sd">        preventing unnecessary resource consumption.</span>
</span><span id="ArticletovideoPlugin.unload_ollama_model-1260"><a href="#ArticletovideoPlugin.unload_ollama_model-1260"><span class="linenos">1260</span></a>
</span><span id="ArticletovideoPlugin.unload_ollama_model-1261"><a href="#ArticletovideoPlugin.unload_ollama_model-1261"><span class="linenos">1261</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.unload_ollama_model-1262"><a href="#ArticletovideoPlugin.unload_ollama_model-1262"><span class="linenos">1262</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.unload_ollama_model-1263"><a href="#ArticletovideoPlugin.unload_ollama_model-1263"><span class="linenos">1263</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.unload_ollama_model-1264"><a href="#ArticletovideoPlugin.unload_ollama_model-1264"><span class="linenos">1264</span></a><span class="sd">        plugin.unload_ollama_model()</span>
</span><span id="ArticletovideoPlugin.unload_ollama_model-1265"><a href="#ArticletovideoPlugin.unload_ollama_model-1265"><span class="linenos">1265</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.unload_ollama_model-1266"><a href="#ArticletovideoPlugin.unload_ollama_model-1266"><span class="linenos">1266</span></a>        <span class="c1"># Effectuer un appel bidon à Ollama pour décharger le modèle</span>
</span><span id="ArticletovideoPlugin.unload_ollama_model-1267"><a href="#ArticletovideoPlugin.unload_ollama_model-1267"><span class="linenos">1267</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ragllm_plugin</span><span class="o">.</span><span class="n">free_llm</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Unloads the currently loaded Ollama model to free resources.</p>

<p>This method makes a dummy call to unload the model from memory,
preventing unnecessary resource consumption.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
plugin.unload_ollama_model()</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.generate_image_prompt" class="classattr">
                                        <input id="ArticletovideoPlugin.generate_image_prompt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generate_image_prompt</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">text</span>, </span><span class="param"><span class="n">sysprompt</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.generate_image_prompt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.generate_image_prompt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.generate_image_prompt-1269"><a href="#ArticletovideoPlugin.generate_image_prompt-1269"><span class="linenos">1269</span></a>    <span class="k">def</span> <span class="nf">generate_image_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1270"><a href="#ArticletovideoPlugin.generate_image_prompt-1270"><span class="linenos">1270</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1271"><a href="#ArticletovideoPlugin.generate_image_prompt-1271"><span class="linenos">1271</span></a><span class="sd">        Generates an image prompt based on the provided text and system prompt.</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1272"><a href="#ArticletovideoPlugin.generate_image_prompt-1272"><span class="linenos">1272</span></a>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1273"><a href="#ArticletovideoPlugin.generate_image_prompt-1273"><span class="linenos">1273</span></a><span class="sd">        This method uses a language model to create an image prompt that describes</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1274"><a href="#ArticletovideoPlugin.generate_image_prompt-1274"><span class="linenos">1274</span></a><span class="sd">        the visual content corresponding to the given text.</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1275"><a href="#ArticletovideoPlugin.generate_image_prompt-1275"><span class="linenos">1275</span></a>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1276"><a href="#ArticletovideoPlugin.generate_image_prompt-1276"><span class="linenos">1276</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1277"><a href="#ArticletovideoPlugin.generate_image_prompt-1277"><span class="linenos">1277</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1278"><a href="#ArticletovideoPlugin.generate_image_prompt-1278"><span class="linenos">1278</span></a><span class="sd">        text : str</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1279"><a href="#ArticletovideoPlugin.generate_image_prompt-1279"><span class="linenos">1279</span></a><span class="sd">            The text for which to generate an image prompt.</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1280"><a href="#ArticletovideoPlugin.generate_image_prompt-1280"><span class="linenos">1280</span></a><span class="sd">        sysprompt : str</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1281"><a href="#ArticletovideoPlugin.generate_image_prompt-1281"><span class="linenos">1281</span></a><span class="sd">            The system prompt guiding the generation of the image prompt.</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1282"><a href="#ArticletovideoPlugin.generate_image_prompt-1282"><span class="linenos">1282</span></a>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1283"><a href="#ArticletovideoPlugin.generate_image_prompt-1283"><span class="linenos">1283</span></a><span class="sd">        Returns</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1284"><a href="#ArticletovideoPlugin.generate_image_prompt-1284"><span class="linenos">1284</span></a><span class="sd">        -------</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1285"><a href="#ArticletovideoPlugin.generate_image_prompt-1285"><span class="linenos">1285</span></a><span class="sd">        str</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1286"><a href="#ArticletovideoPlugin.generate_image_prompt-1286"><span class="linenos">1286</span></a><span class="sd">            The generated image prompt.</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1287"><a href="#ArticletovideoPlugin.generate_image_prompt-1287"><span class="linenos">1287</span></a>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1288"><a href="#ArticletovideoPlugin.generate_image_prompt-1288"><span class="linenos">1288</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1289"><a href="#ArticletovideoPlugin.generate_image_prompt-1289"><span class="linenos">1289</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1290"><a href="#ArticletovideoPlugin.generate_image_prompt-1290"><span class="linenos">1290</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1291"><a href="#ArticletovideoPlugin.generate_image_prompt-1291"><span class="linenos">1291</span></a><span class="sd">        prompt = plugin.generate_image_prompt(&quot;A beautiful sunset over the ocean.&quot;, sysprompt)</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1292"><a href="#ArticletovideoPlugin.generate_image_prompt-1292"><span class="linenos">1292</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1293"><a href="#ArticletovideoPlugin.generate_image_prompt-1293"><span class="linenos">1293</span></a>        <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Create an image prompt, 77 word max. Describe, without commenting, just give the prompt for a scene that illustrate the following situation : </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1294"><a href="#ArticletovideoPlugin.generate_image_prompt-1294"><span class="linenos">1294</span></a>        <span class="n">ragllm_plugin</span> <span class="o">=</span> <span class="n">RagllmPlugin</span><span class="p">(</span><span class="s2">&quot;ragllm&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plugin_manager</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1295"><a href="#ArticletovideoPlugin.generate_image_prompt-1295"><span class="linenos">1295</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="n">ragllm_plugin</span><span class="o">.</span><span class="n">call_llm</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">sysprompt</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_image_prompt-1296"><a href="#ArticletovideoPlugin.generate_image_prompt-1296"><span class="linenos">1296</span></a>        <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generates an image prompt based on the provided text and system prompt.</p>

<p>This method uses a language model to create an image prompt that describes
the visual content corresponding to the given text.</p>

<h2 id="parameters">Parameters</h2>

<p>text : str
    The text for which to generate an image prompt.
sysprompt : str
    The system prompt guiding the generation of the image prompt.</p>

<h2 id="returns">Returns</h2>

<p>str
    The generated image prompt.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
prompt = plugin.generate_image_prompt("A beautiful sunset over the ocean.", sysprompt)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.generate_image" class="classattr">
                                        <input id="ArticletovideoPlugin.generate_image-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generate_image</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">prompt</span>, </span><span class="param"><span class="n">output_path</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.generate_image-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.generate_image"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.generate_image-1298"><a href="#ArticletovideoPlugin.generate_image-1298"><span class="linenos">1298</span></a>    <span class="k">def</span> <span class="nf">generate_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prompt</span><span class="p">,</span> <span class="n">output_path</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.generate_image-1299"><a href="#ArticletovideoPlugin.generate_image-1299"><span class="linenos">1299</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_image-1300"><a href="#ArticletovideoPlugin.generate_image-1300"><span class="linenos">1300</span></a><span class="sd">        Generates an image from the provided prompt and saves it to the specified output path.</span>
</span><span id="ArticletovideoPlugin.generate_image-1301"><a href="#ArticletovideoPlugin.generate_image-1301"><span class="linenos">1301</span></a>
</span><span id="ArticletovideoPlugin.generate_image-1302"><a href="#ArticletovideoPlugin.generate_image-1302"><span class="linenos">1302</span></a><span class="sd">        This method uses the `ImggenPlugin` to create an image based on the given</span>
</span><span id="ArticletovideoPlugin.generate_image-1303"><a href="#ArticletovideoPlugin.generate_image-1303"><span class="linenos">1303</span></a><span class="sd">        textual prompt. The generated image is saved as a PNG file at the specified path.</span>
</span><span id="ArticletovideoPlugin.generate_image-1304"><a href="#ArticletovideoPlugin.generate_image-1304"><span class="linenos">1304</span></a>
</span><span id="ArticletovideoPlugin.generate_image-1305"><a href="#ArticletovideoPlugin.generate_image-1305"><span class="linenos">1305</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.generate_image-1306"><a href="#ArticletovideoPlugin.generate_image-1306"><span class="linenos">1306</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.generate_image-1307"><a href="#ArticletovideoPlugin.generate_image-1307"><span class="linenos">1307</span></a><span class="sd">        prompt : str</span>
</span><span id="ArticletovideoPlugin.generate_image-1308"><a href="#ArticletovideoPlugin.generate_image-1308"><span class="linenos">1308</span></a><span class="sd">            The prompt describing the content of the image to generate.</span>
</span><span id="ArticletovideoPlugin.generate_image-1309"><a href="#ArticletovideoPlugin.generate_image-1309"><span class="linenos">1309</span></a><span class="sd">        output_path : str</span>
</span><span id="ArticletovideoPlugin.generate_image-1310"><a href="#ArticletovideoPlugin.generate_image-1310"><span class="linenos">1310</span></a><span class="sd">            The file path where the generated image will be saved, typically ending in `.png`.</span>
</span><span id="ArticletovideoPlugin.generate_image-1311"><a href="#ArticletovideoPlugin.generate_image-1311"><span class="linenos">1311</span></a>
</span><span id="ArticletovideoPlugin.generate_image-1312"><a href="#ArticletovideoPlugin.generate_image-1312"><span class="linenos">1312</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.generate_image-1313"><a href="#ArticletovideoPlugin.generate_image-1313"><span class="linenos">1313</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.generate_image-1314"><a href="#ArticletovideoPlugin.generate_image-1314"><span class="linenos">1314</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin.generate_image-1315"><a href="#ArticletovideoPlugin.generate_image-1315"><span class="linenos">1315</span></a><span class="sd">            If the specified directory in `output_path` does not exist.</span>
</span><span id="ArticletovideoPlugin.generate_image-1316"><a href="#ArticletovideoPlugin.generate_image-1316"><span class="linenos">1316</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin.generate_image-1317"><a href="#ArticletovideoPlugin.generate_image-1317"><span class="linenos">1317</span></a><span class="sd">            If the image generation process fails or returns an invalid result.</span>
</span><span id="ArticletovideoPlugin.generate_image-1318"><a href="#ArticletovideoPlugin.generate_image-1318"><span class="linenos">1318</span></a>
</span><span id="ArticletovideoPlugin.generate_image-1319"><a href="#ArticletovideoPlugin.generate_image-1319"><span class="linenos">1319</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.generate_image-1320"><a href="#ArticletovideoPlugin.generate_image-1320"><span class="linenos">1320</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.generate_image-1321"><a href="#ArticletovideoPlugin.generate_image-1321"><span class="linenos">1321</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.generate_image-1322"><a href="#ArticletovideoPlugin.generate_image-1322"><span class="linenos">1322</span></a><span class="sd">        plugin.generate_image(&quot;A beautiful sunrise over the mountains&quot;, &quot;~/output/image_1.png&quot;)</span>
</span><span id="ArticletovideoPlugin.generate_image-1323"><a href="#ArticletovideoPlugin.generate_image-1323"><span class="linenos">1323</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.generate_image-1324"><a href="#ArticletovideoPlugin.generate_image-1324"><span class="linenos">1324</span></a>        <span class="n">image</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">imggen_plugin</span><span class="o">.</span><span class="n">generate_image</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.generate_image-1325"><a href="#ArticletovideoPlugin.generate_image-1325"><span class="linenos">1325</span></a>            <span class="kc">None</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_image-1326"><a href="#ArticletovideoPlugin.generate_image-1326"><span class="linenos">1326</span></a>            <span class="n">prompt</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_image-1327"><a href="#ArticletovideoPlugin.generate_image-1327"><span class="linenos">1327</span></a>            <span class="n">aspect_ratio</span><span class="o">=</span><span class="s2">&quot;16:9&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_image-1328"><a href="#ArticletovideoPlugin.generate_image-1328"><span class="linenos">1328</span></a>            <span class="n">remove_background</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_image-1329"><a href="#ArticletovideoPlugin.generate_image-1329"><span class="linenos">1329</span></a>            <span class="n">background_removal_method</span><span class="o">=</span><span class="s2">&quot;ai&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_image-1330"><a href="#ArticletovideoPlugin.generate_image-1330"><span class="linenos">1330</span></a>            <span class="n">seed</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_image-1331"><a href="#ArticletovideoPlugin.generate_image-1331"><span class="linenos">1331</span></a>            <span class="n">face</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_image-1332"><a href="#ArticletovideoPlugin.generate_image-1332"><span class="linenos">1332</span></a>            <span class="n">steps</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.generate_image-1333"><a href="#ArticletovideoPlugin.generate_image-1333"><span class="linenos">1333</span></a>        <span class="p">)</span>
</span><span id="ArticletovideoPlugin.generate_image-1334"><a href="#ArticletovideoPlugin.generate_image-1334"><span class="linenos">1334</span></a>        <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generates an image from the provided prompt and saves it to the specified output path.</p>

<p>This method uses the <code>ImggenPlugin</code> to create an image based on the given
textual prompt. The generated image is saved as a PNG file at the specified path.</p>

<h2 id="parameters">Parameters</h2>

<p>prompt : str
    The prompt describing the content of the image to generate.
output_path : str
    The file path where the generated image will be saved, typically ending in <code>.png</code>.</p>

<h2 id="raises">Raises</h2>

<p>FileNotFoundError
    If the specified directory in <code>output_path</code> does not exist.
ValueError
    If the image generation process fails or returns an invalid result.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
plugin.generate_image("A beautiful sunrise over the mountains", "~/output/image_1.png")</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.display_image_gallery" class="classattr">
                                        <input id="ArticletovideoPlugin.display_image_gallery-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">display_image_gallery</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.display_image_gallery-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.display_image_gallery"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.display_image_gallery-1336"><a href="#ArticletovideoPlugin.display_image_gallery-1336"><span class="linenos">1336</span></a>    <span class="k">def</span> <span class="nf">display_image_gallery</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1337"><a href="#ArticletovideoPlugin.display_image_gallery-1337"><span class="linenos">1337</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1338"><a href="#ArticletovideoPlugin.display_image_gallery-1338"><span class="linenos">1338</span></a><span class="sd">        Displays an image gallery in the Streamlit interface for editing and</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1339"><a href="#ArticletovideoPlugin.display_image_gallery-1339"><span class="linenos">1339</span></a><span class="sd">        replacing images.</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1340"><a href="#ArticletovideoPlugin.display_image_gallery-1340"><span class="linenos">1340</span></a>
</span><span id="ArticletovideoPlugin.display_image_gallery-1341"><a href="#ArticletovideoPlugin.display_image_gallery-1341"><span class="linenos">1341</span></a><span class="sd">        This method allows users to view generated images, edit the associated</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1342"><a href="#ArticletovideoPlugin.display_image_gallery-1342"><span class="linenos">1342</span></a><span class="sd">        prompts, and upload new images to replace the existing ones.</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1343"><a href="#ArticletovideoPlugin.display_image_gallery-1343"><span class="linenos">1343</span></a>
</span><span id="ArticletovideoPlugin.display_image_gallery-1344"><a href="#ArticletovideoPlugin.display_image_gallery-1344"><span class="linenos">1344</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1345"><a href="#ArticletovideoPlugin.display_image_gallery-1345"><span class="linenos">1345</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1346"><a href="#ArticletovideoPlugin.display_image_gallery-1346"><span class="linenos">1346</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1347"><a href="#ArticletovideoPlugin.display_image_gallery-1347"><span class="linenos">1347</span></a><span class="sd">        plugin.display_image_gallery()</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1348"><a href="#ArticletovideoPlugin.display_image_gallery-1348"><span class="linenos">1348</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1349"><a href="#ArticletovideoPlugin.display_image_gallery-1349"><span class="linenos">1349</span></a>        <span class="n">image_paths</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1350"><a href="#ArticletovideoPlugin.display_image_gallery-1350"><span class="linenos">1350</span></a>        <span class="n">prompts</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">prompts</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1351"><a href="#ArticletovideoPlugin.display_image_gallery-1351"><span class="linenos">1351</span></a>        <span class="n">segments</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">segments</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1352"><a href="#ArticletovideoPlugin.display_image_gallery-1352"><span class="linenos">1352</span></a>
</span><span id="ArticletovideoPlugin.display_image_gallery-1353"><a href="#ArticletovideoPlugin.display_image_gallery-1353"><span class="linenos">1353</span></a>        <span class="n">cols</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1354"><a href="#ArticletovideoPlugin.display_image_gallery-1354"><span class="linenos">1354</span></a>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="n">prompt</span><span class="p">,</span> <span class="n">segment</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1355"><a href="#ArticletovideoPlugin.display_image_gallery-1355"><span class="linenos">1355</span></a>            <span class="nb">zip</span><span class="p">(</span><span class="n">image_paths</span><span class="p">,</span> <span class="n">prompts</span><span class="p">,</span> <span class="n">segments</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1356"><a href="#ArticletovideoPlugin.display_image_gallery-1356"><span class="linenos">1356</span></a>        <span class="p">):</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1357"><a href="#ArticletovideoPlugin.display_image_gallery-1357"><span class="linenos">1357</span></a>            <span class="k">with</span> <span class="n">cols</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="mi">3</span><span class="p">]:</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1358"><a href="#ArticletovideoPlugin.display_image_gallery-1358"><span class="linenos">1358</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">image</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1359"><a href="#ArticletovideoPlugin.display_image_gallery-1359"><span class="linenos">1359</span></a>                <span class="n">new_prompt</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">text_area</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1360"><a href="#ArticletovideoPlugin.display_image_gallery-1360"><span class="linenos">1360</span></a>                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">t</span><span class="p">(</span><span class="s1">&#39;image_prompt&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">prompt</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;prompt_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1361"><a href="#ArticletovideoPlugin.display_image_gallery-1361"><span class="linenos">1361</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1362"><a href="#ArticletovideoPlugin.display_image_gallery-1362"><span class="linenos">1362</span></a>                <span class="c1"># st.text_area(f&quot;{t(&#39;translated_text&#39;)} {i+1}&quot;, segment, key=f&quot;segment_{i}&quot;)</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1363"><a href="#ArticletovideoPlugin.display_image_gallery-1363"><span class="linenos">1363</span></a>                <span class="n">st</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1364"><a href="#ArticletovideoPlugin.display_image_gallery-1364"><span class="linenos">1364</span></a>                    <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1365"><a href="#ArticletovideoPlugin.display_image_gallery-1365"><span class="linenos">1365</span></a><span class="s2">                    &lt;div style=&quot;border: 1px solid #e6e6e6; padding: 10px; width: 100%; height: 100px; overflow-y: scroll;&quot;&gt;</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1366"><a href="#ArticletovideoPlugin.display_image_gallery-1366"><span class="linenos">1366</span></a><span class="s2">                        </span><span class="si">{</span><span class="n">segment</span><span class="si">}</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1367"><a href="#ArticletovideoPlugin.display_image_gallery-1367"><span class="linenos">1367</span></a><span class="s2">                    &lt;/div&gt;</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1368"><a href="#ArticletovideoPlugin.display_image_gallery-1368"><span class="linenos">1368</span></a><span class="s2">                    &quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1369"><a href="#ArticletovideoPlugin.display_image_gallery-1369"><span class="linenos">1369</span></a>                    <span class="n">unsafe_allow_html</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1370"><a href="#ArticletovideoPlugin.display_image_gallery-1370"><span class="linenos">1370</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1371"><a href="#ArticletovideoPlugin.display_image_gallery-1371"><span class="linenos">1371</span></a>
</span><span id="ArticletovideoPlugin.display_image_gallery-1372"><a href="#ArticletovideoPlugin.display_image_gallery-1372"><span class="linenos">1372</span></a>                <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;regenerate_image&quot;</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;regenerate_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1373"><a href="#ArticletovideoPlugin.display_image_gallery-1373"><span class="linenos">1373</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">regenerate_image</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">new_prompt</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1374"><a href="#ArticletovideoPlugin.display_image_gallery-1374"><span class="linenos">1374</span></a>                    <span class="n">st</span><span class="o">.</span><span class="n">rerun</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1375"><a href="#ArticletovideoPlugin.display_image_gallery-1375"><span class="linenos">1375</span></a>
</span><span id="ArticletovideoPlugin.display_image_gallery-1376"><a href="#ArticletovideoPlugin.display_image_gallery-1376"><span class="linenos">1376</span></a>                <span class="n">uploaded_file</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">file_uploader</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1377"><a href="#ArticletovideoPlugin.display_image_gallery-1377"><span class="linenos">1377</span></a>                    <span class="n">t</span><span class="p">(</span><span class="s2">&quot;upload_image&quot;</span><span class="p">),</span> <span class="nb">type</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="s2">&quot;jpg&quot;</span><span class="p">,</span> <span class="s2">&quot;jpeg&quot;</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;upload_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1378"><a href="#ArticletovideoPlugin.display_image_gallery-1378"><span class="linenos">1378</span></a>                <span class="p">)</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1379"><a href="#ArticletovideoPlugin.display_image_gallery-1379"><span class="linenos">1379</span></a>                <span class="k">if</span> <span class="p">(</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1380"><a href="#ArticletovideoPlugin.display_image_gallery-1380"><span class="linenos">1380</span></a>                    <span class="n">uploaded_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1381"><a href="#ArticletovideoPlugin.display_image_gallery-1381"><span class="linenos">1381</span></a>                    <span class="ow">and</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">uploaded_file</span><span class="o">.</span><span class="n">name</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1382"><a href="#ArticletovideoPlugin.display_image_gallery-1382"><span class="linenos">1382</span></a>                <span class="p">):</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1383"><a href="#ArticletovideoPlugin.display_image_gallery-1383"><span class="linenos">1383</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">replace_image</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">uploaded_file</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.display_image_gallery-1384"><a href="#ArticletovideoPlugin.display_image_gallery-1384"><span class="linenos">1384</span></a>                    <span class="n">st</span><span class="o">.</span><span class="n">rerun</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Displays an image gallery in the Streamlit interface for editing and
replacing images.</p>

<p>This method allows users to view generated images, edit the associated
prompts, and upload new images to replace the existing ones.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
plugin.display_image_gallery()</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.regenerate_image" class="classattr">
                                        <input id="ArticletovideoPlugin.regenerate_image-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">regenerate_image</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">index</span>, </span><span class="param"><span class="n">new_prompt</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.regenerate_image-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.regenerate_image"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.regenerate_image-1386"><a href="#ArticletovideoPlugin.regenerate_image-1386"><span class="linenos">1386</span></a>    <span class="k">def</span> <span class="nf">regenerate_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">new_prompt</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1387"><a href="#ArticletovideoPlugin.regenerate_image-1387"><span class="linenos">1387</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1388"><a href="#ArticletovideoPlugin.regenerate_image-1388"><span class="linenos">1388</span></a><span class="sd">        Regenerates a single image based on a new prompt provided by the user.</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1389"><a href="#ArticletovideoPlugin.regenerate_image-1389"><span class="linenos">1389</span></a>
</span><span id="ArticletovideoPlugin.regenerate_image-1390"><a href="#ArticletovideoPlugin.regenerate_image-1390"><span class="linenos">1390</span></a><span class="sd">        This method generates a new image using the updated prompt and</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1391"><a href="#ArticletovideoPlugin.regenerate_image-1391"><span class="linenos">1391</span></a><span class="sd">        replaces the existing image with the new one.</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1392"><a href="#ArticletovideoPlugin.regenerate_image-1392"><span class="linenos">1392</span></a>
</span><span id="ArticletovideoPlugin.regenerate_image-1393"><a href="#ArticletovideoPlugin.regenerate_image-1393"><span class="linenos">1393</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1394"><a href="#ArticletovideoPlugin.regenerate_image-1394"><span class="linenos">1394</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1395"><a href="#ArticletovideoPlugin.regenerate_image-1395"><span class="linenos">1395</span></a><span class="sd">        index : int</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1396"><a href="#ArticletovideoPlugin.regenerate_image-1396"><span class="linenos">1396</span></a><span class="sd">            The index of the image to be regenerated in the list of image paths.</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1397"><a href="#ArticletovideoPlugin.regenerate_image-1397"><span class="linenos">1397</span></a><span class="sd">        new_prompt : str</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1398"><a href="#ArticletovideoPlugin.regenerate_image-1398"><span class="linenos">1398</span></a><span class="sd">            The new prompt to use for generating the image.</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1399"><a href="#ArticletovideoPlugin.regenerate_image-1399"><span class="linenos">1399</span></a>
</span><span id="ArticletovideoPlugin.regenerate_image-1400"><a href="#ArticletovideoPlugin.regenerate_image-1400"><span class="linenos">1400</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1401"><a href="#ArticletovideoPlugin.regenerate_image-1401"><span class="linenos">1401</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1402"><a href="#ArticletovideoPlugin.regenerate_image-1402"><span class="linenos">1402</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1403"><a href="#ArticletovideoPlugin.regenerate_image-1403"><span class="linenos">1403</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1404"><a href="#ArticletovideoPlugin.regenerate_image-1404"><span class="linenos">1404</span></a>
</span><span id="ArticletovideoPlugin.regenerate_image-1405"><a href="#ArticletovideoPlugin.regenerate_image-1405"><span class="linenos">1405</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1406"><a href="#ArticletovideoPlugin.regenerate_image-1406"><span class="linenos">1406</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1407"><a href="#ArticletovideoPlugin.regenerate_image-1407"><span class="linenos">1407</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1408"><a href="#ArticletovideoPlugin.regenerate_image-1408"><span class="linenos">1408</span></a><span class="sd">        plugin.regenerate_image(1, &quot;A serene beach at sunset.&quot;)</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1409"><a href="#ArticletovideoPlugin.regenerate_image-1409"><span class="linenos">1409</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1410"><a href="#ArticletovideoPlugin.regenerate_image-1410"><span class="linenos">1410</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1411"><a href="#ArticletovideoPlugin.regenerate_image-1411"><span class="linenos">1411</span></a>        <span class="n">new_image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">_new.png&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1412"><a href="#ArticletovideoPlugin.regenerate_image-1412"><span class="linenos">1412</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">generate_image</span><span class="p">(</span><span class="n">new_prompt</span><span class="p">,</span> <span class="n">new_image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1413"><a href="#ArticletovideoPlugin.regenerate_image-1413"><span class="linenos">1413</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_image_path</span>
</span><span id="ArticletovideoPlugin.regenerate_image-1414"><a href="#ArticletovideoPlugin.regenerate_image-1414"><span class="linenos">1414</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">prompts</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_prompt</span>
</span></pre></div>


            <div class="docstring"><p>Regenerates a single image based on a new prompt provided by the user.</p>

<p>This method generates a new image using the updated prompt and
replaces the existing image with the new one.</p>

<h2 id="parameters">Parameters</h2>

<p>index : int
    The index of the image to be regenerated in the list of image paths.
new_prompt : str
    The new prompt to use for generating the image.</p>

<h2 id="raises">Raises</h2>

<p>FileNotFoundError
    If the output directory does not exist.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
plugin.regenerate_image(1, "A serene beach at sunset.")</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.replace_image" class="classattr">
                                        <input id="ArticletovideoPlugin.replace_image-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">replace_image</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">index</span>, </span><span class="param"><span class="n">uploaded_file</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.replace_image-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.replace_image"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.replace_image-1416"><a href="#ArticletovideoPlugin.replace_image-1416"><span class="linenos">1416</span></a>    <span class="k">def</span> <span class="nf">replace_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">uploaded_file</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.replace_image-1417"><a href="#ArticletovideoPlugin.replace_image-1417"><span class="linenos">1417</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.replace_image-1418"><a href="#ArticletovideoPlugin.replace_image-1418"><span class="linenos">1418</span></a><span class="sd">        Replaces an existing image with a new one uploaded by the user.</span>
</span><span id="ArticletovideoPlugin.replace_image-1419"><a href="#ArticletovideoPlugin.replace_image-1419"><span class="linenos">1419</span></a>
</span><span id="ArticletovideoPlugin.replace_image-1420"><a href="#ArticletovideoPlugin.replace_image-1420"><span class="linenos">1420</span></a><span class="sd">        This method resizes the uploaded image to match the aspect ratio</span>
</span><span id="ArticletovideoPlugin.replace_image-1421"><a href="#ArticletovideoPlugin.replace_image-1421"><span class="linenos">1421</span></a><span class="sd">        of 16:9, converts it to RGB, and saves it as a PNG file.</span>
</span><span id="ArticletovideoPlugin.replace_image-1422"><a href="#ArticletovideoPlugin.replace_image-1422"><span class="linenos">1422</span></a>
</span><span id="ArticletovideoPlugin.replace_image-1423"><a href="#ArticletovideoPlugin.replace_image-1423"><span class="linenos">1423</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.replace_image-1424"><a href="#ArticletovideoPlugin.replace_image-1424"><span class="linenos">1424</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.replace_image-1425"><a href="#ArticletovideoPlugin.replace_image-1425"><span class="linenos">1425</span></a><span class="sd">        index : int</span>
</span><span id="ArticletovideoPlugin.replace_image-1426"><a href="#ArticletovideoPlugin.replace_image-1426"><span class="linenos">1426</span></a><span class="sd">            The index of the image to be replaced in the list of image paths.</span>
</span><span id="ArticletovideoPlugin.replace_image-1427"><a href="#ArticletovideoPlugin.replace_image-1427"><span class="linenos">1427</span></a><span class="sd">        uploaded_file : UploadedFile</span>
</span><span id="ArticletovideoPlugin.replace_image-1428"><a href="#ArticletovideoPlugin.replace_image-1428"><span class="linenos">1428</span></a><span class="sd">            The new image file uploaded by the user.</span>
</span><span id="ArticletovideoPlugin.replace_image-1429"><a href="#ArticletovideoPlugin.replace_image-1429"><span class="linenos">1429</span></a>
</span><span id="ArticletovideoPlugin.replace_image-1430"><a href="#ArticletovideoPlugin.replace_image-1430"><span class="linenos">1430</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.replace_image-1431"><a href="#ArticletovideoPlugin.replace_image-1431"><span class="linenos">1431</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.replace_image-1432"><a href="#ArticletovideoPlugin.replace_image-1432"><span class="linenos">1432</span></a><span class="sd">        FileNotFoundError</span>
</span><span id="ArticletovideoPlugin.replace_image-1433"><a href="#ArticletovideoPlugin.replace_image-1433"><span class="linenos">1433</span></a><span class="sd">            If the output directory does not exist.</span>
</span><span id="ArticletovideoPlugin.replace_image-1434"><a href="#ArticletovideoPlugin.replace_image-1434"><span class="linenos">1434</span></a>
</span><span id="ArticletovideoPlugin.replace_image-1435"><a href="#ArticletovideoPlugin.replace_image-1435"><span class="linenos">1435</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.replace_image-1436"><a href="#ArticletovideoPlugin.replace_image-1436"><span class="linenos">1436</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.replace_image-1437"><a href="#ArticletovideoPlugin.replace_image-1437"><span class="linenos">1437</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.replace_image-1438"><a href="#ArticletovideoPlugin.replace_image-1438"><span class="linenos">1438</span></a><span class="sd">        plugin.replace_image(2, uploaded_file)</span>
</span><span id="ArticletovideoPlugin.replace_image-1439"><a href="#ArticletovideoPlugin.replace_image-1439"><span class="linenos">1439</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.replace_image-1440"><a href="#ArticletovideoPlugin.replace_image-1440"><span class="linenos">1440</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">uploaded_file</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.replace_image-1441"><a href="#ArticletovideoPlugin.replace_image-1441"><span class="linenos">1441</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;RGB&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.replace_image-1442"><a href="#ArticletovideoPlugin.replace_image-1442"><span class="linenos">1442</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">1280</span><span class="p">,</span> <span class="mi">720</span><span class="p">),</span> <span class="n">Image</span><span class="o">.</span><span class="n">LANCZOS</span><span class="p">)</span>  <span class="c1"># Resize to 16:9 aspect ratio</span>
</span><span id="ArticletovideoPlugin.replace_image-1443"><a href="#ArticletovideoPlugin.replace_image-1443"><span class="linenos">1443</span></a>        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin.replace_image-1444"><a href="#ArticletovideoPlugin.replace_image-1444"><span class="linenos">1444</span></a>        <span class="n">new_image_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">_uploaded.png&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.replace_image-1445"><a href="#ArticletovideoPlugin.replace_image-1445"><span class="linenos">1445</span></a>        <span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">new_image_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.replace_image-1446"><a href="#ArticletovideoPlugin.replace_image-1446"><span class="linenos">1446</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">image_paths</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_image_path</span>
</span></pre></div>


            <div class="docstring"><p>Replaces an existing image with a new one uploaded by the user.</p>

<p>This method resizes the uploaded image to match the aspect ratio
of 16:9, converts it to RGB, and saves it as a PNG file.</p>

<h2 id="parameters">Parameters</h2>

<p>index : int
    The index of the image to be replaced in the list of image paths.
uploaded_file : UploadedFile
    The new image file uploaded by the user.</p>

<h2 id="raises">Raises</h2>

<p>FileNotFoundError
    If the output directory does not exist.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
plugin.replace_image(2, uploaded_file)</p>
</div>


                            </div>
                            <div id="ArticletovideoPlugin.assemble_final_video" class="classattr">
                                        <input id="ArticletovideoPlugin.assemble_final_video-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">assemble_final_video</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">config</span>,</span><span class="param">	<span class="n">use_zoom_and_transitions</span>,</span><span class="param">	<span class="n">audio_paths</span>,</span><span class="param">	<span class="n">image_paths</span>,</span><span class="param">	<span class="n">output_path</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ArticletovideoPlugin.assemble_final_video-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ArticletovideoPlugin.assemble_final_video"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ArticletovideoPlugin.assemble_final_video-1448"><a href="#ArticletovideoPlugin.assemble_final_video-1448"><span class="linenos">1448</span></a>    <span class="k">def</span> <span class="nf">assemble_final_video</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1449"><a href="#ArticletovideoPlugin.assemble_final_video-1449"><span class="linenos">1449</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">use_zoom_and_transitions</span><span class="p">,</span> <span class="n">audio_paths</span><span class="p">,</span> <span class="n">image_paths</span><span class="p">,</span> <span class="n">output_path</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1450"><a href="#ArticletovideoPlugin.assemble_final_video-1450"><span class="linenos">1450</span></a>    <span class="p">):</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1451"><a href="#ArticletovideoPlugin.assemble_final_video-1451"><span class="linenos">1451</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1452"><a href="#ArticletovideoPlugin.assemble_final_video-1452"><span class="linenos">1452</span></a><span class="sd">        Assembles the final video from the generated audio and image files.</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1453"><a href="#ArticletovideoPlugin.assemble_final_video-1453"><span class="linenos">1453</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1454"><a href="#ArticletovideoPlugin.assemble_final_video-1454"><span class="linenos">1454</span></a><span class="sd">        This method combines the audio and image files into a video, optionally</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1455"><a href="#ArticletovideoPlugin.assemble_final_video-1455"><span class="linenos">1455</span></a><span class="sd">        adding zoom and transition effects.</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1456"><a href="#ArticletovideoPlugin.assemble_final_video-1456"><span class="linenos">1456</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1457"><a href="#ArticletovideoPlugin.assemble_final_video-1457"><span class="linenos">1457</span></a><span class="sd">        Parameters</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1458"><a href="#ArticletovideoPlugin.assemble_final_video-1458"><span class="linenos">1458</span></a><span class="sd">        ----------</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1459"><a href="#ArticletovideoPlugin.assemble_final_video-1459"><span class="linenos">1459</span></a><span class="sd">        config : dict</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1460"><a href="#ArticletovideoPlugin.assemble_final_video-1460"><span class="linenos">1460</span></a><span class="sd">            The configuration dictionary containing user-defined settings for</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1461"><a href="#ArticletovideoPlugin.assemble_final_video-1461"><span class="linenos">1461</span></a><span class="sd">            the plugin, such as zoom factor, speed factor, etc.</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1462"><a href="#ArticletovideoPlugin.assemble_final_video-1462"><span class="linenos">1462</span></a><span class="sd">        use_zoom_and_transitions : bool</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1463"><a href="#ArticletovideoPlugin.assemble_final_video-1463"><span class="linenos">1463</span></a><span class="sd">            Whether to apply zoom and transition effects to the video.</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1464"><a href="#ArticletovideoPlugin.assemble_final_video-1464"><span class="linenos">1464</span></a><span class="sd">        audio_paths : list of str</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1465"><a href="#ArticletovideoPlugin.assemble_final_video-1465"><span class="linenos">1465</span></a><span class="sd">            A list of file paths to the generated audio files.</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1466"><a href="#ArticletovideoPlugin.assemble_final_video-1466"><span class="linenos">1466</span></a><span class="sd">        image_paths : list of str</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1467"><a href="#ArticletovideoPlugin.assemble_final_video-1467"><span class="linenos">1467</span></a><span class="sd">            A list of file paths to the generated image files.</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1468"><a href="#ArticletovideoPlugin.assemble_final_video-1468"><span class="linenos">1468</span></a><span class="sd">        output_path : str</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1469"><a href="#ArticletovideoPlugin.assemble_final_video-1469"><span class="linenos">1469</span></a><span class="sd">            The file path where the final video will be saved.</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1470"><a href="#ArticletovideoPlugin.assemble_final_video-1470"><span class="linenos">1470</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1471"><a href="#ArticletovideoPlugin.assemble_final_video-1471"><span class="linenos">1471</span></a><span class="sd">        Raises</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1472"><a href="#ArticletovideoPlugin.assemble_final_video-1472"><span class="linenos">1472</span></a><span class="sd">        ------</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1473"><a href="#ArticletovideoPlugin.assemble_final_video-1473"><span class="linenos">1473</span></a><span class="sd">        ValueError</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1474"><a href="#ArticletovideoPlugin.assemble_final_video-1474"><span class="linenos">1474</span></a><span class="sd">            If the number of audio files does not match the number of image files.</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1475"><a href="#ArticletovideoPlugin.assemble_final_video-1475"><span class="linenos">1475</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1476"><a href="#ArticletovideoPlugin.assemble_final_video-1476"><span class="linenos">1476</span></a><span class="sd">        Examples</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1477"><a href="#ArticletovideoPlugin.assemble_final_video-1477"><span class="linenos">1477</span></a><span class="sd">        --------</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1478"><a href="#ArticletovideoPlugin.assemble_final_video-1478"><span class="linenos">1478</span></a><span class="sd">        plugin = ArticletovideoPlugin(&quot;article_to_video&quot;, plugin_manager)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1479"><a href="#ArticletovideoPlugin.assemble_final_video-1479"><span class="linenos">1479</span></a><span class="sd">        config = plugin.get_config_fields()</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1480"><a href="#ArticletovideoPlugin.assemble_final_video-1480"><span class="linenos">1480</span></a><span class="sd">        plugin.assemble_final_video(config, True, audio_paths, image_paths, &quot;~/output/final_video.mp4&quot;)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1481"><a href="#ArticletovideoPlugin.assemble_final_video-1481"><span class="linenos">1481</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1482"><a href="#ArticletovideoPlugin.assemble_final_video-1482"><span class="linenos">1482</span></a>        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">spinner</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;creating_video&quot;</span><span class="p">)):</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1483"><a href="#ArticletovideoPlugin.assemble_final_video-1483"><span class="linenos">1483</span></a>            <span class="n">video_clips</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1484"><a href="#ArticletovideoPlugin.assemble_final_video-1484"><span class="linenos">1484</span></a>            <span class="k">for</span> <span class="n">audio_path</span><span class="p">,</span> <span class="n">image_path</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">audio_paths</span><span class="p">,</span> <span class="n">image_paths</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1485"><a href="#ArticletovideoPlugin.assemble_final_video-1485"><span class="linenos">1485</span></a>                <span class="n">audio_clip</span> <span class="o">=</span> <span class="n">AudioFileClip</span><span class="p">(</span><span class="n">audio_path</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1486"><a href="#ArticletovideoPlugin.assemble_final_video-1486"><span class="linenos">1486</span></a>                <span class="n">image_clip</span> <span class="o">=</span> <span class="n">ImageClip</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span><span class="o">.</span><span class="n">set_duration</span><span class="p">(</span><span class="n">audio_clip</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1487"><a href="#ArticletovideoPlugin.assemble_final_video-1487"><span class="linenos">1487</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1488"><a href="#ArticletovideoPlugin.assemble_final_video-1488"><span class="linenos">1488</span></a>                <span class="k">if</span> <span class="n">use_zoom_and_transitions</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1489"><a href="#ArticletovideoPlugin.assemble_final_video-1489"><span class="linenos">1489</span></a>                    <span class="n">zoom_factor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;zoom_factor&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1490"><a href="#ArticletovideoPlugin.assemble_final_video-1490"><span class="linenos">1490</span></a>                    <span class="n">speed_factor</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;articletovideo&quot;</span><span class="p">][</span><span class="s2">&quot;speed_factor&quot;</span><span class="p">])</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1491"><a href="#ArticletovideoPlugin.assemble_final_video-1491"><span class="linenos">1491</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1492"><a href="#ArticletovideoPlugin.assemble_final_video-1492"><span class="linenos">1492</span></a>                    <span class="c1"># zoomed_clip = image_clip.resize(lambda t: 1 + zoom_factor * t) # simple zoom</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1493"><a href="#ArticletovideoPlugin.assemble_final_video-1493"><span class="linenos">1493</span></a>                    <span class="c1">#########</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1494"><a href="#ArticletovideoPlugin.assemble_final_video-1494"><span class="linenos">1494</span></a>                    <span class="k">def</span> <span class="nf">dynamic_zoom</span><span class="p">(</span><span class="n">get_frame</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1495"><a href="#ArticletovideoPlugin.assemble_final_video-1495"><span class="linenos">1495</span></a>                        <span class="c1"># Create a smooth, periodic motion for zoom</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1496"><a href="#ArticletovideoPlugin.assemble_final_video-1496"><span class="linenos">1496</span></a>                        <span class="n">zoom</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">zoom_factor</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">10</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1497"><a href="#ArticletovideoPlugin.assemble_final_video-1497"><span class="linenos">1497</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1498"><a href="#ArticletovideoPlugin.assemble_final_video-1498"><span class="linenos">1498</span></a>                        <span class="c1"># Generate wandering motion</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1499"><a href="#ArticletovideoPlugin.assemble_final_video-1499"><span class="linenos">1499</span></a>                        <span class="n">x_shift</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="mf">3.0</span><span class="p">)</span> <span class="o">*</span> <span class="n">speed_factor</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1500"><a href="#ArticletovideoPlugin.assemble_final_video-1500"><span class="linenos">1500</span></a>                        <span class="n">y_shift</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">t</span> <span class="o">/</span> <span class="mf">2.4</span><span class="p">)</span> <span class="o">*</span> <span class="n">speed_factor</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1501"><a href="#ArticletovideoPlugin.assemble_final_video-1501"><span class="linenos">1501</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1502"><a href="#ArticletovideoPlugin.assemble_final_video-1502"><span class="linenos">1502</span></a>                        <span class="c1"># Create the transformation matrix</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1503"><a href="#ArticletovideoPlugin.assemble_final_video-1503"><span class="linenos">1503</span></a>                        <span class="n">center_x</span><span class="p">,</span> <span class="n">center_y</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">x_shift</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">y_shift</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1504"><a href="#ArticletovideoPlugin.assemble_final_video-1504"><span class="linenos">1504</span></a>                        <span class="n">matrix</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">getRotationMatrix2D</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1505"><a href="#ArticletovideoPlugin.assemble_final_video-1505"><span class="linenos">1505</span></a>                            <span class="p">(</span><span class="n">center_x</span> <span class="o">*</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">w</span><span class="p">,</span> <span class="n">center_y</span> <span class="o">*</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">h</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">zoom</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1506"><a href="#ArticletovideoPlugin.assemble_final_video-1506"><span class="linenos">1506</span></a>                        <span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1507"><a href="#ArticletovideoPlugin.assemble_final_video-1507"><span class="linenos">1507</span></a>                        <span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">-</span> <span class="n">center_x</span><span class="p">)</span> <span class="o">*</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">w</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1508"><a href="#ArticletovideoPlugin.assemble_final_video-1508"><span class="linenos">1508</span></a>                        <span class="n">matrix</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">-</span> <span class="n">center_y</span><span class="p">)</span> <span class="o">*</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">h</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1509"><a href="#ArticletovideoPlugin.assemble_final_video-1509"><span class="linenos">1509</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1510"><a href="#ArticletovideoPlugin.assemble_final_video-1510"><span class="linenos">1510</span></a>                        <span class="n">frame</span> <span class="o">=</span> <span class="n">get_frame</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1511"><a href="#ArticletovideoPlugin.assemble_final_video-1511"><span class="linenos">1511</span></a>                        <span class="k">return</span> <span class="n">cv2</span><span class="o">.</span><span class="n">warpAffine</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1512"><a href="#ArticletovideoPlugin.assemble_final_video-1512"><span class="linenos">1512</span></a>                            <span class="n">frame</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1513"><a href="#ArticletovideoPlugin.assemble_final_video-1513"><span class="linenos">1513</span></a>                            <span class="n">matrix</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1514"><a href="#ArticletovideoPlugin.assemble_final_video-1514"><span class="linenos">1514</span></a>                            <span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">frame</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1515"><a href="#ArticletovideoPlugin.assemble_final_video-1515"><span class="linenos">1515</span></a>                            <span class="n">borderMode</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">BORDER_REFLECT_101</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1516"><a href="#ArticletovideoPlugin.assemble_final_video-1516"><span class="linenos">1516</span></a>                        <span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1517"><a href="#ArticletovideoPlugin.assemble_final_video-1517"><span class="linenos">1517</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1518"><a href="#ArticletovideoPlugin.assemble_final_video-1518"><span class="linenos">1518</span></a>                    <span class="n">zoomed_clip</span> <span class="o">=</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">fl</span><span class="p">(</span><span class="n">dynamic_zoom</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1519"><a href="#ArticletovideoPlugin.assemble_final_video-1519"><span class="linenos">1519</span></a>                    <span class="c1">#########</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1520"><a href="#ArticletovideoPlugin.assemble_final_video-1520"><span class="linenos">1520</span></a>                    <span class="n">video_clip</span> <span class="o">=</span> <span class="n">zoomed_clip</span><span class="o">.</span><span class="n">set_audio</span><span class="p">(</span><span class="n">audio_clip</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1521"><a href="#ArticletovideoPlugin.assemble_final_video-1521"><span class="linenos">1521</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1522"><a href="#ArticletovideoPlugin.assemble_final_video-1522"><span class="linenos">1522</span></a>                    <span class="n">video_clip</span> <span class="o">=</span> <span class="n">image_clip</span><span class="o">.</span><span class="n">set_audio</span><span class="p">(</span><span class="n">audio_clip</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1523"><a href="#ArticletovideoPlugin.assemble_final_video-1523"><span class="linenos">1523</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1524"><a href="#ArticletovideoPlugin.assemble_final_video-1524"><span class="linenos">1524</span></a>                <span class="n">video_clips</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">video_clip</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1525"><a href="#ArticletovideoPlugin.assemble_final_video-1525"><span class="linenos">1525</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1526"><a href="#ArticletovideoPlugin.assemble_final_video-1526"><span class="linenos">1526</span></a>            <span class="k">if</span> <span class="n">use_zoom_and_transitions</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1527"><a href="#ArticletovideoPlugin.assemble_final_video-1527"><span class="linenos">1527</span></a>                <span class="n">final_clips</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1528"><a href="#ArticletovideoPlugin.assemble_final_video-1528"><span class="linenos">1528</span></a>                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">clip</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">video_clips</span><span class="p">):</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1529"><a href="#ArticletovideoPlugin.assemble_final_video-1529"><span class="linenos">1529</span></a>                    <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1530"><a href="#ArticletovideoPlugin.assemble_final_video-1530"><span class="linenos">1530</span></a>                        <span class="n">final_clips</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CompositeVideoClip</span><span class="p">([</span><span class="n">clip</span><span class="o">.</span><span class="n">crossfadein</span><span class="p">(</span><span class="mi">1</span><span class="p">)]))</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1531"><a href="#ArticletovideoPlugin.assemble_final_video-1531"><span class="linenos">1531</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1532"><a href="#ArticletovideoPlugin.assemble_final_video-1532"><span class="linenos">1532</span></a>                        <span class="n">final_clips</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">clip</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1533"><a href="#ArticletovideoPlugin.assemble_final_video-1533"><span class="linenos">1533</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1534"><a href="#ArticletovideoPlugin.assemble_final_video-1534"><span class="linenos">1534</span></a>                <span class="n">final_clips</span> <span class="o">=</span> <span class="n">video_clips</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1535"><a href="#ArticletovideoPlugin.assemble_final_video-1535"><span class="linenos">1535</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1536"><a href="#ArticletovideoPlugin.assemble_final_video-1536"><span class="linenos">1536</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Concatenating video&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1537"><a href="#ArticletovideoPlugin.assemble_final_video-1537"><span class="linenos">1537</span></a>            <span class="n">final_video</span> <span class="o">=</span> <span class="n">concatenate_videoclips</span><span class="p">(</span><span class="n">final_clips</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;compose&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1538"><a href="#ArticletovideoPlugin.assemble_final_video-1538"><span class="linenos">1538</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Writing final video to file&quot;</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1539"><a href="#ArticletovideoPlugin.assemble_final_video-1539"><span class="linenos">1539</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1540"><a href="#ArticletovideoPlugin.assemble_final_video-1540"><span class="linenos">1540</span></a>            <span class="c1"># Create a progress container</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1541"><a href="#ArticletovideoPlugin.assemble_final_video-1541"><span class="linenos">1541</span></a>            <span class="n">progress_container</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">empty</span><span class="p">()</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1542"><a href="#ArticletovideoPlugin.assemble_final_video-1542"><span class="linenos">1542</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1543"><a href="#ArticletovideoPlugin.assemble_final_video-1543"><span class="linenos">1543</span></a>            <span class="c1"># Create a custom logger</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1544"><a href="#ArticletovideoPlugin.assemble_final_video-1544"><span class="linenos">1544</span></a>            <span class="n">logger</span> <span class="o">=</span> <span class="n">StreamlitProgressBarLogger</span><span class="p">(</span><span class="n">progress_container</span><span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1545"><a href="#ArticletovideoPlugin.assemble_final_video-1545"><span class="linenos">1545</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1546"><a href="#ArticletovideoPlugin.assemble_final_video-1546"><span class="linenos">1546</span></a>            <span class="c1"># Write the video file with the custom logger</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1547"><a href="#ArticletovideoPlugin.assemble_final_video-1547"><span class="linenos">1547</span></a>            <span class="n">final_video</span><span class="o">.</span><span class="n">write_videofile</span><span class="p">(</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1548"><a href="#ArticletovideoPlugin.assemble_final_video-1548"><span class="linenos">1548</span></a>                <span class="n">output_path</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1549"><a href="#ArticletovideoPlugin.assemble_final_video-1549"><span class="linenos">1549</span></a>                <span class="n">codec</span><span class="o">=</span><span class="s2">&quot;libx264&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1550"><a href="#ArticletovideoPlugin.assemble_final_video-1550"><span class="linenos">1550</span></a>                <span class="n">audio_codec</span><span class="o">=</span><span class="s2">&quot;aac&quot;</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1551"><a href="#ArticletovideoPlugin.assemble_final_video-1551"><span class="linenos">1551</span></a>                <span class="n">fps</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1552"><a href="#ArticletovideoPlugin.assemble_final_video-1552"><span class="linenos">1552</span></a>                <span class="c1"># logger=logger</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1553"><a href="#ArticletovideoPlugin.assemble_final_video-1553"><span class="linenos">1553</span></a>            <span class="p">)</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1554"><a href="#ArticletovideoPlugin.assemble_final_video-1554"><span class="linenos">1554</span></a>
</span><span id="ArticletovideoPlugin.assemble_final_video-1555"><a href="#ArticletovideoPlugin.assemble_final_video-1555"><span class="linenos">1555</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="n">t</span><span class="p">(</span><span class="s2">&quot;video_generated&quot;</span><span class="p">))</span>
</span><span id="ArticletovideoPlugin.assemble_final_video-1556"><a href="#ArticletovideoPlugin.assemble_final_video-1556"><span class="linenos">1556</span></a>        <span class="n">st</span><span class="o">.</span><span class="n">video</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Assembles the final video from the generated audio and image files.</p>

<p>This method combines the audio and image files into a video, optionally
adding zoom and transition effects.</p>

<h2 id="parameters">Parameters</h2>

<p>config : dict
    The configuration dictionary containing user-defined settings for
    the plugin, such as zoom factor, speed factor, etc.
use_zoom_and_transitions : bool
    Whether to apply zoom and transition effects to the video.
audio_paths : list of str
    A list of file paths to the generated audio files.
image_paths : list of str
    A list of file paths to the generated image files.
output_path : str
    The file path where the final video will be saved.</p>

<h2 id="raises">Raises</h2>

<p>ValueError
    If the number of audio files does not match the number of image files.</p>

<h2 id="examples">Examples</h2>

<p>plugin = ArticletovideoPlugin("article_to_video", plugin_manager)
config = plugin.get_config_fields()
plugin.assemble_final_video(config, True, audio_paths, image_paths, "~/output/final_video.mp4")</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>app.Plugin</dt>
                                <dd id="ArticletovideoPlugin.name" class="variable">name</dd>
                <dd id="ArticletovideoPlugin.plugin_manager" class="variable">plugin_manager</dd>
                <dd id="ArticletovideoPlugin.get_config_ui" class="function">get_config_ui</dd>
                <dd id="ArticletovideoPlugin.get_sidebar_config_ui" class="function">get_sidebar_config_ui</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="StreamlitProgressBarLogger">
                            <input id="StreamlitProgressBarLogger-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">StreamlitProgressBarLogger</span><wbr>(<span class="base">proglog.proglog.ProgressBarLogger</span>):

                <label class="view-source-button" for="StreamlitProgressBarLogger-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StreamlitProgressBarLogger"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StreamlitProgressBarLogger-1562"><a href="#StreamlitProgressBarLogger-1562"><span class="linenos">1562</span></a><span class="k">class</span> <span class="nc">StreamlitProgressBarLogger</span><span class="p">(</span><span class="n">ProgressBarLogger</span><span class="p">):</span>
</span><span id="StreamlitProgressBarLogger-1563"><a href="#StreamlitProgressBarLogger-1563"><span class="linenos">1563</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="StreamlitProgressBarLogger-1564"><a href="#StreamlitProgressBarLogger-1564"><span class="linenos">1564</span></a><span class="sd">    A custom logger for displaying progress in Streamlit during video rendering.</span>
</span><span id="StreamlitProgressBarLogger-1565"><a href="#StreamlitProgressBarLogger-1565"><span class="linenos">1565</span></a>
</span><span id="StreamlitProgressBarLogger-1566"><a href="#StreamlitProgressBarLogger-1566"><span class="linenos">1566</span></a><span class="sd">    This class extends the `ProgressBarLogger` to update a Streamlit progress bar</span>
</span><span id="StreamlitProgressBarLogger-1567"><a href="#StreamlitProgressBarLogger-1567"><span class="linenos">1567</span></a><span class="sd">    container in real-time as the video rendering progresses.</span>
</span><span id="StreamlitProgressBarLogger-1568"><a href="#StreamlitProgressBarLogger-1568"><span class="linenos">1568</span></a>
</span><span id="StreamlitProgressBarLogger-1569"><a href="#StreamlitProgressBarLogger-1569"><span class="linenos">1569</span></a><span class="sd">    Parameters</span>
</span><span id="StreamlitProgressBarLogger-1570"><a href="#StreamlitProgressBarLogger-1570"><span class="linenos">1570</span></a><span class="sd">    ----------</span>
</span><span id="StreamlitProgressBarLogger-1571"><a href="#StreamlitProgressBarLogger-1571"><span class="linenos">1571</span></a><span class="sd">    progress_container : Streamlit</span>
</span><span id="StreamlitProgressBarLogger-1572"><a href="#StreamlitProgressBarLogger-1572"><span class="linenos">1572</span></a><span class="sd">        A Streamlit container object used to display the progress bar.</span>
</span><span id="StreamlitProgressBarLogger-1573"><a href="#StreamlitProgressBarLogger-1573"><span class="linenos">1573</span></a>
</span><span id="StreamlitProgressBarLogger-1574"><a href="#StreamlitProgressBarLogger-1574"><span class="linenos">1574</span></a><span class="sd">    Methods</span>
</span><span id="StreamlitProgressBarLogger-1575"><a href="#StreamlitProgressBarLogger-1575"><span class="linenos">1575</span></a><span class="sd">    -------</span>
</span><span id="StreamlitProgressBarLogger-1576"><a href="#StreamlitProgressBarLogger-1576"><span class="linenos">1576</span></a><span class="sd">    callback(**changes)</span>
</span><span id="StreamlitProgressBarLogger-1577"><a href="#StreamlitProgressBarLogger-1577"><span class="linenos">1577</span></a><span class="sd">        Updates the progress bar based on the current progress index and total tasks.</span>
</span><span id="StreamlitProgressBarLogger-1578"><a href="#StreamlitProgressBarLogger-1578"><span class="linenos">1578</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="StreamlitProgressBarLogger-1579"><a href="#StreamlitProgressBarLogger-1579"><span class="linenos">1579</span></a>
</span><span id="StreamlitProgressBarLogger-1580"><a href="#StreamlitProgressBarLogger-1580"><span class="linenos">1580</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress_container</span><span class="p">):</span>
</span><span id="StreamlitProgressBarLogger-1581"><a href="#StreamlitProgressBarLogger-1581"><span class="linenos">1581</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="StreamlitProgressBarLogger-1582"><a href="#StreamlitProgressBarLogger-1582"><span class="linenos">1582</span></a><span class="sd">        Initializes the StreamlitProgressBarLogger with a progress container.</span>
</span><span id="StreamlitProgressBarLogger-1583"><a href="#StreamlitProgressBarLogger-1583"><span class="linenos">1583</span></a>
</span><span id="StreamlitProgressBarLogger-1584"><a href="#StreamlitProgressBarLogger-1584"><span class="linenos">1584</span></a><span class="sd">        Parameters</span>
</span><span id="StreamlitProgressBarLogger-1585"><a href="#StreamlitProgressBarLogger-1585"><span class="linenos">1585</span></a><span class="sd">        ----------</span>
</span><span id="StreamlitProgressBarLogger-1586"><a href="#StreamlitProgressBarLogger-1586"><span class="linenos">1586</span></a><span class="sd">        progress_container : Streamlit</span>
</span><span id="StreamlitProgressBarLogger-1587"><a href="#StreamlitProgressBarLogger-1587"><span class="linenos">1587</span></a><span class="sd">            A Streamlit container object used to display the progress bar.</span>
</span><span id="StreamlitProgressBarLogger-1588"><a href="#StreamlitProgressBarLogger-1588"><span class="linenos">1588</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StreamlitProgressBarLogger-1589"><a href="#StreamlitProgressBarLogger-1589"><span class="linenos">1589</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="StreamlitProgressBarLogger-1590"><a href="#StreamlitProgressBarLogger-1590"><span class="linenos">1590</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">progress_container</span> <span class="o">=</span> <span class="n">progress_container</span>
</span><span id="StreamlitProgressBarLogger-1591"><a href="#StreamlitProgressBarLogger-1591"><span class="linenos">1591</span></a>
</span><span id="StreamlitProgressBarLogger-1592"><a href="#StreamlitProgressBarLogger-1592"><span class="linenos">1592</span></a>    <span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">changes</span><span class="p">):</span>
</span><span id="StreamlitProgressBarLogger-1593"><a href="#StreamlitProgressBarLogger-1593"><span class="linenos">1593</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="StreamlitProgressBarLogger-1594"><a href="#StreamlitProgressBarLogger-1594"><span class="linenos">1594</span></a><span class="sd">        Updates the progress bar based on the current progress index and total tasks.</span>
</span><span id="StreamlitProgressBarLogger-1595"><a href="#StreamlitProgressBarLogger-1595"><span class="linenos">1595</span></a>
</span><span id="StreamlitProgressBarLogger-1596"><a href="#StreamlitProgressBarLogger-1596"><span class="linenos">1596</span></a><span class="sd">        Parameters</span>
</span><span id="StreamlitProgressBarLogger-1597"><a href="#StreamlitProgressBarLogger-1597"><span class="linenos">1597</span></a><span class="sd">        ----------</span>
</span><span id="StreamlitProgressBarLogger-1598"><a href="#StreamlitProgressBarLogger-1598"><span class="linenos">1598</span></a><span class="sd">        **changes : dict</span>
</span><span id="StreamlitProgressBarLogger-1599"><a href="#StreamlitProgressBarLogger-1599"><span class="linenos">1599</span></a><span class="sd">            Keyword arguments containing the current progress index and total tasks.</span>
</span><span id="StreamlitProgressBarLogger-1600"><a href="#StreamlitProgressBarLogger-1600"><span class="linenos">1600</span></a>
</span><span id="StreamlitProgressBarLogger-1601"><a href="#StreamlitProgressBarLogger-1601"><span class="linenos">1601</span></a><span class="sd">        Raises</span>
</span><span id="StreamlitProgressBarLogger-1602"><a href="#StreamlitProgressBarLogger-1602"><span class="linenos">1602</span></a><span class="sd">        ------</span>
</span><span id="StreamlitProgressBarLogger-1603"><a href="#StreamlitProgressBarLogger-1603"><span class="linenos">1603</span></a><span class="sd">        KeyError</span>
</span><span id="StreamlitProgressBarLogger-1604"><a href="#StreamlitProgressBarLogger-1604"><span class="linenos">1604</span></a><span class="sd">            If &#39;index&#39; or &#39;total&#39; keys are missing from the changes dictionary.</span>
</span><span id="StreamlitProgressBarLogger-1605"><a href="#StreamlitProgressBarLogger-1605"><span class="linenos">1605</span></a>
</span><span id="StreamlitProgressBarLogger-1606"><a href="#StreamlitProgressBarLogger-1606"><span class="linenos">1606</span></a><span class="sd">        Examples</span>
</span><span id="StreamlitProgressBarLogger-1607"><a href="#StreamlitProgressBarLogger-1607"><span class="linenos">1607</span></a><span class="sd">        --------</span>
</span><span id="StreamlitProgressBarLogger-1608"><a href="#StreamlitProgressBarLogger-1608"><span class="linenos">1608</span></a><span class="sd">        progress_container = st.empty()</span>
</span><span id="StreamlitProgressBarLogger-1609"><a href="#StreamlitProgressBarLogger-1609"><span class="linenos">1609</span></a><span class="sd">        logger = StreamlitProgressBarLogger(progress_container)</span>
</span><span id="StreamlitProgressBarLogger-1610"><a href="#StreamlitProgressBarLogger-1610"><span class="linenos">1610</span></a><span class="sd">        logger.callback(index=1, total=10)</span>
</span><span id="StreamlitProgressBarLogger-1611"><a href="#StreamlitProgressBarLogger-1611"><span class="linenos">1611</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StreamlitProgressBarLogger-1612"><a href="#StreamlitProgressBarLogger-1612"><span class="linenos">1612</span></a>        <span class="k">if</span> <span class="s2">&quot;index&quot;</span> <span class="ow">in</span> <span class="n">changes</span> <span class="ow">and</span> <span class="s2">&quot;total&quot;</span> <span class="ow">in</span> <span class="n">changes</span><span class="p">:</span>
</span><span id="StreamlitProgressBarLogger-1613"><a href="#StreamlitProgressBarLogger-1613"><span class="linenos">1613</span></a>            <span class="n">progress</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">changes</span><span class="p">[</span><span class="s2">&quot;index&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">changes</span><span class="p">[</span><span class="s2">&quot;total&quot;</span><span class="p">],</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span id="StreamlitProgressBarLogger-1614"><a href="#StreamlitProgressBarLogger-1614"><span class="linenos">1614</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">progress_container</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="n">progress</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>A custom logger for displaying progress in Streamlit during video rendering.</p>

<p>This class extends the <code>ProgressBarLogger</code> to update a Streamlit progress bar
container in real-time as the video rendering progresses.</p>

<h2 id="parameters">Parameters</h2>

<p>progress_container : Streamlit
    A Streamlit container object used to display the progress bar.</p>

<h2 id="methods">Methods</h2>

<p>callback(**changes)
    Updates the progress bar based on the current progress index and total tasks.</p>
</div>


                            <div id="StreamlitProgressBarLogger.__init__" class="classattr">
                                        <input id="StreamlitProgressBarLogger.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">StreamlitProgressBarLogger</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">progress_container</span></span>)</span>

                <label class="view-source-button" for="StreamlitProgressBarLogger.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StreamlitProgressBarLogger.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StreamlitProgressBarLogger.__init__-1580"><a href="#StreamlitProgressBarLogger.__init__-1580"><span class="linenos">1580</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress_container</span><span class="p">):</span>
</span><span id="StreamlitProgressBarLogger.__init__-1581"><a href="#StreamlitProgressBarLogger.__init__-1581"><span class="linenos">1581</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="StreamlitProgressBarLogger.__init__-1582"><a href="#StreamlitProgressBarLogger.__init__-1582"><span class="linenos">1582</span></a><span class="sd">        Initializes the StreamlitProgressBarLogger with a progress container.</span>
</span><span id="StreamlitProgressBarLogger.__init__-1583"><a href="#StreamlitProgressBarLogger.__init__-1583"><span class="linenos">1583</span></a>
</span><span id="StreamlitProgressBarLogger.__init__-1584"><a href="#StreamlitProgressBarLogger.__init__-1584"><span class="linenos">1584</span></a><span class="sd">        Parameters</span>
</span><span id="StreamlitProgressBarLogger.__init__-1585"><a href="#StreamlitProgressBarLogger.__init__-1585"><span class="linenos">1585</span></a><span class="sd">        ----------</span>
</span><span id="StreamlitProgressBarLogger.__init__-1586"><a href="#StreamlitProgressBarLogger.__init__-1586"><span class="linenos">1586</span></a><span class="sd">        progress_container : Streamlit</span>
</span><span id="StreamlitProgressBarLogger.__init__-1587"><a href="#StreamlitProgressBarLogger.__init__-1587"><span class="linenos">1587</span></a><span class="sd">            A Streamlit container object used to display the progress bar.</span>
</span><span id="StreamlitProgressBarLogger.__init__-1588"><a href="#StreamlitProgressBarLogger.__init__-1588"><span class="linenos">1588</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StreamlitProgressBarLogger.__init__-1589"><a href="#StreamlitProgressBarLogger.__init__-1589"><span class="linenos">1589</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="StreamlitProgressBarLogger.__init__-1590"><a href="#StreamlitProgressBarLogger.__init__-1590"><span class="linenos">1590</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">progress_container</span> <span class="o">=</span> <span class="n">progress_container</span>
</span></pre></div>


            <div class="docstring"><p>Initializes the StreamlitProgressBarLogger with a progress container.</p>

<h2 id="parameters">Parameters</h2>

<p>progress_container : Streamlit
    A Streamlit container object used to display the progress bar.</p>
</div>


                            </div>
                            <div id="StreamlitProgressBarLogger.progress_container" class="classattr">
                                <div class="attr variable">
            <span class="name">progress_container</span>

        
    </div>
    <a class="headerlink" href="#StreamlitProgressBarLogger.progress_container"></a>
    
    

                            </div>
                            <div id="StreamlitProgressBarLogger.callback" class="classattr">
                                        <input id="StreamlitProgressBarLogger.callback-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callback</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">changes</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="StreamlitProgressBarLogger.callback-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StreamlitProgressBarLogger.callback"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StreamlitProgressBarLogger.callback-1592"><a href="#StreamlitProgressBarLogger.callback-1592"><span class="linenos">1592</span></a>    <span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">changes</span><span class="p">):</span>
</span><span id="StreamlitProgressBarLogger.callback-1593"><a href="#StreamlitProgressBarLogger.callback-1593"><span class="linenos">1593</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="StreamlitProgressBarLogger.callback-1594"><a href="#StreamlitProgressBarLogger.callback-1594"><span class="linenos">1594</span></a><span class="sd">        Updates the progress bar based on the current progress index and total tasks.</span>
</span><span id="StreamlitProgressBarLogger.callback-1595"><a href="#StreamlitProgressBarLogger.callback-1595"><span class="linenos">1595</span></a>
</span><span id="StreamlitProgressBarLogger.callback-1596"><a href="#StreamlitProgressBarLogger.callback-1596"><span class="linenos">1596</span></a><span class="sd">        Parameters</span>
</span><span id="StreamlitProgressBarLogger.callback-1597"><a href="#StreamlitProgressBarLogger.callback-1597"><span class="linenos">1597</span></a><span class="sd">        ----------</span>
</span><span id="StreamlitProgressBarLogger.callback-1598"><a href="#StreamlitProgressBarLogger.callback-1598"><span class="linenos">1598</span></a><span class="sd">        **changes : dict</span>
</span><span id="StreamlitProgressBarLogger.callback-1599"><a href="#StreamlitProgressBarLogger.callback-1599"><span class="linenos">1599</span></a><span class="sd">            Keyword arguments containing the current progress index and total tasks.</span>
</span><span id="StreamlitProgressBarLogger.callback-1600"><a href="#StreamlitProgressBarLogger.callback-1600"><span class="linenos">1600</span></a>
</span><span id="StreamlitProgressBarLogger.callback-1601"><a href="#StreamlitProgressBarLogger.callback-1601"><span class="linenos">1601</span></a><span class="sd">        Raises</span>
</span><span id="StreamlitProgressBarLogger.callback-1602"><a href="#StreamlitProgressBarLogger.callback-1602"><span class="linenos">1602</span></a><span class="sd">        ------</span>
</span><span id="StreamlitProgressBarLogger.callback-1603"><a href="#StreamlitProgressBarLogger.callback-1603"><span class="linenos">1603</span></a><span class="sd">        KeyError</span>
</span><span id="StreamlitProgressBarLogger.callback-1604"><a href="#StreamlitProgressBarLogger.callback-1604"><span class="linenos">1604</span></a><span class="sd">            If &#39;index&#39; or &#39;total&#39; keys are missing from the changes dictionary.</span>
</span><span id="StreamlitProgressBarLogger.callback-1605"><a href="#StreamlitProgressBarLogger.callback-1605"><span class="linenos">1605</span></a>
</span><span id="StreamlitProgressBarLogger.callback-1606"><a href="#StreamlitProgressBarLogger.callback-1606"><span class="linenos">1606</span></a><span class="sd">        Examples</span>
</span><span id="StreamlitProgressBarLogger.callback-1607"><a href="#StreamlitProgressBarLogger.callback-1607"><span class="linenos">1607</span></a><span class="sd">        --------</span>
</span><span id="StreamlitProgressBarLogger.callback-1608"><a href="#StreamlitProgressBarLogger.callback-1608"><span class="linenos">1608</span></a><span class="sd">        progress_container = st.empty()</span>
</span><span id="StreamlitProgressBarLogger.callback-1609"><a href="#StreamlitProgressBarLogger.callback-1609"><span class="linenos">1609</span></a><span class="sd">        logger = StreamlitProgressBarLogger(progress_container)</span>
</span><span id="StreamlitProgressBarLogger.callback-1610"><a href="#StreamlitProgressBarLogger.callback-1610"><span class="linenos">1610</span></a><span class="sd">        logger.callback(index=1, total=10)</span>
</span><span id="StreamlitProgressBarLogger.callback-1611"><a href="#StreamlitProgressBarLogger.callback-1611"><span class="linenos">1611</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="StreamlitProgressBarLogger.callback-1612"><a href="#StreamlitProgressBarLogger.callback-1612"><span class="linenos">1612</span></a>        <span class="k">if</span> <span class="s2">&quot;index&quot;</span> <span class="ow">in</span> <span class="n">changes</span> <span class="ow">and</span> <span class="s2">&quot;total&quot;</span> <span class="ow">in</span> <span class="n">changes</span><span class="p">:</span>
</span><span id="StreamlitProgressBarLogger.callback-1613"><a href="#StreamlitProgressBarLogger.callback-1613"><span class="linenos">1613</span></a>            <span class="n">progress</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">changes</span><span class="p">[</span><span class="s2">&quot;index&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">changes</span><span class="p">[</span><span class="s2">&quot;total&quot;</span><span class="p">],</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span id="StreamlitProgressBarLogger.callback-1614"><a href="#StreamlitProgressBarLogger.callback-1614"><span class="linenos">1614</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">progress_container</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="n">progress</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Updates the progress bar based on the current progress index and total tasks.</p>

<h2 id="parameters">Parameters</h2>

<p>**changes : dict
    Keyword arguments containing the current progress index and total tasks.</p>

<h2 id="raises">Raises</h2>

<p>KeyError
    If 'index' or 'total' keys are missing from the changes dictionary.</p>

<h2 id="examples">Examples</h2>

<p>progress_container = st.empty()
logger = StreamlitProgressBarLogger(progress_container)
logger.callback(index=1, total=10)</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>proglog.proglog.ProgressBarLogger</dt>
                                <dd id="StreamlitProgressBarLogger.bar_indent" class="variable">bar_indent</dd>
                <dd id="StreamlitProgressBarLogger.ignored_bars" class="variable">ignored_bars</dd>
                <dd id="StreamlitProgressBarLogger.logged_bars" class="variable">logged_bars</dd>
                <dd id="StreamlitProgressBarLogger.min_time_interval" class="variable">min_time_interval</dd>
                <dd id="StreamlitProgressBarLogger.ignore_bars_under" class="variable">ignore_bars_under</dd>
                <dd id="StreamlitProgressBarLogger.bars" class="variable">bars</dd>
                <dd id="StreamlitProgressBarLogger.bar_is_ignored" class="function">bar_is_ignored</dd>
                <dd id="StreamlitProgressBarLogger.bar_is_logged" class="function">bar_is_logged</dd>
                <dd id="StreamlitProgressBarLogger.iterable_is_too_short" class="function">iterable_is_too_short</dd>
                <dd id="StreamlitProgressBarLogger.iter_bar" class="function">iter_bar</dd>
                <dd id="StreamlitProgressBarLogger.bars_callback" class="function">bars_callback</dd>

            </div>
            <div><dt>proglog.proglog.ProgressLogger</dt>
                                <dd id="StreamlitProgressBarLogger.state" class="variable">state</dd>
                <dd id="StreamlitProgressBarLogger.stored" class="variable">stored</dd>
                <dd id="StreamlitProgressBarLogger.logs" class="variable">logs</dd>
                <dd id="StreamlitProgressBarLogger.log_indent" class="variable">log_indent</dd>
                <dd id="StreamlitProgressBarLogger.log" class="function">log</dd>
                <dd id="StreamlitProgressBarLogger.dump_logs" class="function">dump_logs</dd>
                <dd id="StreamlitProgressBarLogger.store" class="function">store</dd>
                <dd id="StreamlitProgressBarLogger.store_callback" class="function">store_callback</dd>
                <dd id="StreamlitProgressBarLogger.iter" class="function">iter</dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
</body>
</html>